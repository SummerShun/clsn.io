---
title: TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集
author: 惨绿少年
type: post
date: 2017-10-08T18:24:00+00:00
url: /clsn/lx949.html
Baidusubmit:
  - 1
views:
  - 149
zm_favorites:
  - 1
categories:
  - Linux运维
  - 网络技术
  - 运维基本功

---
# <span id="1">第1章 <span style="font-family: 新宋体;">概念介绍</span></span>

## <span id="11_VLAN">1.1 VLAN</span>

### <span id="111_VLAN">1.1.1 <span style="font-family: 新宋体;">什么是</span>VLAN</span>

<span style="font-family: 新宋体;">　　</span>VLAN(Virtual LAN)<span style="font-family: 新宋体;">，翻译成中文是&ldquo;<span style="background: lime;">虚拟局域网</span>&rdquo;。</span>LAN<span style="font-family: 新宋体;">可以是由少数几台家用计算机构成的网络，也可以是数以百计的计算机构成的企业网络。</span>VLAN<span style="font-family: 新宋体;">所指的</span>LAN<span style="font-family: 新宋体;">特指使用路由器分割的网络&mdash;&mdash;也就是广播域。</span>

### <span id="112_VLAN">1.1.2 <span style="font-family: 新宋体;">划分</span>VLAN<span style="font-family: 新宋体;">的目的</span></span>

<p style="margin-left: 18.0pt; text-indent: -18.0pt;">
  1.<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">提高安全性</span>
</p>

<p style="margin-left: 42.0pt; text-indent: -21.0pt;">
  a)<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 新宋体;">举个例子</span>:<span style="font-family: 新宋体;">没有划分</span>VLAN<span style="font-family: 新宋体;">前</span>,<span style="font-family: 新宋体;">交换机端口连接下的所有</span>PC<span style="font-family: 新宋体;">都处于一个</span>VLAN<span style="font-family: 新宋体;">中即一个广播域中</span>,<span style="font-family: 新宋体;">实现</span>ARP<span style="font-family: 新宋体;">中间人攻击太简单了</span>.<span style="font-family: 新宋体;">划分了</span>VLAN<span style="font-family: 新宋体;">之后</span>,<span style="font-family: 新宋体;">缩小了</span>ARP<span style="font-family: 新宋体;">攻击的范围</span>.<span style="background: aqua;">ARP</span><span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">报文</span><span style="font-family: 新宋体;">是一个</span>2.5<span style="font-family: 新宋体;">层的报文</span>,<span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">只能在同一个</span><span style="background: aqua;">VLAN</span><span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">中传播</span><span style="background: aqua;">.</span>
</p>

<p style="margin-left: 18.0pt; text-indent: -18.0pt;">
  2.<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">提高性能</span>
</p>

<p style="margin-left: 42.0pt; text-indent: -21.0pt;">
  a)<span style="font-variant-numeric: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 新宋体;">不划分</span>VLAN,<span style="font-family: 新宋体;">整个交换机都处于一个广播域</span>,<span style="font-family: 新宋体;">随便一台</span>PC<span style="font-family: 新宋体;">发送的广播报文都能传送整个广域播</span>,<span style="font-family: 新宋体;">占用了很多带宽</span>.<span style="font-family: 新宋体;">划分了</span>VLAN,<span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">缩小的广播域</span><span style="font-family: 新宋体;">的大小</span>,<span style="font-family: 新宋体; times new roman"4times new roman"; background: aqua;">缩小了广播报文能够到达的范围</span>.
</p>

### <span id="113_vlan">1.1.3 vlan <span style="font-family: 新宋体;">配置</span></span>

#### <span id="1131nbspvlan_20">1.1.3.1&nbsp;<span style="font-family: 新宋体;">创建</span>vlan 20</span>

<div class="cnblogs_code">
  <pre>Switch(config)<span style="color: #008000;">#</span><span style="color: #008000;">vlan 20</span>
Switch(config-vlan)<span style="color: #008000;">#</span><span style="color: #008000;">name test   #给vlan命名</span>
Switch(config-vlan)<span style="color: #008000;">#</span><span style="color: #008000;">exit</span></pre>
</div>

#### <span id="11311nbspnbspnbspnbspnbspnbsp_vlan_20">1.1.3.1.1<span style="font-variant-numeric: normal; font-weight: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: 'Times New Roman';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: 新宋体;">进入端口将端口分配到</span>vlan 20</span>

<div class="cnblogs_code">
  <pre>Switch(config)<span style="color: #008000;">#</span><span style="color: #008000;">interface FastEthernet 0/1</span>
Switch(config-<span style="color: #0000ff;">if</span>)<span style="color: #008000;">#</span><span style="color: #008000;">switchport access vlan 20</span></pre>
</div>

#### <span id="1132nbspvlan">1.1.3.2&nbsp;<span style="font-family: 新宋体;">查看</span>vlan<span style="font-family: 新宋体;">的信息</span></span>

<div class="cnblogs_code">
  <pre>Switch<span style="color: #008000;">#</span><span style="color: #008000;">show vlan brief</span>
<span style="color: #000000;"> 
VLAN Name                             Status    Ports
</span>---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/2, Fa0/3, Fa0/4, Fa0/5<span style="color: #000000;">
                                                Fa0</span>/6, Fa0/7, Fa0/8, Fa0/9<span style="color: #000000;">
                                                Fa0</span>/10, Fa0/11, Fa0/12, Fa0/13<span style="color: #000000;">
                                                Fa0</span>/14, Fa0/15, Fa0/16, Fa0/17<span style="color: #000000;">
                                                Fa0</span>/18, Fa0/19, Fa0/20, Fa0/21<span style="color: #000000;">
                                                Fa0</span>/22, Fa0/23, Fa0/24
20   test                             active    Fa0/1
1002 fddi-<span style="color: #000000;">default                     active   
</span>1003 token-ring-<span style="color: #000000;">default               active   
</span>1004 fddinet-<span style="color: #000000;">default                  active   
</span>1005 trnet-default                    active   </pre>
</div>

## <span id="12_DoD">1.2 DoD<span style="font-family: 新宋体;">参考模型</span></span>

<p style="margin-left: 18.0pt;">
  <span style="font-family: 新宋体;">在</span>OSI 7<span style="font-family: 新宋体;">层模型的基础上进行了精简和优化，产生了</span>DoD<span style="font-family: 新宋体;">参考模型</span>
</p>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144312147-1001503122.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />&nbsp;
</p>

## <span id="13_TCPIP">1.3 TCP/IP <span style="font-family: 新宋体;">协议簇</span></span>

### <span id="131">1.3.1 <span style="font-family: 新宋体;">组成</span></span>

<p style="text-indent: 21.0pt;">
  TCP/IP<span style="font-family: 新宋体;">协议簇是</span>Internet<span style="font-family: 新宋体;">的基础，也是当今最流行的组网形式。</span>TCP/IP<span style="font-family: 新宋体;">是一组协议的代名词，包括许多别的协议，组成了</span>TCP/IP<span style="font-family: 新宋体;">协议簇。其中比较重要的有</span>SLIP<span style="font-family: 新宋体;">协议、</span>PPP<span style="font-family: 新宋体;">协议、</span>IP<span style="font-family: 新宋体;">协议、</span>ICMP<span style="font-family: 新宋体;">协议、</span>ARP<span style="font-family: 新宋体;">协议、</span>TCP<span style="font-family: 新宋体;">协议、</span>UDP<span style="font-family: 新宋体;">协议、</span>FTP<span style="font-family: 新宋体;">协议、</span>DNS<span style="font-family: 新宋体;">协议、</span>SMTP<span style="font-family: 新宋体;">协议等。</span>
</p>

### <span id="132_tcpip">1.3.2 tcp/ip<span style="font-family: 新宋体;">协议簇中相关协议</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144452740-1035006513.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />&nbsp;
</p>

### <span id="133">1.3.3 <span style="font-family: 新宋体;">协议名称与对应端口号</span></span>

<table style="width: 100.0%; border-collapse: collapse;" border="0" cellspacing="0" cellpadding="0">
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-width: 1pt; border-style: solid; border-color: windowtext; background: #8497b0; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <strong><span style="font-size: 11.0pt; font-family: '微软雅黑',sans-serif; color: white;">协议名称</span></strong>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: 1pt solid windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: none; background: #8497b0; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <strong><span style="font-size: 11.0pt; font-family: '微软雅黑',sans-serif; color: white;">中文释义</span></strong>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: 1pt solid windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: none; background: #8497b0; padding: 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <strong><span style="font-size: 11.0pt; font-family: '微软雅黑',sans-serif; color: white;">协议端口</span></strong>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">FTP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">文件传输协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">21</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">SSH</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">安全 Shell（SSH）服务</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">22</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">Telnet</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">远程登陆服务的标准协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">23</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">SMTP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">简单邮件传输协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">25(UDP)</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">DHCP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">动态主机配置协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">67 68(UDP)</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">TFTP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">简单文件传输协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">69</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">HTTP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">超文本传输协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">80/8080</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">POP3</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">邮局协议版本3</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">110</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">rpc</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">远程过程调用协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">111</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">SNMP</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">简单网络管理协议</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">161</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 2.65pt;">
    <td style="width: 33.34%; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; border-left: 1pt solid windowtext; border-top: none; padding: 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">NFS</span><span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">协议</span>
      </p>
    </td>
    
    <td style="width: 33.34%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        &nbsp;<span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">网络文件系统</span>
      </p>
    </td>
    
    <td style="width: 33.32%; border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 2.65pt;" nowrap="nowrap" width="33%">
      <p style="text-align: center; line-height: normal;" align="center">
        <span style="font-size: 11pt; font-family: 微软雅黑, sans-serif;">　</span>
      </p>
    </td>
  </tr>
</table>

<p style="margin-left: 24.0pt;">
  &nbsp;
</p>

### <span id="134">1.3.4 <span style="font-family: 新宋体;">端口号</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">标示协议信息，便于计算机之间进行识别</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="color: red;"></span> <span style="font-family: 新宋体;">号端口<span style="color: red;">在</span></span><span style="color: red;">udp</span><span style="font-family: 新宋体; times new roman"4times new roman";color: red;">和</span><span style="color: red;">tcp </span><span style="font-family: 新宋体; times new roman"4times new roman";color: red;">中都不会使用</span><span style="font-family: 新宋体;">。</span>
</p>

## <span id="14_TCP_UDP">1.4 TCP <span style="font-family: 新宋体;">与</span>UDP</span>

<p style="text-indent: 18.0pt;">
  TCP <span style="font-family: 新宋体;">（传输控制协议）<span style="background: lime;">面向连接</span>的网络协议</span>
</p>

<p style="text-indent: 18.0pt;">
  UDP <span style="font-family: 新宋体;">（用户报文协议）<span style="background: lime;">面向无连接</span>的网络协议</span>
</p>

<p style="text-indent: 18.0pt;">
  &nbsp;
</p>

### <span id="141_TCPUDP">1.4.1 TCP<span style="font-family: 新宋体;">与</span>UDP <span style="font-family: 新宋体;">协议对比：</span></span>

<table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width: 261.4pt; border-top: 1pt solid #9bbb59; border-bottom: 1pt solid #9bbb59; border-left: 1pt solid #9bbb59; border-right: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-size: 14.0pt; line-height: 125%; font-family: 新宋体; times new roman"4times new roman";color: white;">传输控制协议（</span><span style="font-size: 14.0pt; line-height: 125%; color: white;">TCP</span><span style="font-size: 14.0pt; line-height: 125%; font-family: 新宋体; times new roman"4times new roman";color: white;">）</span>
      </p>
    </td>
    
    <td style="width: 261.4pt; border-top: 1pt solid #9bbb59; border-right: 1pt solid #9bbb59; border-bottom: 1pt solid #9bbb59; border-left: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-size: 14.0pt; line-height: 125%; font-family: 新宋体; times new roman"4times new roman";color: white;">用户数据报协议（</span><span style="font-size: 14.0pt; line-height: 125%; color: white;">UDP</span><span style="font-size: 14.0pt; line-height: 125%; font-family: 新宋体; times new roman"4times new roman";color: white;">）</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 261.4pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">面向连接</span>
      </p>
    </td>
    
    <td style="width: 261.4pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">无连接</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 261.4pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">可靠传输</span>
      </p>
    </td>
    
    <td style="width: 261.4pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">不可靠传输</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 261.4pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">流控</span>
      </p>
    </td>
    
    <td style="width: 261.4pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">尽力而为，尽力传递</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 261.4pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; padding: 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">使用TCP应用：</span>
      </p>
      
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">WEB</span><span style="font-family: '微软雅黑 Light',sans-serif;">浏览器；电子邮件；文件传输服务</span>
      </p>
    </td>
    
    <td style="width: 261.4pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="349">
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">使用UDP的应用：</span>
      </p>
      
      <p>
        <span style="font-family: '微软雅黑 Light',sans-serif;">域名系统 （DNS）；视频流；ip语音（VoIP）</span>
      </p>
    </td>
  </tr>
</table>

## <span id="15_TCP">1.5 <span style="background: lime;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">报文的结构</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144509709-466484102.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />&nbsp;
</p>

### <span id="151_ACK">1.5.1 <span style="font-family: 新宋体; times new roman"4times new roman"; background: aqua;">确认</span><span style="font-family: 新宋体;">字段</span><span style="background: aqua;">ACK</span></span>

&nbsp;&nbsp; <span style="font-family: 新宋体;">当</span>ACK=1<span style="font-family: 新宋体;">时，表示确认，且确认号有效；当</span>ACK=0<span style="font-family: 新宋体;">时，确认号字段无效</span>

### <span id="152_SYN">1.5.2 <span style="font-family: 新宋体; times new roman"4times new roman"; background: aqua;">请求</span><span style="font-family: 新宋体;">连接字段</span> <span style="background: aqua;">SYN</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">当</span>SYN=1<span style="font-family: 新宋体;">时，表示发起一个连接请求。</span>
</p>

### <span id="153_FIN">1.5.3 <span style="font-family: 新宋体; times new roman"4times new roman"; background: aqua;">断开</span><span style="font-family: 新宋体;">连接字段</span><span style="background: aqua;">FIN</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">用来释放连接。当</span>FIN=1<span style="font-family: 新宋体;">时，表明此报文段的发送端的数据已发送完成，并要求释放连接。</span>
</p>

### <span id="154_nbsp">1.5.4 <span style="font-family: 新宋体;">序号</span>&nbsp;</span>

<p style="margin-left: 21.0pt;">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">每一个</span>TCP<span style="font-family: 新宋体;">报文段都会有一个序号，序号字段的值其实是本报文段所发送的数据的第一个字节的序号。</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">这是因为</span>TCP<span style="font-family: 新宋体;">是面向连接的可靠服务，其每一个字节都会对应一个序号，通过序号来确保服务的可靠性和有序性。</span>&nbsp;
</p>

### <span id="155">1.5.5 <span style="font-family: 新宋体;">确认号</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">确认号，是<span style="background: yellow;">期望收到</span><span style="background: lime;">对方的下一个报文段的数据的第一个字节的序号</span>。</span>
</p>

#### <span id="1551nbsp_nbspnbsp">1.5.5.1&nbsp;<span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">序号与确认号</span> **&nbsp;&nbsp;**</span>

> 发送端发送一个seq序列号x，接收端需要回复一个确认号x+1，并发送一个序列号Y
> 
> 发送端接收一个seq序列号y，接收端需要回复一个确认号y+1

# <span id="2">第2章 <span style="font-family: 新宋体;">三次握手与四次挥手</span></span>

## <span id="21">2.1 <span style="font-family: 新宋体;">三次握手</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144422584-1555079527.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />
</p>

### <span id="211">2.1.1 <span style="font-family: 新宋体;">含义</span></span>

<span style="font-family: 新宋体;">（</span>1<span style="font-family: 新宋体;">）客户</span> <span style="font-family: 新宋体;">端发送一个带</span>SYN<span style="font-family: 新宋体;">标志的</span>TCP<span style="font-family: 新宋体;">报文到服务器。</span>

<span style="font-family: 新宋体;">（</span>2<span style="font-family: 新宋体;">）</span> <span style="font-family: 新宋体;">服务器端回应客户端的，这个报文同时带</span>ACK<span style="font-family: 新宋体;">标志和</span>SYN<span style="font-family: 新宋体;">标志。因此它表示对刚才客户端</span>SYN<span style="font-family: 新宋体;">报文的回应；同时又标志</span>SYN<span style="font-family: 新宋体;">给客户端，询问客户端是否准备好进行数据通讯。</span>

<span style="font-family: 新宋体;">（</span>3<span style="font-family: 新宋体;">）</span> <span style="font-family: 新宋体;">客户必须再次回应服务段一个</span>ACK<span style="font-family: 新宋体;">报文。</span>

### <span id="212">2.1.2 <span style="font-family: 新宋体;">五种状态</span></span>

<table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width: 141.5pt; border-width: 1pt 1pt 1.5pt; border-style: solid; border-color: #95b3d7; padding: 0cm 5.4pt;" valign="top" width="189">
      <p>
        <strong><span style="color: #365f91;">LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 381.3pt; border-top: solid #95B3D7 1.0pt; border-left: none; border-bottom: solid #95B3D7 1.5pt; border-right: solid #95B3D7 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="508">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #365F91;">侦听来自远方</span><span style="color: #365f91;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman";color: #365F91;">端口的连接请求；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 141.5pt; border-right: 1pt solid #95b3d7; border-bottom: 1pt solid #95b3d7; border-left: 1pt solid #95b3d7; border-top: none; background: #dbe5f1; padding: 0cm 5.4pt;" valign="top" width="189">
      <p>
        <strong><span style="color: #365f91;">SYN-SENT&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 381.3pt; border-top: none; border-left: none; border-bottom: solid #95B3D7 1.0pt; border-right: solid #95B3D7 1.0pt; background: #DBE5F1; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="508">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #365F91;">在发送连接请求后等待匹配的连接请求；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 141.5pt; border-right: 1pt solid #95b3d7; border-bottom: 1pt solid #95b3d7; border-left: 1pt solid #95b3d7; border-top: none; padding: 0cm 5.4pt;" valign="top" width="189">
      <p>
        <strong><span style="color: #365f91;">SYN-RECEIVED </span></strong>
      </p>
    </td>
    
    <td style="width: 381.3pt; border-top: none; border-left: none; border-bottom: solid #95B3D7 1.0pt; border-right: solid #95B3D7 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="508">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman";color: #365F91;">在收到和发送一个连接请求后等待对连接请求的确认</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 141.5pt; border-right: 1pt solid #95b3d7; border-bottom: 1pt solid #95b3d7; border-left: 1pt solid #95b3d7; border-top: none; background: #dbe5f1; padding: 0cm 5.4pt;" valign="top" width="189">
      <p>
        <strong><span style="color: #365f91;">ESTABLISHED&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 381.3pt; border-top: none; border-left: none; border-bottom: solid #95B3D7 1.0pt; border-right: solid #95B3D7 1.0pt; background: #DBE5F1; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="508">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #365F91;">代表一个打开的连接，数据可以传送给用户；</span>
      </p>
    </td>
  </tr>
  
  <tr style="height: 3.5pt;">
    <td style="width: 141.5pt; border-right: 1pt solid #95b3d7; border-bottom: 1pt solid #95b3d7; border-left: 1pt solid #95b3d7; border-top: none; padding: 0cm 5.4pt; height: 3.5pt;" valign="top" width="189">
      <p>
        <strong><span style="color: #365f91;">CLOSED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 381.3pt; border-top: none; border-left: none; border-bottom: solid #95B3D7 1.0pt; border-right: solid #95B3D7 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt; height: 3.5pt;" valign="top" width="508">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman";color: #365F91;">没有任何连接状态；</span>
      </p>
    </td>
  </tr>
</table>

&nbsp;

## <span id="22">2.2 <span style="font-family: 新宋体;">四次挥手</span></span>

### <span id="221">2.2.1 <span style="font-family: 新宋体;">文字说明</span></span>

<span style="font-family: 新宋体;">　（</span>1<span style="font-family: 新宋体;">）</span> TCP<span style="font-family: 新宋体;">客</span> <span style="font-family: 新宋体;">户端发送一个</span>FIN<span style="font-family: 新宋体;">，用来关闭客户到服务器的数据传送。</span>

<span style="font-family: 新宋体;">　（</span>2<span style="font-family: 新宋体;">）</span> <span style="font-family: 新宋体;">服务器收到这个</span>FIN<span style="font-family: 新宋体;">，它发回一个</span>ACK<span style="font-family: 新宋体;">，确认序号为收到的序号加</span>1<span style="font-family: 新宋体;">。和</span>SYN<span style="font-family: 新宋体;">一</span> <span style="font-family: 新宋体;">样，一个</span>FIN<span style="font-family: 新宋体;">将占用一个序号。</span>

<span style="font-family: 新宋体;">　（</span>3<span style="font-family: 新宋体;">）</span> <span style="font-family: 新宋体;">服务器关闭客户端的连接，发送一个</span>FIN<span style="font-family: 新宋体;">给客户端。</span>

<span style="font-family: 新宋体;">　（</span>4<span style="font-family: 新宋体;">）</span> <span style="font-family: 新宋体;">客户段发回</span>ACK<span style="font-family: 新宋体;">报文确认，并将确认序号设置为收到序号加</span>1<span style="font-family: 新宋体;">。</span>

### <span id="222">2.2.2 <span style="font-family: 新宋体;">一形态</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144536178-643617042.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />&nbsp;
</p>

### <span id="223">2.2.3 <span style="font-family: 新宋体;">在四次握手中的状态集</span></span>

<table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width: 134.45pt; border-width: 1pt 1pt 1.5pt; border-style: solid; border-color: #c2d69b; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">ESTABLISHED </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: solid #C2D69B 1.0pt; border-left: none; border-bottom: solid #C2D69B 1.5pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">代表一个打开的连接，数据可以传送给用户；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">FIN-WAIT1&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">等待远程</span><span style="color: #76923c;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman";color: #76923C;">的连接中断请求，或先前的连接中断请求的确认；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">FIN-WAIT2&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman";color: #76923C;">从远程</span><span style="color: #76923c;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">等待连接中断请求；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">CLOSE-WAIT&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">等待从本地用户发来的连接中断请求；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">CLOSING&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman";color: #76923C;">等待远程</span><span style="color: #76923c;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">对连接中断的确认；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">LAST-ACK&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">等待原来发向远程</span><span style="color: #76923c;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman";color: #76923C;">的连接中断请求的确认；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">TIME-WAIT&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman";color: #76923C;">等待足够的时间以确保远程</span><span style="color: #76923c;">TCP</span><span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">接收到连接中断请求的确认；</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 134.45pt; border-right: 1pt solid #c2d69b; border-bottom: 1pt solid #c2d69b; border-left: 1pt solid #c2d69b; border-top: none; background: #eaf1dd; padding: 0cm 5.4pt;" valign="top" width="179">
      <p>
        <strong><span style="color: #0d0d0d;">CLOSED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 388.35pt; border-top: none; border-left: none; border-bottom: solid #C2D69B 1.0pt; border-right: solid #C2D69B 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="518">
      <p>
        <span style="font-family: 新宋体; times new roman"4times new roman"; color: #76923C;">没有任何连接状态；</span>
      </p>
    </td>
  </tr>
</table>

### <span id="224_CLOSING">2.2.4 <span style="font-family: 新宋体;">第二种形态<span style="background: lime;">（</span></span><span style="background: lime;">CLOSING</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">）</span></span>

<p style="text-align: center;">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144556912-120110367.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />
</p>

## <span id="23">2.3 <span style="font-family: 新宋体;">十一种状态集</span></span>

<p style="text-align: center;">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20180122144639850-1415177562.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="TCP/IP 协议簇 端口 三次握手 四次挥手 11种状态集" alt="" />
</p>

## <span id="24_procsysnetipv4ip_local_port_range">2.4 <span style="font-family: 新宋体;">随机端口号范围</span><span style="background: lime;">(/proc/sys/net/ipv4/ip_local_port_range</span> <span style="font-family: 新宋体;">文件</span>)</span>

<div class="cnblogs_code">
  <pre>[root@clsn ~]<span style="color: #008000;">#</span><span style="color: #008000;"> cat /proc/sys/net/ipv4/ip_local_port_range</span>
32768   60999</pre>
</div>

## <span id="25_socketnbsp">2.5 socket&nbsp; <span style="font-family: 新宋体;">监听</span></span>

### <span id="251">2.5.1 <span style="font-family: 新宋体;">监听状态</span></span>

<div class="cnblogs_code">
  <pre>[root@clsn ~]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -lntup|grep sshd</span>
tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      1140/<span style="color: #000000;">sshd          
tcp        0      0 :::</span>22                       :::*                        LISTEN      1140/<span style="color: #000000;">sshd 
 
[root@clsn </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> netstat -an|grep ES</span>
tcp        0     64 10.0.0.201:22               10.0.0.1:3868               ESTABLISHED</pre>
</div>

### <span id="252_socket">2.5.2 socket <span style="font-family: 新宋体;">条目</span> <span style="font-family: 新宋体;">五元组概念</span></span>

1<span style="font-family: 新宋体;">、协议</span> tcp udp

2<span style="font-family: 新宋体;">、目标</span>ip<span style="font-family: 新宋体;">地址</span>

3<span style="font-family: 新宋体;">、目标主机端口号</span>

4<span style="font-family: 新宋体;">、源</span>ip<span style="font-family: 新宋体;">地址</span>

5<span style="font-family: 新宋体;">、源端口号</span>

## <span id="26_ssh">2.6 ssh<span style="font-family: 新宋体;">服务关闭</span> <span style="font-family: 新宋体;">为什么连接不断</span></span>

<div class="cnblogs_code">
  <pre>[root@clsn ~]<span style="color: #008000;">#</span><span style="color: #008000;"> ps -ef |grep sshd</span>
root       1140      1  0 Sep25 ?        00:00:00 /usr/sbin/<span style="color: #000000;">sshd
root       </span>5861   1140  0 11:40 ?        00:00:00 sshd: root@pts/<span style="color: #000000;">0
root       </span>5881   5863  0 11:40 pts/0    00:00:00 grep --color=<span style="color: #000000;">auto sshd
 
[root@clsn </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> /etc/init.d/sshd stop</span>
<span style="color: #000000;">Stopping sshd:                                             [  OK  ]
 
[root@clsn </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> ps -ef |grep sshd</span>
root       5861      1  0 11:40 ?        00:00:00 sshd: root@pts/<span style="color: #000000;">0
root       </span>5899   5863  0 11:41 pts/0    00:00:00 grep --color=auto sshd</pre>
</div>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">因为有一个连接的<span style="background: lime;">进程存在</span>。</span>
</p>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">没有进程就会断开。</span>
</p>

## <span id="27">2.7 <span style="font-family: 新宋体;">网络中的<span style="background: lime;">滑动窗口</span></span></span>

<span style="font-family: 新宋体;">原理：</span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  TCP<span style="font-family: 新宋体;">使用窗口机制进行流量控制。当连接建立后，发送方和接收方都要分配一块自己的缓冲区来存储接收的数据，为了防止就收方已经没有缓冲区进行接收而发送方在在继续发送，出现网络拥塞和故障。所以用滑动窗口进行了<span style="background: lime;">流控。</span></span>
</p>

<span style="font-family: 新宋体;">具体实现：</span>

<p style="margin-left: 18.0pt; text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">接收方将缓冲区剩余的尺寸和期待接收的下一个字节序号在确认信息中发送给发送方，发送方根据接收方剩余的大小空间来定量的发送合适的数据给接收方。它也是建立在&ldquo;<span style="color: red;">确认重传</span>&rdquo;的基础之上。</span>
</p>

## <span id="28">2.8 <span style="font-family: 新宋体;">网络中<span style="background: lime;">迷途</span>情况</span></span>

<p style="margin-left: 18.0pt;">
  <span style="font-family: 新宋体;">前一个连接没有及时到达，新的连接又产生。</span>
</p>

<div id="toc_container" class="toc_white have_bullets">
  <ul class="toc_list">
    <li>
      <a href="#1">第1章 概念介绍</a><ul>
        <li>
          <a href="#11_VLAN">1.1 VLAN</a><ul>
            <li>
              <a href="#111_VLAN">1.1.1 什么是VLAN</a>
            </li>
            <li>
              <a href="#112_VLAN">1.1.2 划分VLAN的目的</a>
            </li>
            <li>
              <a href="#113_vlan">1.1.3 vlan 配置</a><ul>
                <li>
                  <a href="#1131nbspvlan_20">1.1.3.1&nbsp;创建vlan 20</a>
                </li>
                <li>
                  <a href="#11311nbspnbspnbspnbspnbspnbsp_vlan_20">1.1.3.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入端口将端口分配到vlan 20</a>
                </li>
                <li>
                  <a href="#1132nbspvlan">1.1.3.2&nbsp;查看vlan的信息</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#12_DoD">1.2 DoD参考模型</a>
        </li>
        <li>
          <a href="#13_TCPIP">1.3 TCP/IP 协议簇</a><ul>
            <li>
              <a href="#131">1.3.1 组成</a>
            </li>
            <li>
              <a href="#132_tcpip">1.3.2 tcp/ip协议簇中相关协议</a>
            </li>
            <li>
              <a href="#133">1.3.3 协议名称与对应端口号</a>
            </li>
            <li>
              <a href="#134">1.3.4 端口号</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#14_TCP_UDP">1.4 TCP 与UDP</a><ul>
            <li>
              <a href="#141_TCPUDP">1.4.1 TCP与UDP 协议对比：</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#15_TCP">1.5 TCP报文的结构</a><ul>
            <li>
              <a href="#151_ACK">1.5.1 确认字段ACK</a>
            </li>
            <li>
              <a href="#152_SYN">1.5.2 请求连接字段 SYN</a>
            </li>
            <li>
              <a href="#153_FIN">1.5.3 断开连接字段FIN</a>
            </li>
            <li>
              <a href="#154_nbsp">1.5.4 序号&nbsp;</a>
            </li>
            <li>
              <a href="#155">1.5.5 确认号</a><ul>
                <li>
                  <a href="#1551nbsp_nbspnbsp">1.5.5.1&nbsp;序号与确认号 &nbsp;&nbsp;</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#2">第2章 三次握手与四次挥手</a><ul>
        <li>
          <a href="#21">2.1 三次握手</a><ul>
            <li>
              <a href="#211">2.1.1 含义</a>
            </li>
            <li>
              <a href="#212">2.1.2 五种状态</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#22">2.2 四次挥手</a><ul>
            <li>
              <a href="#221">2.2.1 文字说明</a>
            </li>
            <li>
              <a href="#222">2.2.2 一形态</a>
            </li>
            <li>
              <a href="#223">2.2.3 在四次握手中的状态集</a>
            </li>
            <li>
              <a href="#224_CLOSING">2.2.4 第二种形态（CLOSING）</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#23">2.3 十一种状态集</a>
        </li>
        <li>
          <a href="#24_procsysnetipv4ip_local_port_range">2.4 随机端口号范围(/proc/sys/net/ipv4/ip_local_port_range 文件)</a>
        </li>
        <li>
          <a href="#25_socketnbsp">2.5 socket&nbsp; 监听</a><ul>
            <li>
              <a href="#251">2.5.1 监听状态</a>
            </li>
            <li>
              <a href="#252_socket">2.5.2 socket 条目 五元组概念</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#26_ssh">2.6 ssh服务关闭 为什么连接不断</a>
        </li>
        <li>
          <a href="#27">2.7 网络中的滑动窗口</a>
        </li>
        <li>
          <a href="#28">2.8 网络中迷途情况</a>
        </li>
      </ul>
    </li>
  </ul>
</div>