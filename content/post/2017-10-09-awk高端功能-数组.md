---
title: AWK高端功能-数组
author: 惨绿少年
type: post
date: 2017-10-08T18:15:00+00:00
url: /clsn/lx959.html
Baidusubmit:
  - 1
views:
  - 150
specs_zan:
  - 1
zm_favorites:
  - 1
categories:
  - Linux运维
  - Shell编程
  - 玩转Linux
  - 运维基本功

---
# <span id="1_awk">第1章 awk<span style="font-family: 新宋体;">命令基础</span></span>

## <span id="11_awk">1.1 awk<span style="font-family: 新宋体;">命令执行过程</span></span>

<div class="cnblogs_code">
  <pre>1<span style="color: #000000;">、如果BEGIN 区块存在，awk执行它指定的动作。
</span>2<span style="color: #000000;">、awk从输入文件中读取一行，称为一条输入记录。如果输入文件省略，将从标准输入读取
</span>3、awk将读入的记录分割成字段，将第1个字段放入变量$1中，第2个字段放入$2<span style="color: #000000;">，以此类推。$0表示整条记录。字段分隔符使用shell环境变量FS或由参数指定。
</span>4<span style="color: #000000;">、把当前输入记录(数据行)依次与每一个awk命令中awk条件比较，看是否匹配，如果相匹配，就执行对应的动作。如果不匹配，就跳过对应的动作，直到比较完所有的awk命令。
</span>5<span style="color: #000000;">、当一条输入记录比较了所有的awk命令后，awk读取输入的下一行，继续重复步骤3和4，这个过程一直持续，直到awk读取到文件尾。
</span>6、当awk读完所有的输入行后，如果存在END，就执行相应的动作。</pre>
</div>

## <span id="12_awk">1.2 awk<span style="font-family: 新宋体;">中模式与动作</span></span>

<p style="text-indent: 21.0pt;">
  &nbsp;<span class="cnblogs_code"><span style="color: #800000;">'</span><span style="color: #800000;">pattern{action}</span><span style="color: #800000;">'</span></span>&nbsp;
</p>

### <span id="121_awk">1.2.1 <span style="font-family: 新宋体;">在</span>awk<span style="font-family: 新宋体;">眼中的<span style="background: lime;">行</span>与<span style="background: yellow;">列</span></span></span>

<div class="cnblogs_code">
  <pre><span style="color: #000000;">field     字段，列
record    记录，行</span></pre>
</div>

## <span id="13_awkldquordquo">1.3 awk<span style="font-family: 新宋体;">默认有一把&ldquo;菜刀&rdquo;</span></span>

<p style="margin-left: 42.0pt; text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">空格系列</span> <span style="font-family: 新宋体;">（单独的空格，连续的空格，</span>tab<span style="font-family: 新宋体;">键）</span>
</p>

<span style="background: lime;">&nbsp;-F &nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: 新宋体;">指定分隔符</span>&nbsp;

<span style="background: lime;">&nbsp;-vFS </span>

<span style="background: lime;">&nbsp;FS &nbsp;</span>== field sep&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family: 新宋体;">每一列的分隔符</span>

<span style="background: lime;">&nbsp;OFS </span>==output field sep&nbsp; <span style="font-family: 新宋体;">输出每一列的时候使用的分隔符</span>

## <span id="14_awk">1.4 awk<span style="font-family: 新宋体;">的内置变量</span></span>

<table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width: 84.8pt; border-top: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-right: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="font-family: 新宋体; times new roman"4times new roman"; color: white;">变量</span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: solid white 1.0pt; border-left: none; border-bottom: solid white 1.0pt; border-right: none; background: #9BBB59; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        <strong><span style="font-family: 新宋体; times new roman"4times new roman"; color: white;">含义</span></strong>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: 1pt solid white; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="244">
      <p>
        <strong><span style="font-family: 新宋体; times new roman"4times new roman"; color: white;">英文全写</span></strong>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">FS&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">每一列的分隔符</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      <p>
        field sep&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">NF&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">每一行有多少列</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      <p>
        number&nbsp; of field
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">OFS&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">输出每一列的时候使用的分隔符</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      <p>
        output field sep
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">NR&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">记录号</span> <span style="font-family: 新宋体;">行号</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      <p>
        number of record
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">RS&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">每一行的分隔符（每一行的结束标记）</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      &nbsp;
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">$</span></strong><strong><span style="font-family: 新宋体; background: lime;">数字</span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">取某一列</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #EAF1DD; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      &nbsp;
    </td>
  </tr>
  
  <tr>
    <td style="width: 84.8pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #9bbb59; padding: 0cm 5.4pt;" valign="top" width="113">
      <p>
        <strong><span style="background: lime;">$0&nbsp;&nbsp; </span></strong>
      </p>
    </td>
    
    <td style="width: 9.0cm; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="340">
      <p>
        &nbsp;<span style="font-family: 新宋体;">取出这一行</span>
      </p>
    </td>
    
    <td style="width: 182.85pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #D6E3BC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="244">
      &nbsp;
    </td>
  </tr>
</table>

### <span id="141_NF">1.4.1 $NF<span style="font-family: 新宋体;">的使用</span></span>

<p style="margin-left: 21.0pt;">
  $NF <span style="font-family: 新宋体;">表示最后一列，</span>(NF-1)<span style="font-family: 新宋体;">表示倒数第二列，以此类推。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F: '{print NF}' passwd.txt</span>
7
7<span style="color: #000000;">
&hellip;&hellip;
[root@znix </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F: '{print $NF}' passwd.txt</span>
/bin/<span style="color: #000000;">bash
</span>/sbin/<span style="color: #000000;">nologin
</span>/sbin/<span style="color: #000000;">nologin
[root@znix </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F: '{print $(NF-1)}' passwd.txt</span>
/<span style="color: #000000;">root
</span>/<span style="color: #000000;">bin
</span>/sbin</pre>
</div>

## <span id="15_awk">1.5 <span style="font-family: 新宋体;">【<span style="background: aqua;">练习题</span>】</span>awk<span style="font-family: 新宋体;">如何使用正则？</span></span>

> 1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示Xiaoyu的姓氏和ID号码
> 
> 2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示所有ID号码最后一位数字是1或5的人的全名
> 
> 3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;姓氏是Zhang的人，显示他的第二次捐款金额及她的名字
> 
> 4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;显示Xiaoyu的捐款.每个值时都有以$开头.如$520$200$135

### <span id="151">1.5.1 <span style="font-family: 新宋体;">环境准备</span></span>

<div class="cnblogs_code">
  <pre>mkdir -p /server/files/<span style="color: #000000;">
cat </span>>>/server/files/reg.txt&lt;&lt;<span style="color: #000000;">EOF
Zhang Dandan    </span>41117397   :250:100:175<span style="color: #000000;">
Zhang Xiaoyu    </span>390320151  :155:90:201<span style="color: #000000;">
Meng  Feixue    </span>80042789   :250:60:50<span style="color: #000000;">
Wu    Waiwai    </span>70271111   :250:80:75<span style="color: #000000;">
Liu   Bingbing  </span>41117483   :250:100:175<span style="color: #000000;">
Wang  Xiaoai    </span>3515064655 :50:95:135<span style="color: #000000;">
Zi    Gege      </span>1986787350 :250:168:200<span style="color: #000000;">
Li    Youjiu    </span>918391635  :175:75:300<span style="color: #000000;">
Lao   Nanhai    </span>918391635  :250:100:175<span style="color: #000000;">
EOF</span></pre>
</div>

#### <span id="1511nbsp">1.5.1.1&nbsp;<span style="font-family: 新宋体;">内容释义：</span></span>

<div style="border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; background: #F2F2F2;">
  <p>
    <span style="font-family: 新宋体;">第一列是姓氏</span>
  </p>
  
  <p>
    <span style="font-family: 新宋体;">第二列是名字</span>
  </p>
  
  <p>
    <span style="font-family: 新宋体;">第一第二列合起来就是姓名</span>
  </p>
  
  <p>
    <span style="font-family: 新宋体;">第三列是对应的</span>ID<span style="font-family: 新宋体;">号码</span>
  </p>
  
  <p>
    <span style="font-family: 新宋体;">最后三列是三次捐款数量</span>
  </p>
</div>

### <span id="152_X">1.5.2 <span style="font-family: 新宋体;">显示出第二列中包含</span>X <span style="font-family: 新宋体;">的。</span></span>

<p style="margin-left: 21.0pt;">
  <span style="background: aqua;">$2</span><span style="background: lime;">~</span><span style="font-family: 新宋体;">表示第二列所有的内容。</span> <span style="background: lime;">~</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">表示所有</span>
</p>

<p style="margin-left: 21.0pt;">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体; times new roman"4times new roman"; background: lime;">在这里</span><span style="background: lime;">X</span><span style="font-family: 新宋体; times new roman"4times new roman"; background: lime;">比较特殊，是大写的，</span><span style="background: lime;">awk</span><span style="font-family: 新宋体; times new roman"4times new roman"; background: lime;">中区分大小写。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '$2~/X/' reg.txt</span>
Zhang Xiaoyu    390320151  :155:90:201<span style="color: #000000;">
Wang  Xiaoai    </span>3515064655 :50:95:135</pre>
</div>

### <span id="153_XiaoyuID">1.5.3 <span style="font-family: 新宋体;">显示</span>Xiaoyu<span style="font-family: 新宋体;">的姓氏和</span>ID<span style="font-family: 新宋体;">号码</span></span>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '$2~/Xiaoyu/{print $1,$3}' reg.txt</span>
Zhang 390320151</pre>
</div>

### <span id="154_ID15">1.5.4 <span style="font-family: 新宋体;">显示所有</span>ID<span style="font-family: 新宋体;">号码最后一位数字是</span>1<span style="font-family: 新宋体;">或</span>5<span style="font-family: 新宋体;">的人的全名</span></span>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '$3~/(1|5)$/{print $1,$2}' reg.txt</span>
<span style="color: #000000;">
[root@znix files]</span><span style="color: #008000;">#</span><span style="color: #008000;"> awk '$3~/[15]$/{print $1,$2}' reg.txt</span>
<span style="color: #000000;">Zhang Xiaoyu
Wu Waiwai
Wang Xiaoai
Li Youjiu
Lao Nanhai</span></pre>
</div>

### <span id="155_Zhang">1.5.5 <span style="font-family: 新宋体;">姓氏是</span>Zhang<span style="font-family: 新宋体;">的人，显示他的第二次捐款金额及她的名字</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">先找到，再进行输出。</span><span style="background: lime;">(NF-1)</span> <span style="font-family: 新宋体;">表示倒数第二列。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F "[ :]+" '$1~/Zhang/{print $2,$(NF-1)}' reg.txt</span>
Dandan 100<span style="color: #000000;">
Xiaoyu </span>90</pre>
</div>

### <span id="156_Xiaoyu520200135">1.5.6 <span style="font-family: 新宋体;">显示</span>Xiaoyu<span style="font-family: 新宋体;">的捐款</span>.<span style="font-family: 新宋体;">每个值时都有以</span>$<span style="font-family: 新宋体;">开头</span>.<span style="font-family: 新宋体;">如</span>$520$200$135</span>

<p style="margin-left: 21.0pt;">
  tr <span style="font-family: 新宋体;">命令进行替换，格式比较简单</span><span style="background: lime;">tr &nbsp;"</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">要替换什么</span><span style="background: lime;">" "</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">替换成什么</span><span style="background: lime;">"</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '$2~/Xiaoyu/{print $4}' reg.txt |tr ":" "$"</span>
$155$90$201<span style="color: #000000;">
[root@znix files]</span><span style="color: #008000;">#</span><span style="color: #008000;"> awk '$2~/Xiaoyu/{gsub(/:/,"$",$NF);print $NF}' reg.txt</span>
$155$90$201</pre>
</div>

## <span id="16_awk0">1.6 awk<span style="font-family: 新宋体;">中的</span>$0<span style="font-family: 新宋体;">是什么鬼？</span></span>

<p style="text-indent: 21.0pt;">
  <span style="background: lime;">$0</span><span style="font-family: 新宋体; times new roman"4times new roman"; background: lime;">表示文件中</span><span style="font-family: 新宋体; background: lime;">整条记录（</span><span style="font-family: 新宋体; background: yellow;">行</span><span style="font-family: 新宋体; background: lime;">）</span><span style="font-family: 新宋体; times new roman"4times new roman";background: lime;">的内容</span><span style="font-family: 新宋体;">，在这里加</span>$0 <span style="font-family: 新宋体;">与不加</span>$0 <span style="font-family: 新宋体;">相同。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/Zhang/' reg.txt</span>
Zhang Dandan    41117397   :250:100:175<span style="color: #000000;">
Zhang Xiaoyu    </span>390320151  :155:90:201<span style="color: #000000;">
[root@znix files]</span><span style="color: #008000;">#</span><span style="color: #008000;"> awk '$0~/Zhang/' reg.txt</span>
Zhang Dandan    41117397   :250:100:175<span style="color: #000000;">
Zhang Xiaoyu    </span>390320151  :155:90:201</pre>
</div>

## <span id="17_awk">1.7 awk<span style="font-family: 新宋体;">中的<span style="background: aqua;">替换</span></span></span>

<p style="margin-left: 18.0pt;">
  <span style="font-family: 新宋体;">在</span>awk<span style="font-family: 新宋体;">中，可以用来替换的有三个函数：</span>sub <span style="background: yellow;">gsub gensub</span>
</p>

### <span id="171_gusb"><a name="_gusb_函数"></a>1.7.1 <span style="font-family: 新宋体;">使用</span>gusb <span style="font-family: 新宋体;">函数进行替换</span></span>

<p style="margin-left: 21.0pt;">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gsub(r, s [, t])&nbsp;
</p>

> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;r&nbsp; /找谁/
> 
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s &nbsp;"替换成什么"
> 
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]&nbsp;替换那个部分的
> 
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;表示为：&nbsp;gsub(/找谁/,"替换成什么",替换那个部分的)

### <span id="172">1.7.2 <span style="font-family: 新宋体;">替换文本中的内容</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">题目：显示</span>Xiaoyu<span style="font-family: 新宋体;">的捐款</span>.<span style="font-family: 新宋体;">每个值时都有以</span>$<span style="font-family: 新宋体;">开头</span>.<span style="font-family: 新宋体;">如</span>$520$200$135
</p>

<p style="text-indent: 21.0pt;">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">中间使用分号分割</span> <span style="background: yellow;">;</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '{gsub(/:/,"$",$NF);print $0}' reg.txt</span>
Zhang Dandan 41117397 $250$100$175<span style="color: #000000;">
Zhang Xiaoyu </span>390320151 $155$90$201<span style="color: #000000;">
Meng Feixue </span>80042789 $250$60$50<span style="color: #000000;">
Wu Waiwai </span>70271111 $250$80$75<span style="color: #000000;">
Liu Bingbing </span>41117483 $250$100$175<span style="color: #000000;">
Wang Xiaoai </span>3515064655 $50$95$135<span style="color: #000000;">
Zi Gege </span>1986787350 $250$168$200<span style="color: #000000;">
Li Youjiu </span>918391635 $175$75$300<span style="color: #000000;">
Lao Nanhai </span>918391635 $250$100$175</pre>
</div>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">添加上限定条件后，取到的结果会更加的精确。</span>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '$2~/Xiaoyu/{gsub(/:/,"$",$NF);print $NF}' reg.txt</span>
$155$90$201</pre>
</div>

## <span id="18_shellshellshellsbinnologin">1.8 <span style="font-family: 新宋体;">【<span style="background: aqua;">练习题</span>】判断当前系统上所有用户的</span>shell<span style="font-family: 新宋体;">是否为可登录</span>shell<span style="font-family: 新宋体;">（即用户的</span>shell<span style="font-family: 新宋体;">不是</span>/sbin/nologin<span style="font-family: 新宋体;">）</span>,<span style="font-family: 新宋体;">如果是显示用户名字</span></span>

<p style="margin-left: 18.0pt; text-indent: 3.0pt;">
  <span style="font-family: 新宋体; times new roman"4times new roman";color: red;">不包含：<strong>！</strong></span><strong><span style="font-family: 新宋体;">，在</span>awk</strong><strong><span style="font-family: 新宋体;">中不包含可以使用</span></strong><strong><span style="font-family: 新宋体; times new roman"4times new roman";color: red;">！</span> </strong><strong><span style="font-family: 新宋体;">表示。</span></strong>
</p>

<p style="margin-left: 18.0pt; text-indent: 3.0pt;">
  <span style="color: red;">$NF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&nbsp;<span style="font-family: 新宋体;">表示这个文件的最后一列</span>
</p>

<p style="margin-left: 18.0pt; text-indent: 3.0pt;">
  <span style="color: red;">-F&nbsp;&nbsp; </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<span style="font-family: 新宋体;">将分隔符指定为：</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F: '$NF!~/nologin$/{print $1}' /etc/passwd</span>
<span style="color: #000000;">root
sync
shutdown
halt
clsn
oldgirl
test
stu01
stu02
stu03
znix</span></pre>
</div>

### <span id="181_--column">1.8.1 <span style="font-family: 新宋体;">【<span style="background: aqua;">对齐</span>】输出的结果更美观整齐</span>--column<span style="font-family: 新宋体;">命令</span></span>

<p style="margin-left: 21.0pt;">
  <span style="background: lime;">-t</span>&nbsp; -t<span style="font-family: 新宋体;">参数让他对齐。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk 'BEGIN{print "姓","名"}{print $1,$2}' reg.txt |column -t</span>
<span style="color: #000000;">姓     名
Zhang  Dandan
Zhang  Xiaoyu
Meng   Feixue
Wu     Waiwai
Liu    Bingbing
Wang   Xiaoai
Zi     Gege
Li     Youjiu
Lao    Nanhai</span></pre>
</div>

# <span id="2_awkBEGIN_END">第2章 awk<span style="font-family: 新宋体;">中</span>BEGIN <span style="font-family: 新宋体;">和</span> END</span>

## <span id="21">2.1 <span style="font-family: 新宋体;">怎么把正则表达式作为条件</span></span>

<span style="background: lime;">BEGIN</span><span style="font-family: 新宋体;">：开始</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">里面的内容会在</span>awk<span style="font-family: 新宋体;">读取文件之前运行</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">在</span>BEGIN<span style="font-family: 新宋体;">里面定义</span>awk<span style="font-family: 新宋体;">的内置变量</span>

<span style="background: lime;">END </span>

<span style="background: lime;">END{}</span> <span style="font-family: 新宋体;">里面放入内容，在读取完文件内容后执行</span>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">先计算，在</span>END<span style="font-family: 新宋体;">里面输出结果</span>&nbsp;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: 新宋体;">先计算再输出</span>

### <span id="211_ldquordquo">2.1.1 <span style="font-family: 新宋体;">【<span style="background: aqua;">一个栗子</span>】执行完输出后，再输出一个&ldquo;结束&rdquo;</span></span>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '{print $0}END{print "结束"}' reg.txt</span>
Zhang Dandan    41117397   :250:100:175<span style="color: #000000;">
Zhang Xiaoyu    </span>390320151  :155:90:201<span style="color: #000000;">
Meng  Feixue    </span>80042789   :250:60:50<span style="color: #000000;">
Wu    Waiwai    </span>70271111   :250:80:75<span style="color: #000000;">
Liu   Bingbing  </span>41117483   :250:100:175<span style="color: #000000;">
Wang  Xiaoai    </span>3515064655 :50:95:135<span style="color: #000000;">
Zi    Gege      </span>1986787350 :250:168:200<span style="color: #000000;">
Li    Youjiu    </span>918391635  :175:75:300<span style="color: #000000;">
Lao   Nanhai    </span>918391635  :250:100:175<span style="color: #000000;">
结束</span></pre>
</div>

## <span id="22_etcservices">2.2 <span style="font-family: 新宋体;">【<span style="background: aqua;">企业案例</span>】统计</span>/etc/services<span style="font-family: 新宋体;">文件里面的空行数量</span></span>

### <span id="221_awkEND">2.2.1 <span style="font-family: 新宋体;">使用</span>awk<span style="font-family: 新宋体;">的</span>END<span style="font-family: 新宋体;">模式</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">前面的</span>i++<span style="font-family: 新宋体;">先进行计算，再输出结果。</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="background: yellow;">i=i+1</span> <span style="font-family: 新宋体;">与</span><span style="background: yellow;">i++</span>&nbsp;<span style="font-family: 新宋体;">相同。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/^$/{i=i+1}END{print i}' /etc/services</span>
16<span style="color: #000000;">
[root@znix </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/^$/{i++}END{print i}' /etc/services</span>
16</pre>
</div>

### <span id="222_i">2.2.2 <span style="font-family: 新宋体;">查看</span>i++<span style="font-family: 新宋体;">的执行过程</span></span>

<p style="margin-left: 21.0pt;">
  i++<span style="font-family: 新宋体;">与</span>i=i+1<span style="font-family: 新宋体;">相同。</span>
</p>

<p style="margin-left: 21.0pt;">
  i=i+$0&nbsp; <span style="font-family: 新宋体;">累计相加</span>&nbsp;<span style="font-family: 新宋体;">计算总和</span>
</p>

<p style="margin-left: 21.0pt;">
  i=i+1&nbsp; i++&nbsp;&nbsp; <span style="font-family: 新宋体;">计数</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/^$/{i++;print i}' /etc/services</span>
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre>
</div>

### <span id="223">2.2.3 <span style="font-family: 新宋体;">其他方法：</span></span>

<p style="margin-left: 21.0pt;">
  <span style="background: lime;">uniq -c</span> &nbsp;<span style="background: lime;">uniq </span><span style="font-family: 新宋体;">命令把相邻两行一样的合并，</span><span style="background: lime;">-c</span><span style="font-family: 新宋体;">为统计出现的次数</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/^$/' /etc/services|uniq -c</span>
   16<span style="color: #000000;">
[root@znix </span>~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/^$/' /etc/services|wc -l</span>
16</pre>
</div>

## <span id="23_seq_100_numtxt">2.3 <span style="font-family: 新宋体;">【<span style="background: aqua;">案例</span>】</span>seq 100 >num.txt <span style="font-family: 新宋体;">，计算这个文件每一行相加的结果</span></span>

i=i+$0&nbsp; <span style="font-family: 新宋体;">累计相加</span>&nbsp;<span style="font-family: 新宋体;">计算总和</span>

i=i+1&nbsp; i++&nbsp;&nbsp; <span style="font-family: 新宋体;">计数</span>

<p style="line-height: 19.2pt;">
  <span style="font-size: 10.5pt; font-family: 宋体;">没有赋初始值的时候</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif;"><br /> i++ </span><span style="font-size: 10.5pt; font-family: 宋体;">先返回</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif;">0,</span><span style="font-size: 10.5pt; font-family: 宋体;">再加</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif;">1,</span><span style="font-size: 10.5pt; font-family: 宋体;">第二次调用的时候先返回</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif;">1,</span><span style="font-size: 10.5pt; font-family: 宋体;">再加</span><span style="font-size: 10.5pt; font-family: Verdana, sans-serif;">1,</span><span style="font-size: 10.5pt; font-family: 宋体;">以此类推</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '{i=i+$0}END{print i}' num.txt</span>
5050</pre>
</div>

# <span id="3_awk">第3章 awk<span style="font-family: 新宋体;">数组</span></span>

## <span id="31">3.1 <span style="font-family: 新宋体;">数组是用来做什么的？</span></span>

<p style="text-indent: 18.0pt;">
  <span style="font-family: 新宋体;">分类计算，用于统计。</span>
</p>

### <span id="311">3.1.1 <span style="font-family: 新宋体;">他能够干些什么？</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">统计日志文件中</span> <span style="font-family: 新宋体;">图片</span>.jpg <span style="font-family: 新宋体;">出现了多少次</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">统计日志文件中</span> <span style="font-family: 新宋体;">图片</span>.png <span style="font-family: 新宋体;">出现了多少次</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="font-family: 新宋体;">统计更累的信息</span>
</p>

## <span id="32">3.2 <span style="font-family: 新宋体;">数组详解</span>---"<span style="font-family: 新宋体;">酒店</span>"</span>

<span style="font-family: 新宋体;">假设我们有一个酒店</span>

<div class="cnblogs_code">
  <pre>酒店&lt;===><span style="color: #000000;">hotel
酒店里面有几个房间110,</span>119,120,114<span style="color: #000000;">,401这几个房间。
酒店的110房间</span>&lt;===> hotel[110<span style="color: #000000;">]
酒店的119房间</span>&lt;===> hotel[119<span style="color: #000000;">]
酒店的120房间</span>&lt;===> hotel[121]</pre>
</div>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体;">酒店房间里面入住客人</span>
</p>

### <span id="321">3.2.1 <span style="font-family: 新宋体;">如何查看房间里住的是哪位客人？</span></span>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk 'BEGIN{hotel[110]="lidao" ;hotel[119]="tanjiaoshou";hotel[121]="taojin";print hotel[110],hotel[121],hotel[119]}'</span>
lidao taojin tanjiaoshou</pre>
</div>

### <span id="322_for">3.2.2 <span style="font-family: 新宋体;">使用</span>for<span style="font-family: 新宋体;">语句，对酒店进行循环</span>/<span style="font-family: 新宋体;">查房</span></span>

<div class="cnblogs_code">
  <pre>awk <span style="color: #800000;">'</span><span style="color: #800000;">BEGIN{hotel[110]="lidao" ;hotel[119]="tanjiaoshou";hotel[121]="taojin";</span>
<span style="color: #0000ff;">for</span>(pol <span style="color: #0000ff;">in</span><span style="color: #000000;"> hotel) 
</span><span style="color: #0000ff;">print</span><span style="color: #000000;"> pol,hotel[pol]
}</span><span style="color: #800000;">'</span></pre>
</div>

<p style="text-indent: 21.0pt;">
  <span style="font-family: 新宋体; times new roman"4times new roman"; background: darkcyan;">格式</span><span style="font-family: 新宋体;">：</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  for(<span style="font-family: 新宋体;">变量</span> in <span style="font-family: 新宋体;">数组</span>)&nbsp; <span style="font-family: 新宋体;">使用变量对酒店进行循环</span>/<span style="font-family: 新宋体;">查房</span>
</p>

<span style="color: #00b050;">print pol,hotel[pol] </span><span style="font-family: 新宋体; times new roman"4times new roman";color: #00B050;">：</span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="color: #244061;">pol &nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span style="font-family: 新宋体;">得到</span>-<span style="font-family: 新宋体;">房间的号码</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="color: #244061;">hotel[pol]</span>&nbsp;<span style="font-family: 新宋体;">哪个酒店的哪个房间</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix files]<span style="color: #008000;">#</span><span style="color: #008000;"> awk 'BEGIN{hotel[110]="lidao" ;hotel[119]="tanjiaoshou";hotel[121]="taojin"</span>
> <span style="color: #0000ff;">for</span>(pol <span style="color: #0000ff;">in</span><span style="color: #000000;"> hotel)
</span>> <span style="color: #0000ff;">print</span><span style="color: #000000;"> pol,hotel[pol]
</span>> }<span style="color: #800000;">'
</span>110<span style="color: #000000;"> lidao
</span>121<span style="color: #000000;"> taojin
</span>119 tanjiaoshou</pre>
</div>

## <span id="33_sohu">3.3 <span style="font-family: 新宋体;">【<span style="background: aqua;">企业面试题</span>】统计域名访问次数（去重统计）。处理以下文件内容</span>,<span style="font-family: 新宋体;">将域名取出并根据域名进行计数排序处理</span><img src="/wp-content/themes/clsn-003/img/smilies/icon_sad.gif" alt=":(" class="wp-smiley" style="height: 1em; max-height: 1em;" /><span style="font-family: 新宋体;">百度和</span>sohu<span style="font-family: 新宋体;">面试题</span>)</span>

<div class="cnblogs_code">
  <pre>http://www.nmtui.com/<span style="color: #000000;">index.html
http:</span>//www.nmtui.com/1<span style="color: #000000;">.html
http:</span>//post.nmtui.com/<span style="color: #000000;">index.html
http:</span>//mp3.nmtui.com/<span style="color: #000000;">index.html
http:</span>//www.nmtui.com/3<span style="color: #000000;">.html
http:</span>//post.nmtui.com/2.html</pre>
</div>

### <span id="331_sort_uniq">3.3.1 <span style="font-family: 新宋体;">方法一：</span>sort uniq</span>

<p style="text-indent: 21.0pt;">
  <span style="background: lime;">uniq</span> <span style="font-family: 新宋体;">命令</span> <span style="font-family: 新宋体;">把相邻两行一样的合并</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F '[/]+' '{print $2}' www.txt |uniq -c</span>
      2<span style="color: #000000;"> www.nmtui.com
      </span>1<span style="color: #000000;"> post.nmtui.com
      </span>1<span style="color: #000000;"> mp3.nmtui.com
      </span>1 www.nmtui.com</pre>
</div>

<p style="text-indent: 21.0pt;">
  <span style="background: lime;">sort</span> <span style="font-family: 新宋体;">排序，默认是按照字母的顺序</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F '[/]+' '{print $2}' www.txt |sort</span>
<span style="color: #000000;">mp3.nmtui.com
post.nmtui.com
www.nmtui.com
www.nmtui.com
www.nmtui.com</span></pre>
</div>

### <span id="332_2_awk">3.3.2 <span style="font-family: 新宋体;">方法</span>2 awk<span style="font-family: 新宋体;">数组</span></span>

#### <span id="3321nbsp">3.3.2.1&nbsp;<span style="font-family: 新宋体;">第一步</span> <span style="font-family: 新宋体;">取出域名</span></span>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F '[/]+' '{print $2}' www.txt</span>
<span style="color: #000000;">www.nmtui.com
www.nmtui.com
post.nmtui.com
mp3.nmtui.com
www.nmtui.com</span></pre>
</div>

#### <span id="3322nbsp">3.3.2.2&nbsp;<span style="font-family: 新宋体;">第二步</span> <span style="font-family: 新宋体;">显示</span></span>

<p style="margin-left: 21.0pt;">
  <span style="background: aqua;">;</span>&nbsp;<span style="font-family: 新宋体; times new roman"4times new roman"; background: aqua;">两条命令之间用分号分割。</span>
</p>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F '/+' '{hotel[$2]++;print hotel["www.nmtui.com"]}' www.txt</span>
1
2
2
2
3</pre>
</div>

#### <span id="3323nbsp">3.3.2.3&nbsp;<span style="font-family: 新宋体;">第三步</span> <span style="font-family: 新宋体;">显示结果</span></span>

<div class="cnblogs_code">
  <pre>[root@znix ~]<span style="color: #008000;">#</span><span style="color: #008000;"> awk -F '/+' '{hotel[$2]++}END{for(pol in hotel)print pol,hotel[pol]}' www.txt</span>
mp3.nmtui.com 1<span style="color: #000000;">
post.nmtui.com </span>1<span style="color: #000000;">
www.nmtui.com </span>3</pre>
</div>

# <span id="4">第4章 <span style="font-family: 新宋体; times new roman"4times new roman";background: aqua;">课后题目</span><span style="font-family: 新宋体;">：</span></span>

<p style="text-indent: 18.0pt;">
  <span style="font-family: 新宋体;">两个文件</span>&nbsp; secure.zip &nbsp;access.zip
</p>

## <span id="41_secureip">4.1 <span style="font-family: 新宋体;">统计</span>secure<span style="font-family: 新宋体;">文件中谁在破解你的密码（统计出破解你密码的</span>ip<span style="font-family: 新宋体;">地址出现的次数）</span></span>

### <span id="411">4.1.1 <span style="font-family: 新宋体;">方法一</span></span>

<div class="cnblogs_code">
  <pre>[root@znix test]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/Failed/{fa[$(NF-3)]++}END{for(pol in fa)print pol,fa[pol]}' secure-20161219|column -t</span>
218.65.30.126    17163
218.65.30.61     17163
125.16.71.175    4
169.46.38.74     9
183.136.238.78   30
218.2.0.16       10
122.228.238.66   1<span style="color: #000000;">
&hellip;&hellip;</span></pre>
</div>

### <span id="412">4.1.2 <span style="font-family: 新宋体;">方法二</span></span>

<div class="cnblogs_code">
  <pre>[root@znix test]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/Failed/{print $(NF-3)}' secure-20161219 |sort|uniq -c|sort -n  </span></pre>
</div>

### <span id="413">4.1.3 <span style="font-family: 新宋体;">结果统计</span></span>

<div class="cnblogs_code">
  <pre>[root@znix test]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '/Failed/{fa[$(NF-3)]++}END{for(pol in fa)print pol,fa[pol]}' secure-20161219|column -t|wc -l</span>
88</pre>
</div>

## <span id="42_accesslogip">4.2 <span style="font-family: 新宋体;">统计</span>access.log<span style="font-family: 新宋体;">文件中对</span>ip<span style="font-family: 新宋体;">地址去重并统计重复数</span></span>

<div class="cnblogs_code">
  <pre>[root@znix test]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '{hotel[$1]++}END{for(pol in hotel)print pol,hotel[pol]}' access.log |head -3</span>
101.226.125.115 284
180.154.137.177 516
101.226.125.116 127</pre>
</div>

## <span id="43_accesslog">4.3 <span style="font-family: 新宋体;">统计</span>access.log<span style="font-family: 新宋体;">文件中网站一共使用了多少流量</span></span>

<div class="cnblogs_code">
  <pre>[root@znix test]<span style="color: #008000;">#</span><span style="color: #008000;"> awk '{i=i+$10}END{print i}' access.log</span>
2478496663</pre>
</div>

<div id="toc_container" class="toc_white have_bullets">
  <ul class="toc_list">
    <li>
      <a href="#1_awk">第1章 awk命令基础</a><ul>
        <li>
          <a href="#11_awk">1.1 awk命令执行过程</a>
        </li>
        <li>
          <a href="#12_awk">1.2 awk中模式与动作</a><ul>
            <li>
              <a href="#121_awk">1.2.1 在awk眼中的行与列</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#13_awkldquordquo">1.3 awk默认有一把&ldquo;菜刀&rdquo;</a>
        </li>
        <li>
          <a href="#14_awk">1.4 awk的内置变量</a><ul>
            <li>
              <a href="#141_NF">1.4.1 $NF的使用</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#15_awk">1.5 【练习题】awk如何使用正则？</a><ul>
            <li>
              <a href="#151">1.5.1 环境准备</a><ul>
                <li>
                  <a href="#1511nbsp">1.5.1.1&nbsp;内容释义：</a>
                </li>
              </ul>
            </li>
            
            <li>
              <a href="#152_X">1.5.2 显示出第二列中包含X 的。</a>
            </li>
            <li>
              <a href="#153_XiaoyuID">1.5.3 显示Xiaoyu的姓氏和ID号码</a>
            </li>
            <li>
              <a href="#154_ID15">1.5.4 显示所有ID号码最后一位数字是1或5的人的全名</a>
            </li>
            <li>
              <a href="#155_Zhang">1.5.5 姓氏是Zhang的人，显示他的第二次捐款金额及她的名字</a>
            </li>
            <li>
              <a href="#156_Xiaoyu520200135">1.5.6 显示Xiaoyu的捐款.每个值时都有以$开头.如$520$200$135</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#16_awk0">1.6 awk中的$0是什么鬼？</a>
        </li>
        <li>
          <a href="#17_awk">1.7 awk中的替换</a><ul>
            <li>
              <a href="#171_gusb">1.7.1 使用gusb 函数进行替换</a>
            </li>
            <li>
              <a href="#172">1.7.2 替换文本中的内容</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#18_shellshellshellsbinnologin">1.8 【练习题】判断当前系统上所有用户的shell是否为可登录shell（即用户的shell不是/sbin/nologin）,如果是显示用户名字</a><ul>
            <li>
              <a href="#181_--column">1.8.1 【对齐】输出的结果更美观整齐--column命令</a>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#2_awkBEGIN_END">第2章 awk中BEGIN 和 END</a><ul>
        <li>
          <a href="#21">2.1 怎么把正则表达式作为条件</a><ul>
            <li>
              <a href="#211_ldquordquo">2.1.1 【一个栗子】执行完输出后，再输出一个&ldquo;结束&rdquo;</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#22_etcservices">2.2 【企业案例】统计/etc/services文件里面的空行数量</a><ul>
            <li>
              <a href="#221_awkEND">2.2.1 使用awk的END模式</a>
            </li>
            <li>
              <a href="#222_i">2.2.2 查看i++的执行过程</a>
            </li>
            <li>
              <a href="#223">2.2.3 其他方法：</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#23_seq_100_numtxt">2.3 【案例】seq 100 >num.txt ，计算这个文件每一行相加的结果</a>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#3_awk">第3章 awk数组</a><ul>
        <li>
          <a href="#31">3.1 数组是用来做什么的？</a><ul>
            <li>
              <a href="#311">3.1.1 他能够干些什么？</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#32">3.2 数组详解---"酒店"</a><ul>
            <li>
              <a href="#321">3.2.1 如何查看房间里住的是哪位客人？</a>
            </li>
            <li>
              <a href="#322_for">3.2.2 使用for语句，对酒店进行循环/查房</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#33_sohu">3.3 【企业面试题】统计域名访问次数（去重统计）。处理以下文件内容,将域名取出并根据域名进行计数排序处理百度和sohu面试题)</a><ul>
            <li>
              <a href="#331_sort_uniq">3.3.1 方法一：sort uniq</a>
            </li>
            <li>
              <a href="#332_2_awk">3.3.2 方法2 awk数组</a><ul>
                <li>
                  <a href="#3321nbsp">3.3.2.1&nbsp;第一步 取出域名</a>
                </li>
                <li>
                  <a href="#3322nbsp">3.3.2.2&nbsp;第二步 显示</a>
                </li>
                <li>
                  <a href="#3323nbsp">3.3.2.3&nbsp;第三步 显示结果</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#4">第4章 课后题目：</a><ul>
        <li>
          <a href="#41_secureip">4.1 统计secure文件中谁在破解你的密码（统计出破解你密码的ip地址出现的次数）</a><ul>
            <li>
              <a href="#411">4.1.1 方法一</a>
            </li>
            <li>
              <a href="#412">4.1.2 方法二</a>
            </li>
            <li>
              <a href="#413">4.1.3 结果统计</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#42_accesslogip">4.2 统计access.log文件中对ip地址去重并统计重复数</a>
        </li>
        <li>
          <a href="#43_accesslog">4.3 统计access.log文件中网站一共使用了多少流量</a>
        </li>
      </ul>
    </li>
  </ul>
</div>