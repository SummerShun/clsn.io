---
title: Shell编程进阶篇(完结)
author: 惨绿少年
type: post
date: 2017-12-12T00:13:00+00:00
url: /clsn/lx466.html
Baidusubmit:
  - 1
views:
  - 326
specs_zan:
  - 2
categories:
  - Linux运维
  - Shell编程
  - 云计算
  - 玩转Linux
  - 运维基本功

---
　　

## <span id="11_for">1.1 for循环语句</span>

<table style="width: 1206px; height: 678px;" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="52%">
      <p>
        <span style="font-size: 12px;">&nbsp; &nbsp; &nbsp;在计算机科学中，for循环（英语：for loop）是一种编程语言的迭代陈述，能够让程式码反复的执行。</span>
      </p>
      
      <p>
        <span style="font-size: 12px;">&nbsp; &nbsp; &nbsp;它跟其他的循环，如while循环，最大的不同，是它拥有一个循环计数器，或是循环变数。这使得for循环能够知道在迭代过程中的执行顺序。</span>
      </p>
      
      <h3>
        <span id="111_shellfor">1.1.1 shell中的for循环</span>
      </h3>
      
      <p>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 12px;">&nbsp;&nbsp; shell中的for 循环与在c中不同，它包含三种形式：第一种结构是列表for 循环;第二种结构就是不带列表的for循环；第三种就类似于C语言。</span>
      </p>
      
      <p>
        <strong>①&nbsp;&nbsp; </strong><strong>列表for</strong><strong>循环(</strong><em>常用</em><strong>)</strong>
      </p>
      
      <div class="cnblogs_code">
        <pre>#！/bin/<span style="color: #000000;">bash
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> 取值列表
</span><span style="color: #0000ff;">do</span><span style="color: #000000;">
    循环主体</span>/<span style="color: #000000;">命令
</span><span style="color: #0000ff;">done</span></pre>
      </div>
      
      <p>
        &nbsp;
      </p>
      
      <p>
        <strong>②&nbsp;&nbsp; </strong><strong>不带列表for</strong><strong>循环(</strong><strong>示例)</strong>
      </p>
      
      <div>
        <div class="cnblogs_code">
          <pre>#!/bin/<span style="color: #000000;">absh
</span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">惨绿少年的博客是：</span><span style="color: #800000;">"</span>  
<span style="color: #0000ff;">for</span><span style="color: #000000;"> i 
     </span><span style="color: #0000ff;">do</span>   
     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$i</span><span style="color: #800000;">"</span> 
<span style="color: #0000ff;">done</span> </pre>
        </div>
        
        <p class="ad">
          &nbsp;　　脚本执行结果
        </p>
        
        <div class="cnblogs_code">
          <pre>[root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">sh</span>  for2.<span style="color: #0000ff;">sh</span> http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #000000;">惨绿少年的博客是：
http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span></pre>
        </div>
        
        <p>
          &nbsp;
        </p>
      </div>
    </td>
    
    <td style="text-align: left;" valign="top" width="47%">
      &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212151446347-1775013299.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />
    </td>
  </tr>
</table>

③&nbsp;&nbsp; **类似C****语言的风格**（_这种用法常在__C__语语言中使_用）

<div>
  <div class="cnblogs_code">
    <pre><span style="color: #0000ff;">for</span><span style="color: #000000;">((exp1;exp2;exp3))
    </span><span style="color: #0000ff;">do</span><span style="color: #000000;">
      指令...
</span><span style="color: #0000ff;">done</span>   </pre>
  </div>
</div>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _<span style="text-decoration: underline;">编写类似C</span>__<span style="text-decoration: underline;">语言风格脚本</span>_

<div>
  <div class="cnblogs_code">
    <pre><span style="color: #0000ff;">for</span>((i=<span style="color: #800080;"></span>;i&lt;=<span style="color: #800080;">3</span>;i++<span style="color: #000000;">))
    </span><span style="color: #0000ff;">do</span>
      <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #0000ff;">done</span>  </pre>
  </div>
</div>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _<span style="text-decoration: underline;">脚本执行过程</span>_

<p align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212151854941-1524507880.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
</p>

### <span id="112_For">1.1.2 不同语言的For循环</span>

<span style="background-color: #ffff00;"><strong><em><span style="text-decoration: underline;">Shell</span></em></strong><strong><em><span style="text-decoration: underline;">中的两种样式</span></em></strong></span>

<div>
  <div class="cnblogs_code">
    <pre><span style="color: #000000;"># 样式一：
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> 
  <span style="color: #0000ff;">do</span> 
    <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #0000ff;">done</span><span style="color: #000000;">
# 样式二：
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span>;<span style="color: #0000ff;">do</span>  <span style="color: #0000ff;">echo</span> $i;<span style="color: #0000ff;">done</span></pre>
  </div>
  
  <p class="ad">
    <strong>　　JAVA</strong>
  </p>
</div>

<div>
  <div class="cnblogs_code">
    <pre><span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i = <span style="color: #800080;"></span>; i &lt; <span style="color: #800080;">5</span>; i++<span style="color: #000000;">){
    </span><span style="color: #008000;">//</span><span style="color: #008000;">循环语句;</span>
}</pre>
  </div>
</div>

**　　PHP**

<div>
  <div class="cnblogs_code">
    <pre><span style="color: #0000ff;">for</span> ($i = <span style="color: #800080;"></span>; $i &lt; <span style="color: #800080;">5</span>; $i++<span style="color: #000000;">) {
  # statements;
}</span></pre>
  </div>
</div>

**　　VB**

<div>
  <div class="cnblogs_code">
    <pre>For i = <span style="color: #800080;">1</span> To <span style="color: #800080;">5</span>
===PASCAL===
<span style="color: #0000ff;">for</span> not i=<span style="color: #800080;">1</span> <span style="color: #0000ff;">do</span><span style="color: #000000;">
begin
   i</span>=<span style="color: #800080;"></span><span style="color: #000000;">;
   writeln(</span><span style="color: #800000;">'</span><span style="color: #800000;">Go on!</span><span style="color: #800000;">'</span><span style="color: #000000;">);
end.
   
  </span><span style="color: #800000;">'</span><span style="color: #800000;">循环语句</span>
Next i</pre>
  </div>
  
  <p class="ad">
    <strong>　　swift</strong>
  </p>
</div>

<div>
  <div class="cnblogs_code">
    <pre>var x = <span style="color: #800080;"></span>
<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> <span style="color: #800080;">1</span>...<span style="color: #800080;">100</span><span style="color: #000000;">{
    x </span>+=<span style="color: #000000;"> i
}
print(x)

</span><span style="color: #008000;">//</span><span style="color: #008000;">5050</span>
<span style="color: #0000ff;">for</span> _ <span style="color: #0000ff;">in</span> <span style="color: #800080;">1</span>...<span style="color: #800080;">100</span><span style="color: #000000;">{
    x </span>+= <span style="color: #800080;">1</span><span style="color: #000000;">
}
print(x)
</span><span style="color: #008000;">//</span><span style="color: #008000;"> 100</span>
<span style="color: #000000;">
var box </span>= [<span style="color: #800080;">1</span>,<span style="color: #800080;">2</span>,<span style="color: #800080;">3</span>,<span style="color: #800080;">4</span>,<span style="color: #800080;">5</span><span style="color: #000000;">]
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> box{
    print(i)
}
</span><span style="color: #008000;">/*</span><span style="color: #008000;">
1 
2 
3 
4 
5
</span><span style="color: #008000;">*/</span>
---</pre>
  </div>
</div>

## <span id="12_for">1.2 for循环相关练习题</span>

### <span id="121_1">1.2.1 【练习题1】批量生成随机字符文件名案例</span>

使用for循环在/clsn目录下批量创建10个html文件，其中每个文件需要包含10个随机小写字母加固定字符串clsn，名称示例如下：

<div class="cnblogs_code">
  <pre>[root@znix C19]# <span style="color: #0000ff;">ls</span> /<span style="color: #000000;">clsn
apquvdpqbk_clsn.html  mpyogpsmwj_clsn.html  txynzwofgg_clsn.html   
bmqiwhfpgv_clsn.html  udrzobsprf_clsn.html  vjxmlflawa_clsn.html  
jhjdcjnjxc_clsn.html  qeztkkmewn_clsn.html jpvirsnjld_clsn.html  
ruscyxwxai_clsn.html</span></pre>
</div>

脚本内容

<div>
  <div class="cnblogs_code" onclick="cnblogs_code_show('bf2aa7b7-51ee-41ec-9a51-edc228388a0c')">
    <img id="code_img_closed_bf2aa7b7-51ee-41ec-9a51-edc228388a0c" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_bf2aa7b7-51ee-41ec-9a51-edc228388a0c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('bf2aa7b7-51ee-41ec-9a51-edc228388a0c',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
    
    <div id="cnblogs_code_open_bf2aa7b7-51ee-41ec-9a51-edc228388a0c" class="cnblogs_code_hide">
      <pre><span style="color: #008080;"> 1</span> [root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">cat</span> make_file.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: make_file.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">08</span> <span style="color: #800080;">11</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">19</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> [ -d /clsn ] || <span style="color: #0000ff;">mkdir</span> -p /<span style="color: #000000;">clsn
</span><span style="color: #008080;">13</span> rpm -qa |<span style="color: #0000ff;">grep</span> pwgen &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">14</span> <span style="color: #0000ff;">if</span> [ $? -eq  <span style="color: #800080;">1</span><span style="color: #000000;"> ] 
</span><span style="color: #008080;">15</span>   <span style="color: #0000ff;">then</span> 
<span style="color: #008080;">16</span>     <span style="color: #0000ff;">yum</span> <span style="color: #0000ff;">install</span> pwgen -y &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">17</span> <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> cd /clsn &&<span style="color: #000000;">\
</span><span style="color: #008080;">20</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">10</span><span style="color: #000000;">}
</span><span style="color: #008080;">21</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">22</span>    #File_Name=`uuidgen |<span style="color: #0000ff;">tr</span> <span style="color: #800000;">"</span><span style="color: #800000;">0-9-</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">a-z</span><span style="color: #800000;">"</span>|<span style="color: #0000ff;">cut</span> -c <span style="color: #800080;">1</span>-<span style="color: #800080;">10</span><span style="color: #000000;">`
</span><span style="color: #008080;">23</span>    File_Name2=`pwgen -1A0 <span style="color: #800080;">10</span><span style="color: #000000;">`
</span><span style="color: #008080;">24</span>    <span style="color: #0000ff;">touch</span><span style="color: #000000;"> ${File_Name2}_clsn.html
</span><span style="color: #008080;">25</span> <span style="color: #0000ff;">done</span></pre>
    </div>
    
    <p>
      <span class="cnblogs_code_collapse">View Code 批量生成随机字符文件名</span></div> </div> 
      
      <p>
        脚本执行结果
      </p>
      
      <div>
        <div class="cnblogs_code">
          <pre>[root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">ls</span> -l  /<span style="color: #000000;">clsn 
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> aegheiriek_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> aifohxique_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> caexahween_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> ciefaivaib_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> eixongooph_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> foozaivedo_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> ireeteethu_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> ohmeebivae_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span><span style="color: #000000;"> oiceehahth_clsn.html
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月  <span style="color: #800080;">8</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">41</span> sheewaehoo_clsn.html</pre>
        </div>
      </div>
      
      <h3>
        <span id="122_2">1.2.2 【练习题2】批量改名特殊案例</span>
      </h3>
      
      <p>
        【练习题1】中结果文件名中的clsn字符串全部改成znix(最好用for循环实现),并且将扩展名html全部改成大写。
      </p>
      
      <div>
        <div class="cnblogs_code">
          <pre>jpvirsnjld_clsn.html   ===> jpvirsnjld_znix.HTML</pre>
        </div>
      </div>
      
      <p>
        脚本内容：
      </p>
      
      <div>
        <div class="cnblogs_code" onclick="cnblogs_code_show('0949881c-dd1b-4522-927e-0745e2596b22')">
          <img id="code_img_closed_0949881c-dd1b-4522-927e-0745e2596b22" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_0949881c-dd1b-4522-927e-0745e2596b22" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0949881c-dd1b-4522-927e-0745e2596b22',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
          
          <div id="cnblogs_code_open_0949881c-dd1b-4522-927e-0745e2596b22" class="cnblogs_code_hide">
            <pre><span style="color: #008080;"> 1</span> [root@clsn for2]# <span style="color: #0000ff;">cat</span> rename_file.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: rename_file.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">08</span> <span style="color: #800080;">11</span>:<span style="color: #800080;">31</span>:<span style="color: #800080;">56</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> cd /clsn &&<span style="color: #000000;">\
</span><span style="color: #008080;">13</span> File_name=`<span style="color: #0000ff;">ls</span> |<span style="color: #0000ff;">sed</span> -r <span style="color: #800000;">'</span><span style="color: #800000;">s#(.*)_clsn.html#\1#g</span><span style="color: #800000;">'</span><span style="color: #000000;">`
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> $File_name
</span><span style="color: #008080;">16</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">17</span>    <span style="color: #0000ff;">if</span> [ -<span style="color: #000000;">f ${i}_clsn.html ] 
</span><span style="color: #008080;">18</span>      <span style="color: #0000ff;">then</span>
<span style="color: #008080;">19</span>      <span style="color: #0000ff;">mv</span><span style="color: #000000;"> ${i}_clsn.html ${i}_znix.HTML
</span><span style="color: #008080;">20</span>    <span style="color: #0000ff;">else</span>
<span style="color: #008080;">21</span>      <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">文件修改完成.</span><span style="color: #800000;">"</span>
<span style="color: #008080;">22</span> <span style="color: #000000;">     exit
</span><span style="color: #008080;">23</span>    <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">24</span> <span style="color: #0000ff;">done</span></pre>
          </div>
          
          <p>
            <span class="cnblogs_code_collapse">View Code 批量改名</span></div> </div> 
            
            <p>
              查看结果
            </p>
            
            <div>
              <div class="cnblogs_code">
                <pre>[root@clsn for2]# <span style="color: #0000ff;">ls</span> /clsn/<span style="color: #000000;">
aeyaesughi_znix.HTML  caireasipi_znix.HTML  uahahnieli_znix.HTML
aifaepheeb_znix.HTML  eathixoong_znix.HTML  zalipageen_znix.HTML
akuipheeye_znix.HTML  ietoothaik_znix.HTML
apheikieno_znix.HTML  lachohtaif_znix.HTML</span></pre>
              </div>
            </div>
            
            <h4>
              <span id="1221nbsp"><strong>1.2.2.1&nbsp; </strong><strong>批量改名其他方式</strong></span>
            </h4>
            
            <p>
              　　rename 方式(最方便，专业改名)
            </p>
            
            <div>
              <div class="cnblogs_code">
                <pre>rename txt jpg *</pre>
              </div>
            </div>
            
            <p>
              <em>　　非 for </em><em>循环方式批量改名</em>(使用sed命令进行拼接，然后交给bash执行)
            </p>
            
            <div>
              <div class="cnblogs_code">
                <pre><span style="color: #0000ff;">ls</span> *jpg|<span style="color: #0000ff;">sed</span> -r <span style="color: #800000;">'</span><span style="color: #800000;">s#(.*).jpg#mv &  \1.mp4#</span><span style="color: #800000;">'</span>|bash</pre>
              </div>
            </div>
            
            <h3>
              <span id="123_3">1.2.3 【练习题3】批量创建特殊要求用户案例</span>
            </h3>
            
            <p>
              　　批量创建10个系统帐号clsn01-clsn10并设置密码（密码为随机数，要求字符和数字等混合）。
            </p>
            
            <p>
              脚本内容：
            </p>
            
            <div>
              <div class="cnblogs_code" onclick="cnblogs_code_show('d9dd3963-a1b5-4ae8-83e6-4939d3d74038')">
                <img id="code_img_closed_d9dd3963-a1b5-4ae8-83e6-4939d3d74038" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_d9dd3963-a1b5-4ae8-83e6-4939d3d74038" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d9dd3963-a1b5-4ae8-83e6-4939d3d74038',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                
                <div id="cnblogs_code_open_d9dd3963-a1b5-4ae8-83e6-4939d3d74038" class="cnblogs_code_hide">
                  <pre><span style="color: #008080;"> 1</span> [root@clsn for2]# <span style="color: #0000ff;">cat</span> add_user.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: add_user.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">08</span> <span style="color: #800080;">11</span>:<span style="color: #800080;">52</span>:<span style="color: #800080;">21</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Passwd_File=/tmp/<span style="color: #000000;">`uuidgen`.txt
</span><span style="color: #008080;">13</span> ><span style="color: #000000;">$Passwd_File
</span><span style="color: #008080;">14</span> <span style="color: #0000ff;">chmod</span> <span style="color: #800080;">400</span><span style="color: #000000;"> $Passwd_File
</span><span style="color: #008080;">15</span> 
<span style="color: #008080;">16</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> clsn{<span style="color: #800080;">01</span>..<span style="color: #800080;">10</span><span style="color: #000000;">}
</span><span style="color: #008080;">17</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">18</span>    userdel -r <span style="color: #800000;">"</span><span style="color: #800000;">$i</span><span style="color: #800000;">"</span> &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">19</span>    <span style="color: #0000ff;">id</span> $i &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">20</span>    <span style="color: #0000ff;">if</span> [ $? -ne <span style="color: #800080;"></span><span style="color: #000000;"> ]
</span><span style="color: #008080;">21</span>      <span style="color: #0000ff;">then</span>
<span style="color: #008080;">22</span> <span style="color: #000000;">       useradd $i
</span><span style="color: #008080;">23</span>        PassWd=<span style="color: #000000;">`uuidgen`
</span><span style="color: #008080;">24</span>        <span style="color: #0000ff;">echo</span> $PassWd |<span style="color: #0000ff;">passwd</span> --stdin $i &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">25</span>        <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">用户名：$i  密码：$PassWd</span><span style="color: #800000;">"</span> >><span style="color: #000000;">$Passwd_File
</span><span style="color: #008080;">26</span>        <span style="color: #0000ff;">echo</span> -e <span style="color: #800000;">"</span><span style="color: #800000;">\033[32m $i 用户创建成功！\033[0m</span><span style="color: #800000;">"</span>
<span style="color: #008080;">27</span>    <span style="color: #0000ff;">else</span> 
<span style="color: #008080;">28</span>      <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$i 用户已存在</span><span style="color: #800000;">"</span>
<span style="color: #008080;">29</span>    <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">30</span>    <span style="color: #0000ff;">if</span> [ <span style="color: #800000;">"</span><span style="color: #800000;">$i</span><span style="color: #800000;">"</span> == <span style="color: #800000;">"</span><span style="color: #800000;">clsn10</span><span style="color: #800000;">"</span><span style="color: #000000;"> ] 
</span><span style="color: #008080;">31</span>      <span style="color: #0000ff;">then</span>
<span style="color: #008080;">32</span>        <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">用户密码请查看文件 $Passwd_File</span><span style="color: #800000;">"</span>
<span style="color: #008080;">33</span>    <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">34</span> <span style="color: #0000ff;">done</span></pre>
                </div>
                
                <p>
                  <span class="cnblogs_code_collapse">View Code 批量创建特殊要求用户</span></div> </div> 
                  
                  <p>
                    查看成的密码文件
                  </p>
                  
                  <div>
                    <div class="cnblogs_code">
                      <pre>[root@clsn for2]# <span style="color: #0000ff;">cat</span> /tmp/3e5c18d9-f878-4d06-931e-<span style="color: #000000;">5bbcc810c3dc.txt 
用户名：clsn01  密码：3d4644d0</span>-9cf4-49db-<span style="color: #800080;">8928</span>-<span style="color: #000000;">1a8346972c32
用户名：clsn02  密码：70798c3a</span>-c8e3-42a0-<span style="color: #800080;">9942</span>-<span style="color: #000000;">d4011ce4b4b3
用户名：clsn03  密码：db2a0f1d</span>-2e49-44f5-a5b2-<span style="color: #000000;">69b352b30120
用户名：clsn04  密码：62d2e0c6</span>-b755-4b00-ad2d-<span style="color: #000000;">c98f9ca9f258
用户名：clsn05  密码：eaa3471b</span>-d04f-4d7c-8b7e-<span style="color: #000000;">3d75172a483b
用户名：clsn06  密码：fb260a11</span>-cd47-4b97-ab49-<span style="color: #000000;">0cae7a755262
用户名：clsn07  密码：16ee7a1f</span>-8aac-<span style="color: #800080;">4537</span>-b1aa-<span style="color: #000000;">7fc75beb8754
用户名：clsn08  密码：0dde8823</span>-b97d-4c88-<span style="color: #800080;">9258</span>-<span style="color: #000000;">3a68a3b53eba
用户名：clsn09  密码：daf14ec4</span>-ba9f-<span style="color: #800080;">4593</span>-<span style="color: #800080;">9773</span>-<span style="color: #000000;">1557fdf605dc
用户名：clsn10  密码：6f1b452c</span>-00b2-44a1-9f43-5f658d3a9124</pre>
                    </div>
                  </div>
                  
                  <p>
                    脚本执行过程：
                  </p>
                  
                  <p align="center">
                    <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212152432035-1172352234.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
                  </p>
                  
                  <h4>
                    <span id="1231nbsp_shell"><strong>1.2.3.1&nbsp; </strong><strong>批量创建用户并设置随机密码（不使用shell</strong><strong>循环）</strong></span>
                  </h4>
                  
                  <p>
                    　　方法一
                  </p>
                  
                  <div>
                    <div class="cnblogs_code">
                      <pre><span style="color: #0000ff;">echo</span> user{<span style="color: #800080;">1</span>..<span style="color: #800080;">20</span>}|<span style="color: #0000ff;">xargs</span> -n1|<span style="color: #0000ff;">sed</span> -r <span style="color: #800000;">'</span><span style="color: #800000;">s#(.*)#useradd \1 \&\& echo \1 >>/tmp/passwd.txt \&\& echo $RANDOM |md5sum |cut -c 1-5>>/tmp/passwd.txt \&\& echo `tail -1 /tmp/passwd.txt`|passwd --stdin \1#g</span><span style="color: #800000;">'</span>|bash</pre>
                    </div>
                  </div>
                  
                  <p>
                    　　方法二
                  </p>
                  
                  <div>
                    <div class="cnblogs_code">
                      <pre><span style="color: #0000ff;">echo</span> user{<span style="color: #800080;">1</span>..<span style="color: #800080;">20</span>}|<span style="color: #0000ff;">xargs</span> -n1|<span style="color: #0000ff;">sed</span> -r <span style="color: #800000;">'</span><span style="color: #800000;">s#(.*)#useradd \1 \&\& pass=`echo $RANDOM |md5sum |cut -c 1-5` \&\& echo $pass |passwd --stdin \1 \&\& echo \1 $pass>>/tmp/user_passwd.txt#g</span><span style="color: #800000;">'</span>|bash</pre>
                    </div>
                  </div>
                  
                  <p>
                    　　方法三
                  </p>
                  
                  <div>
                    <div class="cnblogs_code">
                      <pre><span style="color: #0000ff;">echo</span> user{<span style="color: #800080;">1</span>..<span style="color: #800080;">20</span>}|<span style="color: #0000ff;">xargs</span> -n1|<span style="color: #0000ff;">sed</span> -r <span style="color: #800000;">'</span><span style="color: #800000;">s#(.*)#useradd \1 \&\& pass=`echo $RANDOM |md5sum |cut -c 1-5` \&\& echo \1:$pass>>/tmp/user_passwd.txt \&\& chpasswd&lt;/tmp/user_passwd.txt#g</span><span style="color: #800000;">'</span>|bash</pre>
                    </div>
                  </div>
                  
                  <h3>
                    <span id="124_4">1.2.4 【练习题4】扫描网络内存活主机案例</span>
                  </h3>
                  
                  <p>
                    　　写一个Shell脚本，判断10.0.0.0/24网络里，当前在线的IP有哪些？
                  </p>
                  
                  <p>
                    脚本内容：
                  </p>
                  
                  <div>
                    <div class="cnblogs_code" onclick="cnblogs_code_show('d5ef8c09-6b8b-4edc-a01b-7be825c90340')">
                      <img id="code_img_closed_d5ef8c09-6b8b-4edc-a01b-7be825c90340" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_d5ef8c09-6b8b-4edc-a01b-7be825c90340" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d5ef8c09-6b8b-4edc-a01b-7be825c90340',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                      
                      <div id="cnblogs_code_open_d5ef8c09-6b8b-4edc-a01b-7be825c90340" class="cnblogs_code_hide">
                        <pre><span style="color: #008080;"> 1</span> [root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">cat</span> scan_ip2.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: scan_ip.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">07</span> <span style="color: #800080;">21</span>:<span style="color: #800080;">58</span>:<span style="color: #800080;">47</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Ip_File=/tmp/<span style="color: #000000;">scan_ip.txt
</span><span style="color: #008080;">13</span> ><span style="color: #000000;">$Ip_File
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> <span style="color: #800080;">10.0</span>.<span style="color: #800080;"></span>.{<span style="color: #800080;">1</span>..<span style="color: #800080;">254</span><span style="color: #000000;">}
</span><span style="color: #008080;">16</span>  <span style="color: #0000ff;">do</span>
<span style="color: #008080;">17</span>   <span style="color: #0000ff;">ping</span> -c <span style="color: #800080;">1</span> -W <span style="color: #800080;">1</span> $i &>/dev/<span style="color: #0000ff;">null</span> &&<span style="color: #000000;"> \
</span><span style="color: #008080;">18</span>   <span style="color: #0000ff;">if</span> [ $? -eq <span style="color: #800080;"></span> ] ;<span style="color: #0000ff;">then</span> 
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">存活主机: $i</span><span style="color: #800000;">"</span> &>><span style="color: #000000;">$Ip_File
</span><span style="color: #008080;">20</span>   <span style="color: #0000ff;">fi</span> &   
<span style="color: #008080;">21</span> <span style="color: #0000ff;">done</span>
<span style="color: #008080;">22</span> <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">使用 cat $Ip_File 查看扫描结果</span><span style="color: #800000;">"</span></pre>
                      </div>
                      
                      <p>
                        <span class="cnblogs_code_collapse">View Code 扫描网络内存活主机</span></div> </div> 
                        
                        <p>
                          脚本执行结果
                        </p>
                        
                        <div>
                          <div class="cnblogs_code">
                            <pre>[root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">time</span> <span style="color: #0000ff;">sh</span> scan_ip2.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
使用 </span><span style="color: #0000ff;">cat</span> /tmp/<span style="color: #000000;">scan_ip.txt 查看扫描结果

real    0m0.290s
user    0m0.001s
sys    0m0.039s

[root@clsn </span><span style="color: #0000ff;">for</span>]#  <span style="color: #0000ff;">cat</span> /tmp/<span style="color: #000000;">scan_ip.txt
存活主机: </span><span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.180</span><span style="color: #000000;">
存活主机: </span><span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.254</span></pre>
                          </div>
                        </div>
                        
                        <h3>
                          <span id="125_5">1.2.5 【练习题5】筛选符合长度的单词案例</span>
                        </h3>
                        
                        <p>
                          　　利用bash for循环打印下面这句话中字母数不大于6的单词(某企业面试真题)。
                        </p>
                        
                        <div>
                          <p class="a4">
                            　　　　I am clsn Welcome to my blog http://blog.znix.top
                          </p>
                        </div>
                        
                        <p>
                          脚本内容：
                        </p>
                        
                        <div>
                          <div class="cnblogs_code" onclick="cnblogs_code_show('46dd8086-576a-40ab-a4bd-3009b7f76456')">
                            <img id="code_img_closed_46dd8086-576a-40ab-a4bd-3009b7f76456" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_46dd8086-576a-40ab-a4bd-3009b7f76456" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('46dd8086-576a-40ab-a4bd-3009b7f76456',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                            
                            <div id="cnblogs_code_open_46dd8086-576a-40ab-a4bd-3009b7f76456" class="cnblogs_code_hide">
                              <pre><span style="color: #008080;"> 1</span> [root@clsn <span style="color: #0000ff;">for</span>]# vim  changdu.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: changdu.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">07</span> <span style="color: #800080;">22</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">48</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Word=<span style="color: #800000;">'</span><span style="color: #800000;">I am clsn Welcome to my blog http://blog.znix.top</span><span style="color: #800000;">'</span>
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> $Word
</span><span style="color: #008080;">15</span>  <span style="color: #0000ff;">do</span> 
<span style="color: #008080;">16</span>   #[ ${#i} -le <span style="color: #800080;">6</span> ]  && <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i  #子串方法
</span><span style="color: #008080;">17</span>   a=`<span style="color: #0000ff;">echo</span> $i |<span style="color: #0000ff;">wc</span> -<span style="color: #000000;">L`
</span><span style="color: #008080;">18</span>   <span style="color: #0000ff;">if</span> [ $a -le <span style="color: #800080;">6</span><span style="color: #000000;"> ]
</span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">then</span> 
<span style="color: #008080;">20</span>       <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #008080;">21</span>    <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">22</span> <span style="color: #0000ff;">done</span></pre>
                            </div>
                            
                            <p>
                              <span class="cnblogs_code_collapse">View Code 筛选符合长度的单词</span></div> </div> 
                              
                              <p>
                                脚本执行结果
                              </p>
                              
                              <div>
                                <div class="cnblogs_code">
                                  <pre>[root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">sh</span> changdu.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
I
am
clsn
to
my
blog</span></pre>
                                </div>
                              </div>
                              
                              <p>
                                方法二：
                              </p>
                              
                              <div>
                                <div class="cnblogs_code">
                                  <pre>read -p <span style="color: #800000;">"</span><span style="color: #800000;">请输入要判断的语句：</span><span style="color: #800000;">"</span><span style="color: #000000;"> a
set </span>--<span style="color: #000000;"> $a
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> <span style="color: #800000;">"</span><span style="color: #800000;">$@</span><span style="color: #800000;">"</span>
  <span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">if</span> [ ${#i} -le <span style="color: #800080;">6</span> ];<span style="color: #0000ff;">then</span>
       <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$i</span><span style="color: #800000;">"</span> 
    <span style="color: #0000ff;">fi</span>
<span style="color: #0000ff;">done</span></pre>
                                </div>
                                
                                <p>
                                  　由　<strong><a href="https://home.cnblogs.com/u/1233234%20%20" target="_blank">https://home.cnblogs.com/u/1233234 &nbsp;</a>&nbsp;@</strong><strong>贰佰&nbsp; </strong><strong>提供</strong>
                                </p>
                              </div>
                              
                              <p>
                                <strong>使用expr </strong><strong>计算字符串长度</strong>
                              </p>
                              
                              <div>
                                <div class="cnblogs_code">
                                  <pre>[root@clsn scripts]# <span style="color: #0000ff;">expr</span> length <span style="color: #800000;">'</span><span style="color: #800000;">111</span><span style="color: #800000;">'</span>
<span style="color: #800080;">3</span></pre>
                                </div>
                              </div>
                              
                              <h3>
                                <span id="126_6RANDOM">1.2.6 【练习题6】破解RANDOM随机数案例</span>
                              </h3>
                              
                              <p>
                                　　已知下面的字符串是通过RANDOM随机数变量md5sum后，再截取一部分连续字符串的结果，请破解这些字符串对应的使用md5sum处理前的RANDOM对应的数字？
                              </p>
                              
                              <div>
                                <div class="cnblogs_code">
                                  <pre><span style="color: #800080;">　　21029299</span><span style="color: #000000;">
　　00205d1c
　　a3da1677
　　1f6d12dd
　　890684b</span></pre>
                                </div>
                              </div>
                              
                              <p>
                                脚本内容
                              </p>
                              
                              <div>
                                <div class="cnblogs_code" onclick="cnblogs_code_show('ab034c27-f9aa-403c-97ce-6f1247bc74c5')">
                                  <img id="code_img_closed_ab034c27-f9aa-403c-97ce-6f1247bc74c5" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_ab034c27-f9aa-403c-97ce-6f1247bc74c5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ab034c27-f9aa-403c-97ce-6f1247bc74c5',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                                  
                                  <div id="cnblogs_code_open_ab034c27-f9aa-403c-97ce-6f1247bc74c5" class="cnblogs_code_hide">
                                    <pre>[root@clsn <span style="color: #0000ff;">for</span>]# vim  pojie.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: pojie.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">07</span> <span style="color: #800080;">22</span>:<span style="color: #800080;">41</span>:<span style="color: #800080;">01</span><span style="color: #000000;">
# Description:
#############################################################

md5File</span>=/tmp/<span style="color: #000000;">Randow_Md5.txt
Md5_Word</span>=<span style="color: #800000;">"</span><span style="color: #800000;">21029299 00205d1c a3da1677 1f6d12dd 890684b</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">if</span> [ ! -<span style="color: #000000;">f $md5File ]
  </span><span style="color: #0000ff;">then</span>
    ><span style="color: #000000;">$md5File
    </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;"></span>..<span style="color: #800080;">32767</span><span style="color: #000000;">}
       </span><span style="color: #0000ff;">do</span>
        <span style="color: #0000ff;">echo</span> `<span style="color: #0000ff;">echo</span> $i |md5sum` $i  >><span style="color: #000000;"> $md5File
    </span><span style="color: #0000ff;">done</span>
<span style="color: #0000ff;">else</span>
    <span style="color: #0000ff;">for</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> $Md5_Word
      </span><span style="color: #0000ff;">do</span>
       <span style="color: #0000ff;">grep</span><span style="color: #000000;"> $num $md5File
    </span><span style="color: #0000ff;">done</span>
<span style="color: #0000ff;">fi</span></pre>
                                  </div>
                                  
                                  <p>
                                    <span class="cnblogs_code_collapse">View Code 破解RANDOM随机数</span></div> </div> 
                                    
                                    <p>
                                      脚本执行结果
                                    </p>
                                    
                                    <div class="cnblogs_code">
                                      <pre>[root@clsn <span style="color: #0000ff;">for</span>]# <span style="color: #0000ff;">sh</span>  pojie.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
2102929901ee1aa769d0f479d7d78b05 </span>- <span style="color: #800080;">25667</span><span style="color: #000000;">
00205d1cbbeb97738ad5bbdde2a6793d </span>- <span style="color: #800080;">1346</span><span style="color: #000000;">
a3da1677501d9e4700ed867c5f33538a </span>- <span style="color: #800080;">25345</span><span style="color: #000000;">
1f6d12dd61b5c7523f038a7b966413d9 </span>- <span style="color: #800080;">7041</span><span style="color: #000000;">
890684ba3685395c782547daf296935f </span>- <span style="color: #800080;">10082</span></pre>
                                    </div>
                                    
                                    <h3>
                                      <span id="127_7">1.2.7 【练习题7】博客园博文爬虫案例</span>
                                    </h3>
                                    
                                    <p>
                                      　　获取博客园（惨绿少年）博客列表倒序排序考试题
                                    </p>
                                    
                                    <p>
                                      需求如下：
                                    </p>
                                    
                                    <p>
                                      　　请把https://www.cnblogs.com/clsn/地址中的所有博文，按照时间倒序列表如下：
                                    </p>
                                    
                                    <div>
                                      <p class="a4">
                                        　　　　2017年12月8日 &nbsp;Shell编程基础篇-下
                                      </p>
                                      
                                      <p class="a4">
                                        　　　　http://www.cnblogs.com/clsn/p/8006210.html
                                      </p>
                                      
                                      <p class="a4">
                                        　　　　2017年12月7日 &nbsp;&nbsp;memcached 缓存数据库应用实践
                                      </p>
                                      
                                      <p class="a4">
                                        　　　　http://www.cnblogs.com/clsn/p/7999510.html
                                      </p>
                                    </div>
                                    
                                    <p>
                                      <strong>高级要求：</strong>
                                    </p>
                                    
                                    <p>
                                      　　生成html页面，并设置超链接。
                                    </p>
                                    
                                    <p>
                                      　　结果如改网页展示：<a href="/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/8007232.html"  target="_blank">http://www.cnblogs.com/clsn/p/8007232.html</a>
                                    </p>
                                    
                                    <p>
                                      脚本内容：
                                    </p>
                                    
                                    <div>
                                      <div class="cnblogs_code" onclick="cnblogs_code_show('239e9124-8caf-4865-a33c-d8f40a6729e3')">
                                        <img id="code_img_closed_239e9124-8caf-4865-a33c-d8f40a6729e3" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_239e9124-8caf-4865-a33c-d8f40a6729e3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('239e9124-8caf-4865-a33c-d8f40a6729e3',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                                        
                                        <div id="cnblogs_code_open_239e9124-8caf-4865-a33c-d8f40a6729e3" class="cnblogs_code_hide">
                                          <pre><span style="color: #008080;"> 1</span> [root@clsn htmp]# <span style="color: #0000ff;">cat</span> clsn_blog.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: clsn_blog.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">08</span> <span style="color: #800080;">21</span>:<span style="color: #800080;">19</span>:<span style="color: #800080;">12</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Uri=<span style="color: #800000;">'</span><span style="color: #800000;">http://www.cnblogs.com/clsn/default.html?page=</span><span style="color: #800000;">'</span>
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> clsn_Html=/tmp/html/<span style="color: #000000;">clsn.html
</span><span style="color: #008080;">15</span> <span style="color: #0000ff;">mkdir</span> -p /tmp/html/
<span style="color: #008080;">16</span> ><span style="color: #000000;">$clsn_Html
</span><span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">6</span><span style="color: #000000;">}
</span><span style="color: #008080;">19</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">20</span>     curl -s  $Uri$i |<span style="color: #0000ff;">grep</span> -A <span style="color: #800080;">5</span>  <span style="color: #800000;">'</span><span style="color: #800000;">ImageLink</span><span style="color: #800000;">'</span> |<span style="color: #0000ff;">sed</span>  <span style="color: #800000;">'</span><span style="color: #800000;">s#&lt;.*div.*># #g</span><span style="color: #800000;">'</span>|<span style="color: #0000ff;">sed</span> <span style="color: #800000;">'</span><span style="color: #800000;">s#--#<br />#g</span><span style="color: #800000;">'</span> >><span style="color: #000000;"> $clsn_Html
</span><span style="color: #008080;">21</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">'</span><span style="color: #800000;"><br /></span><span style="color: #800000;">'</span> >><span style="color: #000000;">$clsn_Html
</span><span style="color: #008080;">22</span> <span style="color: #0000ff;">done</span></pre>
                                        </div>
                                        
                                        <p>
                                          <span class="cnblogs_code_collapse">View Code 博客园博文爬虫案例</span></div> </div> 
                                          
                                          <p>
                                            脚本成网页文件
                                          </p>
                                          
                                          <p align="center">
                                            <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212152934207-743020833.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
                                          </p>
                                          
                                          <h4>
                                            <span id="1271nbsp_51CTO"><strong>1.2.7.1&nbsp; </strong><strong>51CTO</strong><strong>博客爬虫案例</strong></span>
                                          </h4>
                                          
                                          <p>
                                            脚本内容
                                          </p>
                                          
                                          <div>
                                            <div class="cnblogs_code" onclick="cnblogs_code_show('2dfa2e63-5e0e-4040-a4fb-e85847395827')">
                                              <img id="code_img_closed_2dfa2e63-5e0e-4040-a4fb-e85847395827" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_2dfa2e63-5e0e-4040-a4fb-e85847395827" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2dfa2e63-5e0e-4040-a4fb-e85847395827',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p> 
                                              
                                              <div id="cnblogs_code_open_2dfa2e63-5e0e-4040-a4fb-e85847395827" class="cnblogs_code_hide">
                                                <pre><span style="color: #008080;"> 1</span> [root@clsn html]# <span style="color: #0000ff;">cat</span> oldboy_blog.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: oldboy_blog.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">08</span> <span style="color: #800080;">22</span>:<span style="color: #800080;">30</span>:<span style="color: #800080;">57</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Uri=<span style="color: #800000;">'</span><span style="color: #800000;">http://blog.51cto.com/oldboy/p</span><span style="color: #800000;">'</span>
<span style="color: #008080;">13</span> Blog_Index_File=/tmp/html/<span style="color: #000000;">oldboy_blog.html
</span><span style="color: #008080;">14</span> <span style="color: #0000ff;">mkdir</span> -p /tmp/<span style="color: #000000;">html
</span><span style="color: #008080;">15</span> > /tmp/html/<span style="color: #000000;">oldboy_blog.html
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">29</span><span style="color: #000000;">}
</span><span style="color: #008080;">18</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">19</span>   curl -s $Uri$i |<span style="color: #0000ff;">grep</span> -A <span style="color: #800080;">5</span>  <span style="color: #800000;">'</span><span style="color: #800000;">发布于</span><span style="color: #800000;">'</span>  |<span style="color: #000000;">\
</span><span style="color: #008080;">20</span>        <span style="color: #0000ff;">sed</span> <span style="color: #800000;">'</span><span style="color: #800000;">/^.*zan fr.*/,+2d</span><span style="color: #800000;">'</span>|<span style="color: #000000;">\
</span><span style="color: #008080;">21</span>        <span style="color: #0000ff;">sed</span> <span style="color: #800000;">'</span><span style="color: #800000;">s#^--$#<br />#g</span><span style="color: #800000;">'</span>|<span style="color: #000000;">\
</span><span style="color: #008080;">22</span>        <span style="color: #0000ff;">sed</span> <span style="color: #800000;">'</span><span style="color: #800000;">s#<a.*fl">发布于：#<a>#g</span><span style="color: #800000;">'</span>|<span style="color: #000000;">\
</span><span style="color: #008080;">23</span>        <span style="color: #0000ff;">sed</span> <span style="color: #800000;">'</span><span style="color: #800000;">s#<sp.*an>##g</span><span style="color: #800000;">'</span> >><span style="color: #000000;">\
</span><span style="color: #008080;">24</span> <span style="color: #000000;">           $Blog_Index_File
</span><span style="color: #008080;">25</span>   <span style="color: #0000ff;">echo</span> <span style="color: #800000;">'</span><span style="color: #800000;"><br /></span><span style="color: #800000;">'</span> >><span style="color: #000000;">$Blog_Index_File
</span><span style="color: #008080;">26</span> <span style="color: #0000ff;">done</span></pre>
</div>


<p>
  <span class="cnblogs_code_collapse">View Code 51CTO博客爬虫</span></div>
  </div>
  
  
  <p>
    <strong>附 </strong><strong>文本编码转码</strong>
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn <span style="color: #0000ff;">for</span>]# iconv --<span style="color: #000000;">help
用法： iconv [选项...] [文件...]
转换给定文件的编码。

 输入</span>/<span style="color: #000000;">输出格式规范：
  </span>-f, --from-code=<span style="color: #000000;">名称     原始文本编码
  </span>-t, --to-code=<span style="color: #000000;">名称       输出编码

 信息：
  </span>-l, --<span style="color: #000000;">list                 列举所有已知的字符集

 输出控制：
  </span>-<span style="color: #000000;">c                         从输出中忽略无效的字符
  </span>-o, --output=<span style="color: #000000;">FILE          输出文件
  </span>-s, --<span style="color: #000000;">silent               关闭警告
      </span>--<span style="color: #000000;">verbose              打印进度信息

  </span>-?, --<span style="color: #000000;">help                 给出该系统求助列表
      </span>--<span style="color: #000000;">usage                给出简要的用法信息
  </span>-V, --<span style="color: #000000;">version              打印程序版本号

长选项的强制或可选参数对对应的短选项也是强制或可选的</span></pre>
      
    </div>
    
    
    <p class="ad">
      常用：
    </p>
    
  </div>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>　iconv  -f gb2312  -t utf-<span style="color: #800080;">8</span> -c  clsn.html</pre>
      
    </div>
    
  </div>
  
  
  <h2>
    <span id="13_while">1.3 while循环语句</span>
  </h2>
  
  
  <table style="width: 100%;" border="0" cellspacing="0" cellpadding="0">
    
    
    
    <tr>
      <td valign="top" width="61%">
        <p>
          <span style="font-size: 13px;">在编程语言中，while循环（英语：<em>while loop</em>）是一种控制流程的陈述。利用一个返回结果为布林值（<em>Boolean</em>）的表达式作为循环条件，当这个表达式的返回值为&ldquo;真&rdquo;（<em>true</em>）时，则反复执行循环体内的程式码；若表达式的返回值为&ldquo;假&rdquo;（<em>false</em>），则不再执行循环体内的代码，继续执行循环体下面的代码。</span>
        </p>
        
        
        <p>
          <span style="font-size: 13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 因为while循环在区块内代码被执行之前，先检查陈述是否成立，因此这种控制流程通常被称为是一种前测试循环（<em>pre-test loop</em>）。相对而言do while循环，是在循环区块执行结束之后，再去检查陈述是否成立，被称为是后测试循环。</span>
        </p>
        
      </td>
      
      
      <td width="38%">
        &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212153109941-268328166.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
        
        
        
        <p>
          &nbsp;
        </p>
        
      </td>
      
    </tr>
    
    
  </table>
  
  
  <h3>
    <span id="131_shellwhile">1.3.1 shell中while语法</span>
  </h3>
  
  
  <div>
    <div class="cnblogs_code">
      <pre><span style="color: #0000ff;">while</span><span style="color: #000000;"> 条件
  </span><span style="color: #0000ff;">do</span><span style="color: #000000;">
    命令
</span><span style="color: #0000ff;">done</span></pre>
      
    </div>
    
  </div>
  
  
  <h3>
    <span id="132_while">1.3.2 while 使用场景</span>
  </h3>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 多用于创建守护进程
  </p>
  
  
  <p>
    <em><span style="text-decoration: underline;">【示例1</span></em><em><span style="text-decoration: underline;">】:while</span></em><em><span style="text-decoration: underline;">实现web</span></em><em><span style="text-decoration: underline;">服务器搭建</span></em>
  </p>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本代码
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn scripts]# vim web_view.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: web_view.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">10</span>:<span style="color: #800080;">07</span>:<span style="color: #800080;">24</span><span style="color: #000000;">
# Description:
#############################################################
</span><span style="color: #0000ff;">while</span> <span style="color: #0000ff;">true</span>
  <span style="color: #0000ff;">do</span>
  <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">ok</span><span style="color: #800000;">"</span> | nc -l <span style="color: #800080;">81</span>
<span style="color: #0000ff;">done</span></pre>
      
    </div>
    
  </div>
  
  
  <p>
    　　客户端进行访问测试
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn html]# curl <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.180</span>:<span style="color: #800080;">81</span><span style="color: #000000;">
ok</span></pre>
      
    </div>
    
  </div>
  
  
  <p>
    　　服务端显示结果：
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn scripts]# <span style="color: #0000ff;">sh</span>  web_view.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
GET </span>/ HTTP/<span style="color: #800080;">1.1</span><span style="color: #000000;">
User</span>-Agent: curl/<span style="color: #800080;">7.29</span>.<span style="color: #800080;"></span><span style="color: #000000;">
Host: </span><span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.180</span>:<span style="color: #800080;">81</span><span style="color: #000000;">
Accept: </span>*<span style="color: #008000;">/*</span></pre>
      
    </div>
    
  </div>
  
  
  <p>
    <em><span style="text-decoration: underline;">【示例2</span></em><em><span style="text-decoration: underline;">】:while</span></em><em><span style="text-decoration: underline;">创建定时任务</span></em>
  </p>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容:
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>#!/bin/<span style="color: #000000;">bash
</span><span style="color: #0000ff;">while</span>  <span style="color: #0000ff;">true</span>
  <span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">uptime</span>
       <span style="color: #0000ff;">sleep</span> <span style="color: #800080;">0.6</span>
<span style="color: #0000ff;">done</span></pre>
      
    </div>
    
  </div>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本执行结果
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn <span style="color: #0000ff;">while</span>]# <span style="color: #0000ff;">sh</span>  while1.<span style="color: #0000ff;">sh</span> 
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">52</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span>
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">53</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span>
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">53</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span>
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">54</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span>
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">55</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span>
 <span style="color: #800080;">15</span>:<span style="color: #800080;">01</span>:<span style="color: #800080;">55</span> up <span style="color: #800080;">2</span> days,  <span style="color: #800080;">6</span>:<span style="color: #800080;">02</span>,  <span style="color: #800080;">3</span> users,  load average: <span style="color: #800080;">0.00</span>, <span style="color: #800080;">0.01</span>, <span style="color: #800080;">0.05</span></pre>
      
    </div>
    
  </div>
  
  
  <p>
    <strong><em><span style="text-decoration: underline;">说明：</span></em></strong>
  </p>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 与 usleep
  </p>
  
  
  <div>
    <div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
      <p class="a">
        <span lang="EN-US">sleep </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">单位</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">秒</span><em> &nbsp;<span lang="EN-US">sleep 1 </span></em><em><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">休息</span><span lang="EN-US">1</span></em><em><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">秒</span></em>
      </p>
      
      
      <p class="a">
        <span lang="EN-US">usleep </span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">单位</span> <span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">微秒</span> <em><span lang="EN-US">usleep 1000000 </span></em><em><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">休息</span><span lang="EN-US">1s</span></em>
      </p>
      
      
      <p class="a">
        <span lang="EN-US">1</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">微秒等于百万分之一秒（</span><span lang="EN-US">10</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">的负</span><span lang="EN-US">6</span><span style="font-family: '微软雅黑',sans-serif; mso-ascii-font-family: 宋体; mso-hansi-font-family: 宋体;">次方秒）</span>
      </p>
      
    </div>
    
  </div>
  
  
  <p>
    时间测试
  </p>
  
  
  <div>
    <div class="cnblogs_code">
      <pre>[root@clsn <span style="color: #0000ff;">while</span>]# <span style="color: #0000ff;">time</span> <span style="color: #0000ff;">sleep</span> <span style="color: #800080;">0.1</span><span style="color: #000000;">

real    0m0.102s
user    0m0.001s
sys    0m0.000s</span></pre>
      
    </div>
    
  </div>
  
  
  <h3>
    <span id="133_while">1.3.3 while 作用</span>
  </h3>
  
  
  <p>
    　　补充定时任务功能，执行小于1秒的定时任务
  </p>
  
  
  <p>
    　　循环执行某些操作，例如水果菜单
  </p>
  
  
  <div>
    <p class="a4">
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<a href="/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/8006210.html" >http://www.cnblogs.com/clsn/p/8006210.html</a>&nbsp; （1.3.6）
    </p>
    
  </div>
  
  
  <p>
    <em><span style="text-decoration: underline;">示例1</span></em><em><span style="text-decoration: underline;">：使用while</span></em><em><span style="text-decoration: underline;">循环实现水果菜单的重复使用&nbsp;&nbsp;</span></em>
  </p>
  
  
  <p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容
  </p>
  
  
  <div>
    <div class="cnblogs_code" onclick="cnblogs_code_show('fcc7b82e-1436-4e49-9254-9a5d374fb626')">
      <img id="code_img_closed_fcc7b82e-1436-4e49-9254-9a5d374fb626" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_fcc7b82e-1436-4e49-9254-9a5d374fb626" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('fcc7b82e-1436-4e49-9254-9a5d374fb626',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
      
      
      
      <div id="cnblogs_code_open_fcc7b82e-1436-4e49-9254-9a5d374fb626" class="cnblogs_code_hide">
        <pre><span style="color: #008080;">1</span> 使用while循环实现水果菜单的重复使用</pre>
        
      </div>
      
      
      <p>
        <span class="cnblogs_code_collapse">View Code 使用while循环实现水果菜单的重复使用</span></div>
        </div>
        
        
        <p>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本执行过程
        </p>
        
        
        <p align="center">
          <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212153500801-1405731648.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
        </p>
        
        
        
        <p>
          <em><span style="text-decoration: underline;">示例2</span></em><em><span style="text-decoration: underline;">：计算1-100</span></em><em><span style="text-decoration: underline;">的和</span></em>
        </p>
        
        
        <p>
          　　方法一 (bc命令实现)
        </p>
        
        
        <div>
          <div class="cnblogs_code">
            <pre><span style="color: #0000ff;">echo</span> `<span style="color: #0000ff;">seq</span> -s + <span style="color: #800080;">1</span> <span style="color: #800080;">100</span>`|bc</pre>
            
          </div>
          
        </div>
        
        
        <p>
          　　方法二(while循环方法)
        </p>
        
        
        <div>
          <div class="cnblogs_code">
            <pre>[root@clsn <span style="color: #0000ff;">while</span>]# <span style="color: #0000ff;">cat</span> jishan.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: jishan.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">09</span> <span style="color: #800080;">15</span>:<span style="color: #800080;">18</span>:<span style="color: #800080;">44</span><span style="color: #000000;">
# Description:
#############################################################

i</span>=<span style="color: #800080;">1</span>

<span style="color: #0000ff;">while</span> [ <span style="color: #800000;">"</span><span style="color: #800000;">$i</span><span style="color: #800000;">"</span> -le <span style="color: #800080;">100</span><span style="color: #000000;"> ]
  </span><span style="color: #0000ff;">do</span><span style="color: #000000;">
  ((b</span>=b+<span style="color: #000000;">i))
  ((i</span>++<span style="color: #000000;">))
</span><span style="color: #0000ff;">done</span>
<span style="color: #0000ff;">echo</span> $b</pre>
            
          </div>
          
        </div>
        
        
        <p>
          <em><span style="text-decoration: underline;">示例3</span></em><em><span style="text-decoration: underline;">：实现类似手机通讯计费功能</span></em>
        </p>
        
        
        <p>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容：
        </p>
        
        
        <div>
          <div class="cnblogs_code" onclick="cnblogs_code_show('df7f21e7-d3b3-4c64-9124-0aa487b975ca')">
            <img id="code_img_closed_df7f21e7-d3b3-4c64-9124-0aa487b975ca" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_df7f21e7-d3b3-4c64-9124-0aa487b975ca" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('df7f21e7-d3b3-4c64-9124-0aa487b975ca',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
            
            
            
            <div id="cnblogs_code_open_df7f21e7-d3b3-4c64-9124-0aa487b975ca" class="cnblogs_code_hide">
              <pre><span style="color: #008080;"> 1</span> [root@clsn scripts]# <span style="color: #0000ff;">cat</span> <span style="color: #0000ff;">while</span>/shouji.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: shouji.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">09</span> <span style="color: #800080;">15</span>:<span style="color: #800080;">56</span>:<span style="color: #800080;">09</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">sum</span>=<span style="color: #800080;">1000</span>
<span style="color: #008080;">12</span> i=<span style="color: #800080;">15</span>
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #0000ff;">while</span> [ $<span style="color: #0000ff;">sum</span> -ge <span style="color: #800080;">15</span><span style="color: #000000;"> ]
</span><span style="color: #008080;">16</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">17</span> <span style="color: #0000ff;">cat</span>&lt;&lt;<span style="color: #000000;">EOF
</span><span style="color: #008080;">18</span> =================
<span style="color: #008080;">19</span> <span style="color: #800080;">1</span><span style="color: #000000;">.发短信
</span><span style="color: #008080;">20</span> <span style="color: #800080;">2</span><span style="color: #000000;">.查余额
</span><span style="color: #008080;">21</span> <span style="color: #800080;">3</span><span style="color: #000000;">.账户充值
</span><span style="color: #008080;">22</span> <span style="color: #800080;">4</span><span style="color: #000000;">.退出
</span><span style="color: #008080;">23</span> =================
<span style="color: #008080;">24</span> <span style="color: #000000;">EOF
</span><span style="color: #008080;">25</span>     read -p <span style="color: #800000;">"</span><span style="color: #800000;">你要做什么呢？</span><span style="color: #800000;">"</span><span style="color: #000000;"> Some
</span><span style="color: #008080;">26</span>     <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">$Some</span><span style="color: #800000;">"</span> <span style="color: #0000ff;">in</span>
<span style="color: #008080;">27</span>       <span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">sum</span>=$((<span style="color: #0000ff;">sum</span>-<span style="color: #000000;">i))
</span><span style="color: #008080;">29</span>         read -p  <span style="color: #800000;">"</span><span style="color: #800000;">请输入发送短信的内容：</span><span style="color: #800000;">"</span>
<span style="color: #008080;">30</span>         read -p  <span style="color: #800000;">"</span><span style="color: #800000;">请输入收信人：</span><span style="color: #800000;">"</span>
<span style="color: #008080;">31</span>         <span style="color: #0000ff;">sleep</span> <span style="color: #800080;">0.3</span>
<span style="color: #008080;">32</span>         <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">发送成功.</span><span style="color: #800000;">"</span>
<span style="color: #008080;">33</span>         <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">您当前余额为$sum</span><span style="color: #800000;">"</span>
<span style="color: #008080;">34</span> <span style="color: #000000;">        ;;
</span><span style="color: #008080;">35</span>       <span style="color: #800080;">2</span><span style="color: #000000;">)
</span><span style="color: #008080;">36</span>         <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">您当前余额为$sum</span><span style="color: #800000;">"</span>
<span style="color: #008080;">37</span> <span style="color: #000000;">        ;;
</span><span style="color: #008080;">38</span>       <span style="color: #800080;">3</span><span style="color: #000000;">)
</span><span style="color: #008080;">39</span>         read -p <span style="color: #800000;">"</span><span style="color: #800000;">请输入你要充值的金额：</span><span style="color: #800000;">"</span><span style="color: #000000;"> ChongZhi
</span><span style="color: #008080;">40</span>         <span style="color: #0000ff;">sum</span>=$((<span style="color: #0000ff;">sum</span>+<span style="color: #000000;">ChongZhi))
</span><span style="color: #008080;">41</span>         <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">充值成功，当前余额为$sum</span><span style="color: #800000;">"</span>
<span style="color: #008080;">42</span> <span style="color: #000000;">        ;;
</span><span style="color: #008080;">43</span>       <span style="color: #800080;">4</span><span style="color: #000000;">)
</span><span style="color: #008080;">44</span> <span style="color: #000000;">        exit
</span><span style="color: #008080;">45</span> <span style="color: #000000;">        ;;
</span><span style="color: #008080;">46</span>       *<span style="color: #000000;">)
</span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">输入有误！</span><span style="color: #800000;">"</span>
<span style="color: #008080;">48</span>         exit <span style="color: #800080;">2</span>
<span style="color: #008080;">49</span>     <span style="color: #0000ff;">esac</span>
<span style="color: #008080;">50</span> <span style="color: #0000ff;">done</span>
<span style="color: #008080;">51</span> 
<span style="color: #008080;">52</span> <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">余额不足，请及时充值！</span><span style="color: #800000;">"</span></pre>
              
            </div>
            
            
            <p>
              <span class="cnblogs_code_collapse">View Code ：实现类似手机通讯计费功能</span></div>
              </div>
              
              
              <h2>
                <span id="14">1.4 获取取文件中的行，单词和字符</span>
              </h2>
              
              
              <h3>
                <span id="141">1.4.1 迭代获取文件中的每一行</span>
              </h3>
              
              
              <p>
                方法一
              </p>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre><span style="color: #0000ff;">while</span><span style="color: #000000;"> read line;
  </span><span style="color: #0000ff;">do</span> 
    <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $line;
</span><span style="color: #0000ff;">done</span> &lt; <span style="color: #0000ff;">file</span>.txt</pre>
                  
                </div>
                
              </div>
              
              
              <p>
                方法二
              </p>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre><span style="color: #0000ff;">cat</span> <span style="color: #0000ff;">file</span>.txt|<span style="color: #0000ff;">while</span><span style="color: #000000;"> read line
  </span><span style="color: #0000ff;">do</span>
<span style="color: #0000ff;">echo</span><span style="color: #000000;"> $line
</span><span style="color: #0000ff;">done</span></pre>
                  
                </div>
                
              </div>
              
              
              <p>
                方法三
              </p>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre>exec &lt; <span style="color: #0000ff;">file</span><span style="color: #000000;">.txt
</span><span style="color: #0000ff;">while</span><span style="color: #000000;"> read line;
  </span><span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">echo</span><span style="color: #000000;"> line;
</span><span style="color: #0000ff;">done</span></pre>
                  
                </div>
                
              </div>
              
              
              <h3>
                <span id="142">1.4.2 迭代获取每一个单词</span>
              </h3>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre><span style="color: #0000ff;">for</span> word <span style="color: #0000ff;">in</span><span style="color: #000000;"> $line;
  </span><span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $word;
</span><span style="color: #0000ff;">done</span> </pre>
                  
                </div>
                
              </div>
              
              
              <h3>
                <span id="143">1.4.3 迭代获取每一个字符</span>
              </h3>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre>word=<span style="color: #000000;">participate
</span><span style="color: #0000ff;">for</span> ((i=<span style="color: #800080;"></span>;i&lt;${#word};i++<span style="color: #000000;">))
  </span><span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">echo</span>  ${word:<span style="color: #800080;">1</span>:<span style="color: #800080;">1</span><span style="color: #000000;">};
</span><span style="color: #0000ff;">done</span></pre>
                  
                </div>
                
              </div>
              
              
              <h3>
                <span id="144">1.4.4 同时获取取文件中的行，单词和字符脚本</span>
              </h3>
              
              
              <p>
                脚本内容
              </p>
              
              
              <div>
                <div class="cnblogs_code">
                  <pre>#!/bin/<span style="color: #000000;">bash
n</span>=<span style="color: #800080;">1</span>
<span style="color: #0000ff;">while</span><span style="color: #000000;"> read i
  </span><span style="color: #0000ff;">do</span>
   <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">第${n}行 $i</span><span style="color: #800000;">"</span><span style="color: #000000;">
   m</span>=<span style="color: #800080;">1</span>
   <span style="color: #0000ff;">for</span> x <span style="color: #0000ff;">in</span><span style="color: #000000;"> $i
     </span><span style="color: #0000ff;">do</span>
       <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">第${m}个单词 $x</span><span style="color: #800000;">"</span>
       <span style="color: #0000ff;">echo</span> $x|<span style="color: #0000ff;">grep</span> -<span style="color: #000000;">o . 
       ((m</span>++<span style="color: #000000;">))
   </span><span style="color: #0000ff;">done</span><span style="color: #000000;">
   ((n</span>++<span style="color: #000000;">))
</span><span style="color: #0000ff;">done</span> &lt; $<span style="color: #800080;">1</span></pre>
                  
                </div>
                
              </div>
              
              
              <p>
                脚本执行结果：
              </p>
              
              
              <div>
                <div class="cnblogs_code" onclick="cnblogs_code_show('d6b73795-c420-4e62-ae42-7e7d6732cfa4')">
                  <img id="code_img_closed_d6b73795-c420-4e62-ae42-7e7d6732cfa4" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_d6b73795-c420-4e62-ae42-7e7d6732cfa4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d6b73795-c420-4e62-ae42-7e7d6732cfa4',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                  
                  
                  
                  <div id="cnblogs_code_open_d6b73795-c420-4e62-ae42-7e7d6732cfa4" class="cnblogs_code_hide">
                    <pre><span style="color: #008080;">  1</span> [root@clsn scripts]# <span style="color: #0000ff;">sh</span>  lunxun.<span style="color: #0000ff;">sh</span>  /etc/<span style="color: #000000;">hosts
</span><span style="color: #008080;">  2</span> 第1行 <span style="color: #800080;">127.0</span>.<span style="color: #800080;">0.1</span><span style="color: #000000;">   localhost localhost.localdomain localhost4 localhost4.localdomain4
</span><span style="color: #008080;">  3</span> 第1个单词 <span style="color: #800080;">127.0</span>.<span style="color: #800080;">0.1</span>
<span style="color: #008080;">  4</span> <span style="color: #800080;">1</span>
<span style="color: #008080;">  5</span> <span style="color: #800080;">2</span>
<span style="color: #008080;">  6</span> <span style="color: #800080;">7</span>
<span style="color: #008080;">  7</span> <span style="color: #000000;">.
</span><span style="color: #008080;">  8</span> <span style="color: #800080;"></span>
<span style="color: #008080;">  9</span> <span style="color: #000000;">.
</span><span style="color: #008080;"> 10</span> <span style="color: #800080;"></span>
<span style="color: #008080;"> 11</span> <span style="color: #000000;">.
</span><span style="color: #008080;"> 12</span> <span style="color: #800080;">1</span>
<span style="color: #008080;"> 13</span> <span style="color: #000000;">第2个单词 localhost
</span><span style="color: #008080;"> 14</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 15</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 16</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 17</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 18</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 19</span> <span style="color: #000000;">h
</span><span style="color: #008080;"> 20</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 21</span> <span style="color: #000000;">s
</span><span style="color: #008080;"> 22</span> <span style="color: #000000;">t
</span><span style="color: #008080;"> 23</span> <span style="color: #000000;">第3个单词 localhost.localdomain
</span><span style="color: #008080;"> 24</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 25</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 26</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 27</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 28</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 29</span> <span style="color: #000000;">h
</span><span style="color: #008080;"> 30</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 31</span> <span style="color: #000000;">s
</span><span style="color: #008080;"> 32</span> <span style="color: #000000;">t
</span><span style="color: #008080;"> 33</span> <span style="color: #000000;">.
</span><span style="color: #008080;"> 34</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 35</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 36</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 37</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 38</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 39</span> <span style="color: #000000;">d
</span><span style="color: #008080;"> 40</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 41</span> <span style="color: #000000;">m
</span><span style="color: #008080;"> 42</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 43</span> <span style="color: #000000;">i
</span><span style="color: #008080;"> 44</span> <span style="color: #000000;">n
</span><span style="color: #008080;"> 45</span> <span style="color: #000000;">第4个单词 localhost4
</span><span style="color: #008080;"> 46</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 47</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 51</span> <span style="color: #000000;">h
</span><span style="color: #008080;"> 52</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 53</span> <span style="color: #000000;">s
</span><span style="color: #008080;"> 54</span> <span style="color: #000000;">t
</span><span style="color: #008080;"> 55</span> <span style="color: #800080;">4</span>
<span style="color: #008080;"> 56</span> <span style="color: #000000;">第5个单词 localhost4.localdomain4
</span><span style="color: #008080;"> 57</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 59</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 60</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 62</span> <span style="color: #000000;">h
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 64</span> <span style="color: #000000;">s
</span><span style="color: #008080;"> 65</span> <span style="color: #000000;">t
</span><span style="color: #008080;"> 66</span> <span style="color: #800080;">4</span>
<span style="color: #008080;"> 67</span> <span style="color: #000000;">.
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 69</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 70</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 72</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">d
</span><span style="color: #008080;"> 74</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 75</span> <span style="color: #000000;">m
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 77</span> <span style="color: #000000;">i
</span><span style="color: #008080;"> 78</span> <span style="color: #000000;">n
</span><span style="color: #008080;"> 79</span> <span style="color: #800080;">4</span>
<span style="color: #008080;"> 80</span> 第2行 ::<span style="color: #800080;">1</span><span style="color: #000000;">         localhost localhost.localdomain localhost6 localhost6.localdomain6
</span><span style="color: #008080;"> 81</span> 第1个单词 ::<span style="color: #800080;">1</span>
<span style="color: #008080;"> 82</span> <span style="color: #000000;">:
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">:
</span><span style="color: #008080;"> 84</span> <span style="color: #800080;">1</span>
<span style="color: #008080;"> 85</span> <span style="color: #000000;">第2个单词 localhost
</span><span style="color: #008080;"> 86</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 87</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 88</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 89</span> <span style="color: #000000;">a
</span><span style="color: #008080;"> 90</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">h
</span><span style="color: #008080;"> 92</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 93</span> <span style="color: #000000;">s
</span><span style="color: #008080;"> 94</span> <span style="color: #000000;">t
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">第3个单词 localhost.localdomain
</span><span style="color: #008080;"> 96</span> <span style="color: #000000;">l
</span><span style="color: #008080;"> 97</span> <span style="color: #000000;">o
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">c
</span><span style="color: #008080;"> 99</span> <span style="color: #000000;">a
</span><span style="color: #008080;">100</span> <span style="color: #000000;">l
</span><span style="color: #008080;">101</span> <span style="color: #000000;">h
</span><span style="color: #008080;">102</span> <span style="color: #000000;">o
</span><span style="color: #008080;">103</span> <span style="color: #000000;">s
</span><span style="color: #008080;">104</span> <span style="color: #000000;">t
</span><span style="color: #008080;">105</span> <span style="color: #000000;">.
</span><span style="color: #008080;">106</span> <span style="color: #000000;">l
</span><span style="color: #008080;">107</span> <span style="color: #000000;">o
</span><span style="color: #008080;">108</span> <span style="color: #000000;">c
</span><span style="color: #008080;">109</span> <span style="color: #000000;">a
</span><span style="color: #008080;">110</span> <span style="color: #000000;">l
</span><span style="color: #008080;">111</span> <span style="color: #000000;">d
</span><span style="color: #008080;">112</span> <span style="color: #000000;">o
</span><span style="color: #008080;">113</span> <span style="color: #000000;">m
</span><span style="color: #008080;">114</span> <span style="color: #000000;">a
</span><span style="color: #008080;">115</span> <span style="color: #000000;">i
</span><span style="color: #008080;">116</span> <span style="color: #000000;">n
</span><span style="color: #008080;">117</span> <span style="color: #000000;">第4个单词 localhost6
</span><span style="color: #008080;">118</span> <span style="color: #000000;">l
</span><span style="color: #008080;">119</span> <span style="color: #000000;">o
</span><span style="color: #008080;">120</span> <span style="color: #000000;">c
</span><span style="color: #008080;">121</span> <span style="color: #000000;">a
</span><span style="color: #008080;">122</span> <span style="color: #000000;">l
</span><span style="color: #008080;">123</span> <span style="color: #000000;">h
</span><span style="color: #008080;">124</span> <span style="color: #000000;">o
</span><span style="color: #008080;">125</span> <span style="color: #000000;">s
</span><span style="color: #008080;">126</span> <span style="color: #000000;">t
</span><span style="color: #008080;">127</span> <span style="color: #800080;">6</span>
<span style="color: #008080;">128</span> <span style="color: #000000;">第5个单词 localhost6.localdomain6
</span><span style="color: #008080;">129</span> <span style="color: #000000;">l
</span><span style="color: #008080;">130</span> <span style="color: #000000;">o
</span><span style="color: #008080;">131</span> <span style="color: #000000;">c
</span><span style="color: #008080;">132</span> <span style="color: #000000;">a
</span><span style="color: #008080;">133</span> <span style="color: #000000;">l
</span><span style="color: #008080;">134</span> <span style="color: #000000;">h
</span><span style="color: #008080;">135</span> <span style="color: #000000;">o
</span><span style="color: #008080;">136</span> <span style="color: #000000;">s
</span><span style="color: #008080;">137</span> <span style="color: #000000;">t
</span><span style="color: #008080;">138</span> <span style="color: #800080;">6</span>
<span style="color: #008080;">139</span> <span style="color: #000000;">.
</span><span style="color: #008080;">140</span> <span style="color: #000000;">l
</span><span style="color: #008080;">141</span> <span style="color: #000000;">o
</span><span style="color: #008080;">142</span> <span style="color: #000000;">c
</span><span style="color: #008080;">143</span> <span style="color: #000000;">a
</span><span style="color: #008080;">144</span> <span style="color: #000000;">l
</span><span style="color: #008080;">145</span> <span style="color: #000000;">d
</span><span style="color: #008080;">146</span> <span style="color: #000000;">o
</span><span style="color: #008080;">147</span> <span style="color: #000000;">m
</span><span style="color: #008080;">148</span> <span style="color: #000000;">a
</span><span style="color: #008080;">149</span> <span style="color: #000000;">i
</span><span style="color: #008080;">150</span> <span style="color: #000000;">n
</span><span style="color: #008080;">151</span> <span style="color: #800080;">6</span>
<span style="color: #008080;">152</span> 第3行 <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.1</span><span style="color: #000000;"> mirrors.aliyuncs.com mirrors.aliyun.com
</span><span style="color: #008080;">153</span> 第1个单词 <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.1</span>
<span style="color: #008080;">154</span> <span style="color: #800080;">1</span>
<span style="color: #008080;">155</span> <span style="color: #800080;"></span>
<span style="color: #008080;">156</span> <span style="color: #000000;">.
</span><span style="color: #008080;">157</span> <span style="color: #800080;"></span>
<span style="color: #008080;">158</span> <span style="color: #000000;">.
</span><span style="color: #008080;">159</span> <span style="color: #800080;"></span>
<span style="color: #008080;">160</span> <span style="color: #000000;">.
</span><span style="color: #008080;">161</span> <span style="color: #800080;">1</span>
<span style="color: #008080;">162</span> <span style="color: #000000;">第2个单词 mirrors.aliyuncs.com
</span><span style="color: #008080;">163</span> <span style="color: #000000;">m
</span><span style="color: #008080;">164</span> <span style="color: #000000;">i
</span><span style="color: #008080;">165</span> <span style="color: #000000;">r
</span><span style="color: #008080;">166</span> <span style="color: #000000;">r
</span><span style="color: #008080;">167</span> <span style="color: #000000;">o
</span><span style="color: #008080;">168</span> <span style="color: #000000;">r
</span><span style="color: #008080;">169</span> <span style="color: #000000;">s
</span><span style="color: #008080;">170</span> <span style="color: #000000;">.
</span><span style="color: #008080;">171</span> <span style="color: #000000;">a
</span><span style="color: #008080;">172</span> <span style="color: #000000;">l
</span><span style="color: #008080;">173</span> <span style="color: #000000;">i
</span><span style="color: #008080;">174</span> <span style="color: #000000;">y
</span><span style="color: #008080;">175</span> <span style="color: #000000;">u
</span><span style="color: #008080;">176</span> <span style="color: #000000;">n
</span><span style="color: #008080;">177</span> <span style="color: #000000;">c
</span><span style="color: #008080;">178</span> <span style="color: #000000;">s
</span><span style="color: #008080;">179</span> <span style="color: #000000;">.
</span><span style="color: #008080;">180</span> <span style="color: #000000;">c
</span><span style="color: #008080;">181</span> <span style="color: #000000;">o
</span><span style="color: #008080;">182</span> <span style="color: #000000;">m
</span><span style="color: #008080;">183</span> <span style="color: #000000;">第3个单词 mirrors.aliyun.com
</span><span style="color: #008080;">184</span> <span style="color: #000000;">m
</span><span style="color: #008080;">185</span> <span style="color: #000000;">i
</span><span style="color: #008080;">186</span> <span style="color: #000000;">r
</span><span style="color: #008080;">187</span> <span style="color: #000000;">r
</span><span style="color: #008080;">188</span> <span style="color: #000000;">o
</span><span style="color: #008080;">189</span> <span style="color: #000000;">r
</span><span style="color: #008080;">190</span> <span style="color: #000000;">s
</span><span style="color: #008080;">191</span> <span style="color: #000000;">.
</span><span style="color: #008080;">192</span> <span style="color: #000000;">a
</span><span style="color: #008080;">193</span> <span style="color: #000000;">l
</span><span style="color: #008080;">194</span> <span style="color: #000000;">i
</span><span style="color: #008080;">195</span> <span style="color: #000000;">y
</span><span style="color: #008080;">196</span> <span style="color: #000000;">u
</span><span style="color: #008080;">197</span> <span style="color: #000000;">n
</span><span style="color: #008080;">198</span> <span style="color: #000000;">.
</span><span style="color: #008080;">199</span> <span style="color: #000000;">c
</span><span style="color: #008080;">200</span> <span style="color: #000000;">o
</span><span style="color: #008080;">201</span> <span style="color: #000000;">m
</span><span style="color: #008080;">202</span> 第4行 <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.180</span><span style="color: #000000;"> clsn
</span><span style="color: #008080;">203</span> 第1个单词 <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.180</span>
<span style="color: #008080;">204</span> <span style="color: #800080;">1</span>
<span style="color: #008080;">205</span> <span style="color: #800080;"></span>
<span style="color: #008080;">206</span> <span style="color: #000000;">.
</span><span style="color: #008080;">207</span> <span style="color: #800080;"></span>
<span style="color: #008080;">208</span> <span style="color: #000000;">.
</span><span style="color: #008080;">209</span> <span style="color: #800080;"></span>
<span style="color: #008080;">210</span> <span style="color: #000000;">.
</span><span style="color: #008080;">211</span> <span style="color: #800080;">1</span>
<span style="color: #008080;">212</span> <span style="color: #800080;">8</span>
<span style="color: #008080;">213</span> <span style="color: #800080;"></span>
<span style="color: #008080;">214</span> <span style="color: #000000;">第2个单词 clsn
</span><span style="color: #008080;">215</span> <span style="color: #000000;">c
</span><span style="color: #008080;">216</span> <span style="color: #000000;">l
</span><span style="color: #008080;">217</span> <span style="color: #000000;">s
</span><span style="color: #008080;">218</span> n</pre>
                    
                  </div>
                  
                  
                  <p>
                    <span class="cnblogs_code_collapse">View Code 1.4.4 同时获取取文件中的行，单词和字符脚本 执行结果</span></div>
                    </div>
                    
                    
                    <h3>
                      <span id="145_eval">1.4.5 eval 命令用法</span>
                    </h3>
                    
                    
                    <div>
                      <div class="cnblogs_code">
                        <pre>[root@clsn ~]# clsn=<span style="color: #800080;">6</span><span style="color: #000000;">
[root@clsn </span>~]# <span style="color: #0000ff;">echo</span> {<span style="color: #800080;">1</span><span style="color: #000000;">..$clsn}
{</span><span style="color: #800080;">1</span>..<span style="color: #800080;">6</span><span style="color: #000000;">}
[root@clsn </span>~]# eval <span style="color: #0000ff;">echo</span> {<span style="color: #800080;">1</span><span style="color: #000000;">..$clsn}
</span><span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> <span style="color: #800080;">4</span> <span style="color: #800080;">5</span> <span style="color: #800080;">6</span></pre>
                        
                      </div>
                      
                    </div>
                    
                    
                    <p>
                      &nbsp;&nbsp; eval 命令的说明
                    </p>
                    
                    
                    <div>
                      <div class="cnblogs_code">
                        <pre>[root@clsn ~<span style="color: #000000;">]# help eval
eval: eval [参数 ...]
    <span style="color: #ff0000;">将参数作为 shell 命令执行</span>。
    
    将 ARGs 合成一个字符串，用结果作为 shell 的输入，
    并且执行得到的命令。
    
    退出状态：
    以命令的状态退出，或者在命令为空的情况下返回成功。</span></pre>
                        
                      </div>
                      
                    </div>
                    
                    
                    <h2>
                      <span id="15_break_continue_exit_return">1.5 break continue exit return</span>
                    </h2>
                    
                    
                    <p>
                      条件与循环控制及程序返回值命令表&nbsp;
                    </p>
                    
                    
                    <table class="MsoTable15Grid4Accent1" style="width: 100%; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
                      
                      
                      
                      <tr>
                        <td style="width: 17.58%; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: #5b9bd5; border-bottom-color: #5b9bd5; border-left-color: #5b9bd5; border-right: none; background: #5b9bd5; padding: 0cm 5.4pt;" valign="top" width="17%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 5;" align="center">
                            <strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">命令</span></strong>
                          </p>
                          
                        </td>
                        
                        
                        <td style="width: 82.42%; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #5b9bd5; border-right-color: #5b9bd5; border-bottom-color: #5b9bd5; border-left: none; background: #5b9bd5; padding: 0cm 5.4pt;" valign="top" width="82%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 1;" align="center">
                            <strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">说明</span></strong>
                          </p>
                          
                        </td>
                        
                      </tr>
                      
                      
                      <tr>
                        <td style="width: 17.58%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="17%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 68;">
                            <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">break n&nbsp;&nbsp;&nbsp; </span></strong>
                          </p>
                          
                        </td>
                        
                        
                        <td style="width: 82.42%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="82%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                            <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">如果省略</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">，则表示跳出整个循环，</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">表示跳出循环的层数</span>
                          </p>
                          
                        </td>
                        
                      </tr>
                      
                      
                      <tr>
                        <td style="width: 17.58%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; padding: 0cm 5.4pt;" valign="top" width="17%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 4;">
                            <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">continue n</span></strong>
                          </p>
                          
                        </td>
                        
                        
                        <td style="width: 82.42%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; padding: 0cm 5.4pt;" valign="top" width="82%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt;">
                            <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">如果省略</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">，则表示跳过本次循环，忽略本次循环的剩余代码，进人循环的下一次循环。</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US"> n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">表示退到第</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">层继续循环</span>
                          </p>
                          
                        </td>
                        
                      </tr>
                      
                      
                      <tr>
                        <td style="width: 17.58%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="17%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 68;">
                            <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">exit n</span></strong>
                          </p>
                          
                        </td>
                        
                        
                        <td style="width: 82.42%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="82%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                            <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">退出当前</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Shell</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">程序，</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">为上一次程序执行的状态返回值。</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">也可以省略，在下一个</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Shell</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">里可通过</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">"$?"</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">接收</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">exit n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">的</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">值</span>
                          </p>
                          
                        </td>
                        
                      </tr>
                      
                      
                      <tr>
                        <td style="width: 17.58%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; padding: 0cm 5.4pt;" valign="top" width="17%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 4;">
                            <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">return n</span></strong>
                          </p>
                          
                        </td>
                        
                        
                        <td style="width: 82.42%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; padding: 0cm 5.4pt;" valign="top" width="82%">
                          <p class="MsoNormal" style="margin-bottom: .0001pt;">
                            <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">用于在函数里作为函数的返回值，以判断函数执行是否正确。在下一个</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Shell</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">里可通过</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">"$?"</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">接收</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">exit n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">的</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">n</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">值</span>
                          </p>
                          
                        </td>
                        
                      </tr>
                      
                      
                    </table>
                    
                    
                    <div class="cnblogs_code">
                      <pre><span style="color: #000000;">简单来说即：<br />break    跳出循环
continue 跳出本次循环
exit     退出脚本
return   与 exit 相同，在函数中使用</span></pre>
                      
                    </div>
                    
                    
                    <h3>
                      <span id="151_break">1.5.1 break命令说明</span>
                    </h3>
                    
                    
                    <div>
                      <div class="cnblogs_code">
                        <pre><span style="color: #000000;">[root@clsn scripts]# help break 
break: break [n]
    退出 </span><span style="color: #0000ff;">for</span>、<span style="color: #0000ff;">while</span>、或 <span style="color: #0000ff;">until</span><span style="color: #000000;"> 循环
    
    退出一个 FOR、WHILE 或 UNTIL 循环。如果指定了N，则打破N重
    循环
    
    退出状态：
    退出状态为0除非 N 不大于或等于 </span><span style="color: #800080;">1</span>。</pre>
                        
                      </div>
                      
                    </div>
                    
                    
                    <p>
                      &nbsp; 测试脚本内容
                    </p>
                    
                    
                    <div>
                      <div class="cnblogs_code" onclick="cnblogs_code_show('e7c804ca-389a-4b45-8240-8d6e6cc5be06')">
                        <img id="code_img_closed_e7c804ca-389a-4b45-8240-8d6e6cc5be06" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_e7c804ca-389a-4b45-8240-8d6e6cc5be06" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e7c804ca-389a-4b45-8240-8d6e6cc5be06',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                        
                        
                        
                        <div id="cnblogs_code_open_e7c804ca-389a-4b45-8240-8d6e6cc5be06" class="cnblogs_code_hide">
                          <pre><span style="color: #008080;"> 1</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">5</span><span style="color: #000000;">}
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">if</span> [ $i -eq <span style="color: #800080;">3</span><span style="color: #000000;"> ]
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>       <span style="color: #0000ff;">then</span>
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #000000;">       break
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> <span style="color: #0000ff;">done</span>
<span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">ok</span><span style="color: #800000;">"</span></pre>
                          
                        </div>
                        
                        
                        <p>
                          <span class="cnblogs_code_collapse">View Code break 测试脚本</span></div>
                          </div>
                          
                          
                          <p>
                            &nbsp; 脚本执行结果
                          </p>
                          
                          
                          <div>
                            <div class="cnblogs_code">
                              <pre>[root@clsn scripts]# <span style="color: #0000ff;">sh</span> break.<span style="color: #0000ff;">sh</span> 
    <span style="color: #800080;">1</span>
    <span style="color: #800080;">2</span><span style="color: #000000;">
    ok</span></pre>
                              
                            </div>
                            
                          </div>
                          
                          
                          <h3>
                            <span id="152_continue">1.5.2 continue命令说明</span>
                          </h3>
                          
                          
                          <div>
                            <div class="cnblogs_code">
                              <pre><span style="color: #000000;">[root@clsn scripts]# help continue 
continue: continue [n]
    继续 </span><span style="color: #0000ff;">for</span>、<span style="color: #0000ff;">while</span>、或 <span style="color: #0000ff;">until</span><span style="color: #000000;"> 循环。
    
    继续当前 FOR、WHILE 或 UNTIL 循环的下一步。
    如果指定了 N， 则继续当前的第 N 重循环。
    
    退出状态：
    退出状态为 </span><span style="color: #800080;"></span> 除非 N 不大于或等于1。</pre>
                              
                            </div>
                            
                          </div>
                          
                          
                          <p>
                            &nbsp; 测试脚本内容
                          </p>
                          
                          
                          <div>
                            <div class="cnblogs_code" onclick="cnblogs_code_show('543d7a8a-c947-488f-954e-036c818f4d4b')">
                              <img id="code_img_closed_543d7a8a-c947-488f-954e-036c818f4d4b" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_543d7a8a-c947-488f-954e-036c818f4d4b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('543d7a8a-c947-488f-954e-036c818f4d4b',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                              
                              
                              
                              <div id="cnblogs_code_open_543d7a8a-c947-488f-954e-036c818f4d4b" class="cnblogs_code_hide">
                                <pre><span style="color: #008080;"> 1</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">5</span><span style="color: #000000;">}
</span><span style="color: #008080;"> 3</span>       <span style="color: #0000ff;">do</span>
<span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">if</span> [ $i -eq <span style="color: #800080;">3</span><span style="color: #000000;"> ]
</span><span style="color: #008080;"> 5</span>           <span style="color: #0000ff;">then</span> 
<span style="color: #008080;"> 6</span> <span style="color: #000000;">            continue
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">fi</span>
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">done</span>
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">ok</span><span style="color: #800000;">"</span></pre>
                                
                              </div>
                              
                              
                              <p>
                                <span class="cnblogs_code_collapse">View Code continue 测试脚本</span></div>
                                </div>
                                
                                
                                <p>
                                  &nbsp; 脚本执行结果
                                </p>
                                
                                
                                <div>
                                  <div class="cnblogs_code">
                                    <pre>[root@clsn scripts]# <span style="color: #0000ff;">sh</span> continue.<span style="color: #0000ff;">sh</span> 
<span style="color: #800080;">1</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">4</span>
<span style="color: #800080;">5</span><span style="color: #000000;">
ok</span></pre>
                                    
                                  </div>
                                  
                                </div>
                                
                                
                                <h3>
                                  <span id="153_exit">1.5.3 exit命令说明</span>
                                </h3>
                                
                                
                                <div>
                                  <div class="cnblogs_code">
                                    <pre><span style="color: #000000;">[root@clsn scripts]# help exit
exit: exit [n]
    退出shell。
    
    以状态 N 退出 shell。  如果 N 被省略，则退出状态
    为最后一个执行的命令的退出状态。</span></pre>
                                    
                                  </div>
                                  
                                </div>
                                
                                
                                <p>
                                  &nbsp; 测试脚本内容
                                </p>
                                
                                
                                <div>
                                  <div class="cnblogs_code" onclick="cnblogs_code_show('c2ce9413-e0ad-4c5f-b136-8e3fb98d1f12')">
                                    <img id="code_img_closed_c2ce9413-e0ad-4c5f-b136-8e3fb98d1f12" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_c2ce9413-e0ad-4c5f-b136-8e3fb98d1f12" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c2ce9413-e0ad-4c5f-b136-8e3fb98d1f12',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                    
                                    
                                    
                                    <div id="cnblogs_code_open_c2ce9413-e0ad-4c5f-b136-8e3fb98d1f12" class="cnblogs_code_hide">
                                      <pre><span style="color: #008080;"> 1</span>     #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> {<span style="color: #800080;">1</span>..<span style="color: #800080;">5</span><span style="color: #000000;">}
</span><span style="color: #008080;"> 3</span>       <span style="color: #0000ff;">do</span>
<span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">if</span> [ $i -eq <span style="color: #800080;">3</span><span style="color: #000000;"> ]
</span><span style="color: #008080;"> 5</span>           <span style="color: #0000ff;">then</span> 
<span style="color: #008080;"> 6</span> <span style="color: #000000;">            exit
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">fi</span>
<span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">done</span>
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">ok</span><span style="color: #800000;">"</span></pre>
                                      
                                    </div>
                                    
                                    
                                    <p>
                                      <span class="cnblogs_code_collapse">View Code exit 测试脚本</span></div>
                                      </div>
                                      
                                      
                                      <p>
                                        &nbsp; 脚本执行结果
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>    [root@clsn scripts]# <span style="color: #0000ff;">sh</span> exit.<span style="color: #0000ff;">sh</span> 
    <span style="color: #800080;">1</span>
    <span style="color: #800080;">2</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h3>
                                        <span id="154_return">1.5.4 return命令说明</span>
                                      </h3>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre><span style="color: #000000;">[root@clsn tuichu]# help return 
return: return [n]
    从一个 shell 函数返回。
    
    使一个函数或者被引用的脚本以指定的返回值 N 退出。
    如果 N 被省略，则返回状态就是
    函数或脚本中的最后一个执行的命令的状态。
    
    退出状态：
    返回 N，或者如果 shell 不在执行一个函数或引用脚本时，失败。</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h2>
                                        <span id="16_shell">1.6 shell中的数组</span>
                                      </h2>
                                      
                                      
                                      <h3>
                                        <span id="161_Shell">1.6.1 为什么会产生Shell数组</span>
                                      </h3>
                                      
                                      
                                      <p>
                                        　　通常在开发Shell脚本时，定义变量采用的形式为&ldquo;a=l;b=2;C=3&rdquo;，可如果有多个 变量呢？这时再逐个地定义就会很费劲，并且要是有多个不确定的变量内容，也会难以 进行变量定义，此外，快速读取不同变量的值也是一件很痛苦的事情，于是数组就诞生 了，它就是为了解决上述问题而出现的。
                                      </p>
                                      
                                      
                                      <h3>
                                        <span id="162_Shell">1.6.2 什么是Shell数组</span>
                                      </h3>
                                      
                                      
                                      <p>
                                        　　Shell的数组就是一个元素集合，它把有限个元素（变量或字符内容）用一个名字来 命名，然后用编号对它们进行区分。这个名字就称为数组名，用于区分不同内容的编 号就称为数组下标。组成数组的各个元素（变量）称为数组的元素，有时也称为下标变量。
                                      </p>
                                      
                                      
                                      <h3>
                                        <span id="163">1.6.3 数组中的增删改查</span>
                                      </h3>
                                      
                                      
                                      <p>
                                        数组的定义
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre><span style="color: #000000;"># 定义数组
[root@clsn scripts]# stu</span>=(<span style="color: #800080;">001</span> <span style="color: #800080;">002</span> <span style="color: #800080;">003</span><span style="color: #000000;">)
# 打印数组
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${stu[@]}
</span><span style="color: #800080;">001</span> <span style="color: #800080;">002</span> <span style="color: #800080;">003</span><span style="color: #000000;">
# 显示数组长度
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${#stu}
</span><span style="color: #800080;">3</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        <strong><em>查: </em></strong><em>遍历数组的内容</em>
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre><span style="color: #000000;"># 打印数组内容（通过数组下标或索引）
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span> ${stu[<span style="color: #800080;"></span><span style="color: #000000;">]}
</span><span style="color: #800080;">001</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span> ${stu[<span style="color: #800080;">1</span><span style="color: #000000;">]}
</span><span style="color: #800080;">002</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span> ${stu[<span style="color: #800080;">2</span><span style="color: #000000;">]}
</span><span style="color: #800080;">003</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span> ${stu[<span style="color: #800080;">3</span><span style="color: #000000;">]}

<span style="background-color: #ffff00;"># 遍历数组</span>
  方法一
[root@clsn scripts]# </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> ${stu[@]};<span style="color: #0000ff;">do</span> <span style="color: #0000ff;">echo</span> $i ;<span style="color: #0000ff;">done</span> 
<span style="color: #800080;">001</span>
<span style="color: #800080;">002</span>
<span style="color: #800080;">003</span><span style="color: #000000;">
    # 方法二
[root@clsn scripts]# array</span>=(<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> <span style="color: #800080;">4</span> <span style="color: #800080;">5</span><span style="color: #000000;">)
[root@clsn scripts]# </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> `eval <span style="color: #0000ff;">echo</span> {<span style="color: #800080;">1</span>..${#array[@]}}`;<span style="color: #0000ff;">do</span> <span style="color: #0000ff;">echo</span> ${array[i-<span style="color: #800080;">1</span>]};<span style="color: #0000ff;">done</span>
<span style="color: #800080;">1</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">3</span>
<span style="color: #800080;">4</span>
<span style="color: #800080;">5</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        <strong><em>增</em></strong><em>：数组添加</em>
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>[root@clsn scripts]# stu[<span style="color: #800080;">3</span>]=<span style="color: #800080;">004</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${stu[@]}
</span><span style="color: #800080;">001</span> <span style="color: #800080;">002</span> <span style="color: #800080;">003</span> <span style="color: #800080;">004</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        <strong><em>改</em></strong>：<em>数组修改</em>
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>[root@clsn scripts]# stu[<span style="color: #800080;">2</span>]=<span style="color: #800080;">000</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${stu[@]}
</span><span style="color: #800080;">001</span> <span style="color: #800080;">002</span> <span style="color: #800080;">000</span> <span style="color: #800080;">004</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        <strong><em>删</em></strong>：<em>数组删除</em>
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>[root@clsn scripts]# unset stu[<span style="color: #800080;">2</span><span style="color: #000000;">]
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${#stu[@]}
</span><span style="color: #800080;">3</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${stu[@]}
</span><span style="color: #800080;">001</span> <span style="color: #800080;">002</span> <span style="color: #800080;">004</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h3>
                                        <span id="164">1.6.4 将命令的结果赋值给数组</span>
                                      </h3>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre><span style="color: #0000ff;">dir</span>=(`<span style="color: #0000ff;">ls</span><span style="color: #000000;">`)
</span><span style="color: #0000ff;">dir</span>=($(<span style="color: #0000ff;">ls</span>))</pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        命令定义数组
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>[root@clsn scripts]# COM=(`<span style="color: #0000ff;">ls</span><span style="color: #000000;">`)
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${COM[@]}
bianliang.</span><span style="color: #0000ff;">sh</span> <span style="color: #0000ff;">case</span> cfb.<span style="color: #0000ff;">sh</span> chanshu.<span style="color: #0000ff;">sh</span> check check_url.<span style="color: #0000ff;">sh</span> <br />clsn.<span style="color: #0000ff;">sh</span> clsn_test.<span style="color: #0000ff;">sh</span> daojishi.<span style="color: #0000ff;">sh</span> ddos_check.<span style="color: #0000ff;">sh</span> <span style="color: #0000ff;">echo</span>.<span style="color: #0000ff;">sh</span> <span style="color: #0000ff;">for</span> for2 fruits.<span style="color: #0000ff;">sh<br /></span><span style="color: #0000ff;">function</span> fz.<span style="color: #0000ff;">sh</span> html jingdutiao.<span style="color: #0000ff;">sh</span> jishuanqi2.<span style="color: #0000ff;">sh</span> jishuanqi.<span style="color: #0000ff;">sh</span> lamp.<span style="color: #0000ff;">sh</span> lnmp.<span style="color: #0000ff;">sh</span> <br />memcache_check.<span style="color: #0000ff;">sh</span> menu.<span style="color: #0000ff;">sh</span> nginx.<span style="color: #0000ff;">sh</span> panduan panduan1 play quanju.<span style="color: #0000ff;">sh</span> rsync_check.<span style="color: #0000ff;">sh</span> <br />rsyncd system6 tuichu web_check.<span style="color: #0000ff;">sh</span> web_view.<span style="color: #0000ff;">sh</span> <span style="color: #0000ff;">while</span> xiugaizhuji.<span style="color: #0000ff;">sh</span> yhk.<span style="color: #0000ff;">sh</span> yunshuan.<span style="color: #0000ff;">sh</span> <br />zhuajiu.<span style="color: #0000ff;">sh</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h3>
                                        <span id="161">1.6.1 数组定义格式</span>
                                      </h3>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre>[root@clsn scripts]# a=(<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span><span style="color: #000000;"> )
[root@clsn scripts]# b</span>=(<span style="color: #800080;">1</span>
> <span style="color: #800080;">2</span>
> <span style="color: #800080;">3</span>
> <span style="color: #800080;">4</span>
><span style="color: #000000;"> )
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${a[@]}
</span><span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span><span style="color: #000000;">
[root@clsn scripts]# </span><span style="color: #0000ff;">echo</span><span style="color: #000000;"> ${b[@]}
</span><span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">3</span> <span style="color: #800080;">4</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h3>
                                        <span id="162">1.6.2 数组的本质就是一个变量，只是这个变量存了多个值</span>
                                      </h3>
                                      
                                      
                                      <div>
                                        <p class="a4">
                                          在shell 常用的功能是查
                                        </p>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        　　　array=(valuel value2 value3 ...)
                                      </p>
                                      
                                      
                                      <p>
                                        <strong><em>打印数组格式</em></strong>
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code">
                                          <pre><span style="color: #000000;">${array[@]} 所有元素
${#array[@]}  数组长度
${array[i]}  单个元素，i是下标</span></pre>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <h3>
                                        <span id="163-2">1.6.3 【练习题】批量检查多个网站地址是否正常</span>
                                      </h3>
                                      
                                      
                                      <p>
                                        要求：
                                      </p>
                                      
                                      
                                      <p>
                                        　　1、<strong><span style="text-decoration: underline;">使用</span></strong><strong><span style="text-decoration: underline;">shell</span></strong><strong><span style="text-decoration: underline;">数组方法实现</span></strong>，检测策略尽量模拟用户访问。
                                      </p>
                                      
                                      
                                      <p>
                                        　　2、每10秒钟做一次所有的检测，无法访问的输出报警。
                                      </p>
                                      
                                      
                                      <p>
                                        　　3、待检测的地址如下
                                      </p>
                                      
                                      
                                      <div>
                                        <div style="mso-element: para-border-div; border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; mso-border-shadow: yes; background: #F2F2F2; mso-shading: windowtext; mso-pattern: gray-5 auto;">
                                          <p class="a">
                                            <span lang="EN-US">　　　　http://www.cnblogs.com/clsn/</span>
                                          </p>
                                          
                                          
                                          <p class="a">
                                            <span lang="EN-US">　　　　http://blog.znix.top</span>
                                          </p>
                                          
                                          
                                          <p class="a">
                                            <span lang="EN-US">　　　　http://blog.nmtui.com</span>
                                          </p>
                                          
                                          
                                          <p class="a">
                                            <span lang="EN-US">　　　　http://10.0.0.7</span>
                                          </p>
                                          
                                        </div>
                                        
                                      </div>
                                      
                                      
                                      <p>
                                        脚本内容：
                                      </p>
                                      
                                      
                                      <div>
                                        <div class="cnblogs_code" onclick="cnblogs_code_show('580d7ec8-e8d0-4650-b89f-31059a87e60a')">
                                          <img id="code_img_closed_580d7ec8-e8d0-4650-b89f-31059a87e60a" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_580d7ec8-e8d0-4650-b89f-31059a87e60a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('580d7ec8-e8d0-4650-b89f-31059a87e60a',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                          
                                          
                                          
                                          <div id="cnblogs_code_open_580d7ec8-e8d0-4650-b89f-31059a87e60a" class="cnblogs_code_hide">
                                            <pre><span style="color: #008080;"> 1</span> [root@clsn scripts]# <span style="color: #0000ff;">cat</span> check_url.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: check_url.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;">3</span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">10</span>:<span style="color: #800080;">44</span>:<span style="color: #800080;">39</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> url=<span style="color: #000000;">(
</span><span style="color: #008080;">12</span> http:<span style="color: #008000;">//</span><span style="color: #008000;">www.cnblogs.com/clsn/</span>
<span style="color: #008080;">13</span> http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;">14</span> http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.nmtui.com</span>
<span style="color: #008080;">15</span> http:<span style="color: #008000;">//</span><span style="color: #008000;">10.0.0.7</span>
<span style="color: #008080;">16</span> <span style="color: #000000;">)
</span><span style="color: #008080;">17</span> <span style="color: #0000ff;">while</span> <span style="color: #0000ff;">true</span> 
<span style="color: #008080;">18</span>   <span style="color: #0000ff;">do</span>
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> ${url[@]} 
</span><span style="color: #008080;">20</span>       <span style="color: #0000ff;">do</span> 
<span style="color: #008080;">21</span>       #curl $i &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">22</span>       a=$(curl -I -<span style="color: #0000ff;">w</span> <span style="color: #800000;">"</span><span style="color: #800000;">%{http_code}\n</span><span style="color: #800000;">"</span> -o /dev/<span style="color: #0000ff;">null</span> -<span style="color: #000000;">s $i)
</span><span style="color: #008080;">23</span>       <span style="color: #0000ff;">if</span> [ $a -ne <span style="color: #800080;">200</span><span style="color: #000000;"> ]
</span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">then</span>
<span style="color: #008080;">25</span>           <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$url 异常</span><span style="color: #800000;">"</span>
<span style="color: #008080;">26</span>       <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">done</span>
<span style="color: #008080;">28</span>     <span style="color: #0000ff;">sleep</span> <span style="color: #800080;">10</span>
<span style="color: #008080;">29</span> <span style="color: #0000ff;">done</span></pre>
                                            
                                          </div>
                                          
                                          
                                          <p>
                                            <span class="cnblogs_code_collapse">View Code 批量检查多个网站地址是否正常</span></div>
                                            </div>
                                            
                                            
                                            <h2>
                                              <span id="17_Shell">1.7 Shell 函数</span>
                                            </h2>
                                            
                                            
                                            <p>
                                              　　shell一个非常重要的特性是它可作为一种编程语言来使用。因为shell是一个解释器，所以它不能对为它编写的程序进行编译，而是在每次从磁盘加载这些程序时对它们进行解释。而程序的加载和解释都是非常耗时的。
                                            </p>
                                            
                                            
                                            <p>
                                              &nbsp;　　针对此问题，许多shell（如BourneAgainShell）都包含shell函数，shell把这些函数放在内存中，这样每次需要执行它们时就不必再从磁盘读入。shell还以一种内部格式来存放这些函数，这样就不必耗费大量的时间来解释它们。
                                            </p>
                                            
                                            
                                            <p>
                                              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>函数的作用</strong>就是把程序里多次调用相同代码的部分定义成一份，然后起个名字，所有的调用都 只用这名字就可以了，修改代码时，只需要改变函数体内的代码即可。
                                            </p>
                                            
                                            
                                            <h3>
                                              <span id="171">1.7.1 使用函数的优势</span>
                                            </h3>
                                            
                                            
                                            <p>
                                              &nbsp;　　? 把相同的程序段定义成函数，可以减少代码量。
                                            </p>
                                            
                                            
                                            <p>
                                              &nbsp;　　? 增加程序的可读、易读性
                                            </p>
                                            
                                            
                                            <p>
                                              &nbsp;　　? 实现程序功能的模块化
                                            </p>
                                            
                                            
                                            <h3>
                                              <span id="172">1.7.2 定义函数</span>
                                            </h3>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre><span style="color: #0000ff;">function</span><span style="color: #000000;"> clsn(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">http://blog.znix.top</span><span style="color: #800000;">"</span><span style="color: #000000;">
}

znix(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">http://www.znix.top </span><span style="color: #800000;">"</span><span style="color: #000000;"> 
}</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <p>
                                              <strong>说明：</strong>
                                            </p>
                                            
                                            
                                            <p>
                                              　　1、可以带function clsn() 定义，也可以直接clsn() 定义,不带任何参数。
                                            </p>
                                            
                                            
                                            <p>
                                              　　2、参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)
                                            </p>
                                            
                                            
                                            <p>
                                              　　3、执行函数就是将函数名放到定义的函数之后即可
                                            </p>
                                            
                                            
                                            <p>
                                              <em><span style="text-decoration: underline;">将函数加载到当前窗口执行：</span></em>
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# . fun1.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
[root@clsn </span><span style="color: #0000ff;">function</span><span style="color: #000000;">]# zn
</span><span style="color: #0000ff;">znew</span><span style="color: #000000;">  znix  
[root@clsn </span><span style="color: #0000ff;">function</span><span style="color: #000000;">]# znix 
test
[root@clsn </span><span style="color: #0000ff;">function</span><span style="color: #000000;">]# clsn 
http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <h3>
                                              <span id="173">1.7.3 引用函数</span>
                                            </h3>
                                            
                                            
                                            <p>
                                              脚本内容
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">cat</span>  fun2.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: fun2.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">19</span>:<span style="color: #800080;">25</span>:<span style="color: #800080;">56</span><span style="color: #000000;">
# Description:
#############################################################
Fun_File</span>=/server/scripts/<span style="color: #0000ff;">function</span>/fun1.<span style="color: #0000ff;">sh</span><span style="color: #000000;">
[ </span>-f $Fun_File ] &&<span style="color: #000000;"> . $Fun_File
clsn</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <p>
                                              脚本执行结果
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">sh</span>  fun2.<span style="color: #0000ff;">sh</span><span style="color: #000000;">
http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <h3>
                                              <span id="174">1.7.4 函数传参</span>
                                            </h3>
                                            
                                            
                                            <p>
                                              脚本内容：
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">cat</span> fun3.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: fun3.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">09</span>:<span style="color: #800080;">38</span>:<span style="color: #800080;">48</span><span style="color: #000000;">
# Description:
#############################################################

</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> clsn(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">Hi </span><span style="color: #800000;">"</span><span style="color: #000000;">
}
CLSN(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">Hello </span><span style="color: #800000;">"</span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;"></span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;">1</span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;">2</span><span style="color: #000000;">

}
clsn
CLSN xi  xi </span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <p>
                                              脚本执行结果
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">sh</span> fun3.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
Hi 
Hello 
fun3.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
xi
xi</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <h3>
                                              <span id="175_0">1.7.5 $0 永远的脚本名称</span>
                                            </h3>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre><span style="color: #0000ff;">function</span><span style="color: #000000;"> clsn(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">http://blog.znix.top $1 $2</span><span style="color: #800000;">"</span>
    <span style="color: #0000ff;">echo</span> $<span style="color: #800080;"></span><span style="color: #000000;">
}

znix(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">test</span><span style="color: #800000;">"</span><span style="color: #000000;"> 
}
clsn $</span><span style="color: #800080;">1</span> $<span style="color: #800080;">2</span></pre>
                                                
                                              </div>
                                              
                                              
                                              <p class="ad">
                                                执行结果
                                              </p>
                                              
                                              
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">sh</span>  fun1.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top  </span>
fun1.<span style="color: #0000ff;">sh</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <h3>
                                              <span id="176_return">1.7.6 函数中return的用法</span>
                                            </h3>
                                            
                                            
                                            <p>
                                              脚本内容：
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">cat</span>  fun3.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: fun3.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">09</span>:<span style="color: #800080;">38</span>:<span style="color: #800080;">48</span><span style="color: #000000;">
# Description:
#############################################################

</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> clsn(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">Hi </span><span style="color: #800000;">"</span><span style="color: #000000;">
}
CLSN(){
    </span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">Hello </span><span style="color: #800000;">"</span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;"></span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;">1</span>
    <span style="color: #0000ff;">echo</span>  $<span style="color: #800080;">2</span><span style="color: #000000;">
    return </span><span style="color: #800080;">4</span>
    <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">xxixiixxiix</span><span style="color: #800000;">"</span><span style="color: #000000;">

}
clsn
CLSN xi  xi 
</span><span style="color: #0000ff;">echo</span> $?</pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <p>
                                              脚本执行结果
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">sh</span> fun3.<span style="color: #0000ff;">sh</span><span style="color: #000000;">
Hi 
Hello 
fun3.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
xi
xi
</span><span style="color: #800080;">4</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <p>
                                              return命令说明：
                                            </p>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code">
                                                <pre>[root@clsn <span style="color: #0000ff;">function</span><span style="color: #000000;">]# help return 
return: return [n]
    从一个 shell 函数返回。
    
    使一个函数或者被引用的脚本以指定的返回值 N 退出。
    如果 N 被省略，则返回状态就是
    函数或脚本中的最后一个执行的命令的状态。
    
    退出状态：
    返回 N，或者如果 shell 不在执行一个函数或引用脚本时，失败。</span></pre>
                                                
                                              </div>
                                              
                                            </div>
                                            
                                            
                                            <h3>
                                              <span id="177">1.7.7 自定义常用函数库</span>
                                            </h3>
                                            
                                            
                                            <div>
                                              <div class="cnblogs_code" onclick="cnblogs_code_show('c9c337d8-ab2d-4c10-a278-51f8c2c771bf')">
                                                <img id="code_img_closed_c9c337d8-ab2d-4c10-a278-51f8c2c771bf" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_c9c337d8-ab2d-4c10-a278-51f8c2c771bf" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c9c337d8-ab2d-4c10-a278-51f8c2c771bf',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                                
                                                
                                                
                                                <div id="cnblogs_code_open_c9c337d8-ab2d-4c10-a278-51f8c2c771bf" class="cnblogs_code_hide">
                                                  <pre><span style="color: #008080;"> 1</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 3</span> # File Name: /server/scripts/userfun.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 4</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 5</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 6</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 7</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">10</span>:<span style="color: #800080;">40</span>:<span style="color: #800080;">04</span>
<span style="color: #008080;"> 8</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #000000;"># 脚本初始化
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> scripts_init(){
</span><span style="color: #008080;">13</span>   prog=`<span style="color: #0000ff;">basename</span> $<span style="color: #800080;"></span> .<span style="color: #0000ff;">sh</span><span style="color: #000000;">`
</span><span style="color: #008080;">14</span>   LockFile=/var/lock/subsys/<span style="color: #000000;">${prog}.lock  # 使用锁文件
</span><span style="color: #008080;">15</span>   LogFile=/var/log/<span style="color: #000000;">${prog}.log  # 脚本记录日志
</span><span style="color: #008080;">16</span>   PidFile=/var/run/<span style="color: #000000;">${prog}.pid  # 记录进程号，可以管理脚本
</span><span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span>   [ -f $LockFile ] && <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">There $LockFile is exist!!</span><span style="color: #800000;">"</span> && exit <span style="color: #800080;">1</span> ||<span style="color: #0000ff;">touch</span><span style="color: #000000;"> $LockFile
</span><span style="color: #008080;">19</span>   [ ! -f $LogFile ] && <span style="color: #0000ff;">touch</span><span style="color: #000000;"> $LogFile
</span><span style="color: #008080;">20</span>   [ -f $PidFile ] && <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">There $PidFile is exist!!</span><span style="color: #800000;">"</span> && exit <span style="color: #800080;">2</span>|| <span style="color: #0000ff;">echo</span> $$ ><span style="color: #000000;"> $PidFile
</span><span style="color: #008080;">21</span> <span style="color: #000000;">}
</span><span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> <span style="color: #000000;"># 记录日志
</span><span style="color: #008080;">24</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> writelog(){
</span><span style="color: #008080;">25</span>   Date=$(<span style="color: #0000ff;">date</span> <span style="color: #800000;">"</span><span style="color: #800000;">+%F_%T</span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">26</span>   ShellName=`<span style="color: #0000ff;">basename</span> $<span style="color: #800080;"></span><span style="color: #000000;">`
</span><span style="color: #008080;">27</span>   Info=$<span style="color: #800080;">1</span>
<span style="color: #008080;">28</span>   <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$Date : ${ShellName} : ${Info}</span><span style="color: #800000;">"</span> >><span style="color: #000000;"> ${LogFile}
</span><span style="color: #008080;">29</span> <span style="color: #000000;">}
</span><span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span> <span style="color: #000000;"># 脚本退出扫尾
</span><span style="color: #008080;">32</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> closeout(){
</span><span style="color: #008080;">33</span>   [ -f $LockFile ] && <span style="color: #0000ff;">rm</span> -<span style="color: #000000;">f $LockFile 
</span><span style="color: #008080;">34</span>   [ -f $PidFile ]&& <span style="color: #0000ff;">rm</span> -<span style="color: #000000;">f $PidFile
</span><span style="color: #008080;">35</span> <span style="color: #000000;">}
</span><span style="color: #008080;">36</span> 
<span style="color: #008080;">37</span> <span style="color: #000000;"># 判断输入是整数
</span><span style="color: #008080;">38</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> int_judge(){
</span><span style="color: #008080;">39</span>   fun_a=$<span style="color: #800080;">1</span>
<span style="color: #008080;">40</span>   <span style="color: #0000ff;">expr</span> $fun_a + <span style="color: #800080;">1</span> &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">41</span>   RETVAL=$?
<span style="color: #008080;">42</span> <span style="color: #000000;">  return $RETVAL
</span><span style="color: #008080;">43</span> <span style="color: #000000;">}
</span><span style="color: #008080;">44</span> 
<span style="color: #008080;">45</span> <span style="color: #000000;"># 判断输入非空
</span><span style="color: #008080;">46</span> <span style="color: #0000ff;">function</span><span style="color: #000000;"> input_judge(){
</span><span style="color: #008080;">47</span>   RETVAL=<span style="color: #800080;"></span>
<span style="color: #008080;">48</span>   fun_a=$<span style="color: #800080;">1</span>
<span style="color: #008080;">49</span>   [ ${#fun_a} -eq <span style="color: #800080;"></span> ]&& RETVAL=<span style="color: #800080;">1</span>
<span style="color: #008080;">50</span> <span style="color: #000000;">  return $RETVAL
</span><span style="color: #008080;">51</span> }</pre>
                                                  
                                                </div>
                                                
                                                
                                                <p>
                                                  <span class="cnblogs_code_collapse">View Code 自定义函数库脚本</span></div>
                                                  
                                                  
                                                  <p class="ad">
                                                    basename命令
                                                  </p>
                                                  </div>
                                                  
                                                  
                                                  <p>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 取出文件名称
                                                  </p>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">basename</span> /server/scripts/zhuajiu.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
zhuajiu.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
[root@clsn </span><span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">basename</span> /server/scripts/zhuajiu.<span style="color: #0000ff;">sh</span>  .<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
zhuajiu</span></pre>
                                                      
                                                    </div>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <p>
                                                    $$ 参数
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 取出脚本运行时的pid, 脚本运行的当前进程ID号
                                                  </p>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $$
</span><span style="color: #800080;">37208</span><span style="color: #000000;">
[root@clsn </span><span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span> <span style="color: #800080;">37208</span><span style="color: #000000;">
root      </span><span style="color: #800080;">37208</span>  <span style="color: #800080;">37206</span>  <span style="color: #800080;"></span> <span style="color: #800080;">08</span>:<span style="color: #800080;">39</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> -<span style="color: #000000;">bash
root      </span><span style="color: #800080;">38578</span>  <span style="color: #800080;">37208</span>  <span style="color: #800080;">1</span> <span style="color: #800080;">10</span>:<span style="color: #800080;">33</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">ps</span> -<span style="color: #000000;">ef
root      </span><span style="color: #800080;">38579</span>  <span style="color: #800080;">37208</span>  <span style="color: #800080;"></span> <span style="color: #800080;">10</span>:<span style="color: #800080;">33</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">grep</span> --color=auto <span style="color: #800080;">37208</span></pre>
                                                      
                                                    </div>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <p>
                                                    <em><span style="text-decoration: underline;">引用自定义函数库示例： </span></em>
                                                  </p>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre>[root@clsn <span style="color: #0000ff;">function</span>]# <span style="color: #0000ff;">head</span> -<span style="color: #800080;">22</span>  fun3.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: fun3.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">09</span>:<span style="color: #800080;">38</span>:<span style="color: #800080;">48</span><span style="color: #000000;">
# Description:
#############################################################

. </span>/server/scripts/userfun.<span style="color: #0000ff;">sh</span><span style="color: #000000;">

scripts_init 
i</span>=<span style="color: #800080;">1</span>
<span style="color: #0000ff;">while</span> ((i&lt;=<span style="color: #800080;">10</span><span style="color: #000000;">))
  </span><span style="color: #0000ff;">do</span> 
   <span style="color: #0000ff;">uptime</span><span style="color: #000000;">
   ((i</span>++<span style="color: #000000;">))
   </span><span style="color: #0000ff;">sleep</span> <span style="color: #800080;">1</span>
<span style="color: #0000ff;">done</span><span style="color: #000000;">
closeout</span></pre>
                                                      
                                                    </div>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <h2>
                                                    <span id="18_shell">1.8 shell脚本的调试</span>
                                                  </h2>
                                                  
                                                  
                                                  <h3>
                                                    <span id="181">1.8.1 脚本调试技巧</span>
                                                  </h3>
                                                  
                                                  
                                                  <p>
                                                    　　调试技巧1：使用dos2unix处理脚本
                                                  </p>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre><span style="color: #000000;">从windows编辑的脚本到Linux下需要使用这个命令
dos2unix windows.</span><span style="color: #0000ff;">sh</span></pre>
                                                      
                                                    </div>
                                                    
                                                    
                                                    <p>
                                                      　　调试技巧2：使用echo命令调试
                                                    </p>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre>在变量读取或修改的前后加入echo $变量，也可在后面使用exit退出脚本，这样可以不用注释后面的代码</pre>
                                                      
                                                    </div>
                                                    
                                                    
                                                    <p>
                                                      　　调试技巧3：sh -x 脚本&nbsp; ==》全局调试
                                                    </p>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre><span style="color: #0000ff;">sh</span> -x  scripts.<span style="color: #0000ff;">sh</span></pre>
                                                      
                                                    </div>
                                                    
                                                    
                                                    <p>
                                                      　　调试技巧4：局部调试
                                                    </p>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code">
                                                      <pre>set -<span style="color: #000000;">x
要调试的脚本内容
set </span>+x</pre>
                                                      
                                                    </div>
                                                    
                                                  </div>
                                                  
                                                  
                                                  <h3>
                                                    <span id="182_Shell">1.8.2 Shell调试技巧小结</span>
                                                  </h3>
                                                  
                                                  
                                                  <p>
                                                    　　①要记得首先用<span style="background-color: #ffff00;">dos2unix</span>对脚本格式化。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　②直接执行脚本根据报错来调试，有时报错不准确。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　③<span style="background-color: #ffff00;">sh -x</span>调试整个脚本，显示执行过程。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　④<span style="background-color: #ffff00;">set -x和set +x</span>调试部分脚本（在脚本中设置）
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　⑤<span style="background-color: #ffff00;">echo</span>输出变量及相关内容，然后紧跟着exit退出，不执行后面程序的方式，一步步跟踪脚本，对于逻辑错误比较好用。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　　　&nbsp;&nbsp; 写法：&nbsp;<span class="cnblogs_code"><span style="color: #0000ff;">echo</span> $var;exit</span>&nbsp;
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　⑥最关键的是语法熟练、编码习惯、编程思想，将错误扼杀在萌芽之中，减轻调试负担，提高效率。
                                                  </p>
                                                  
                                                  
                                                  <h2>
                                                    <span id="19_shell">1.9 shell编程练习题</span>
                                                  </h2>
                                                  
                                                  
                                                  <h3>
                                                    <span id="191_1shell">1.9.1 【练习题1】shell实现抓阄程序</span>
                                                  </h3>
                                                  
                                                  
                                                  <p>
                                                    需要使用shell编写一个抓阄的程序：
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    <em><span style="text-decoration: underline;">要求：</span></em>
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　1、执行脚本后，输入英文名字全拼，产生随机数01-99之间的数字，数字越大评分就去高，前面已经抓到的数字，下次不能在出现相同数字。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    　　2、第一个输入名字后，屏幕输出信息，并将名字和数字记录到文件里，程序不能退出继续等待别人输入。
                                                  </p>
                                                  
                                                  
                                                  <p>
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容：
                                                  </p>
                                                  
                                                  
                                                  <div>
                                                    <div class="cnblogs_code" onclick="cnblogs_code_show('4e5024e2-00ba-4491-b548-559fa4bdc44d')">
                                                      <img id="code_img_closed_4e5024e2-00ba-4491-b548-559fa4bdc44d" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_4e5024e2-00ba-4491-b548-559fa4bdc44d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4e5024e2-00ba-4491-b548-559fa4bdc44d',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                                      
                                                      
                                                      
                                                      <div id="cnblogs_code_open_4e5024e2-00ba-4491-b548-559fa4bdc44d" class="cnblogs_code_hide">
                                                        <pre><span style="color: #008080;"> 1</span> [root@clsn scripts]# <span style="color: #0000ff;">cat</span> zhuajiu.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: zhuajiu.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">10</span> <span style="color: #800080;">15</span>:<span style="color: #800080;">21</span>:<span style="color: #800080;">27</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> Randow_Temp=/tmp/<span style="color: #000000;">randow.test
</span><span style="color: #008080;">12</span> name_Out_File1=/tmp/<span style="color: #000000;">name_Out_File1.test
</span><span style="color: #008080;">13</span> name_Out_File2=/tmp/<span style="color: #000000;">name_Out_File2.test
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> ><span style="color: #000000;">$name_Out_File1
</span><span style="color: #008080;">16</span> ><span style="color: #000000;">$name_Out_File2
</span><span style="color: #008080;">17</span> ><span style="color: #000000;">$Randow_Temp
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> trap <span style="color: #800000;">'</span><span style="color: #800000;">echo "请勿使用 Ctrl+c"</span><span style="color: #800000;">'</span> <span style="color: #800080;">2</span>
<span style="color: #008080;">20</span> 
<span style="color: #008080;">21</span> <span style="color: #000000;">Randow() {
</span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">sum</span>=`<span style="color: #0000ff;">echo</span> $RANDOM |<span style="color: #0000ff;">cut</span> -c-<span style="color: #800080;">2</span><span style="color: #000000;">`
</span><span style="color: #008080;">23</span>     <span style="color: #0000ff;">grep</span> $<span style="color: #0000ff;">sum</span><span style="color: #000000;">  $Randow_Temp
</span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">if</span> [ $? -eq <span style="color: #800080;"></span> ];<span style="color: #0000ff;">then</span>
<span style="color: #008080;">25</span> <span style="color: #000000;">      Randow
</span><span style="color: #008080;">26</span>     <span style="color: #0000ff;">else</span>
<span style="color: #008080;">27</span>       <span style="color: #0000ff;">echo</span> $<span style="color: #0000ff;">sum</span> >><span style="color: #000000;">$Randow_Temp
</span><span style="color: #008080;">28</span>       daxiao=$<span style="color: #0000ff;">sum</span>
<span style="color: #008080;">29</span>     <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">30</span> <span style="color: #000000;">}
</span><span style="color: #008080;">31</span> 
<span style="color: #008080;">32</span> <span style="color: #000000;">Print() {
</span><span style="color: #008080;">33</span>     read -p <span style="color: #800000;">"</span><span style="color: #800000;">请输入名字的拼音：</span><span style="color: #800000;">"</span><span style="color: #000000;"> Name 
</span><span style="color: #008080;">34</span> <span style="color: #000000;">    Randow
</span><span style="color: #008080;">35</span>     <span style="color: #0000ff;">echo</span> $Name $daxiao >><span style="color: #000000;">$name_Out_File
</span><span style="color: #008080;">36</span> <span style="color: #000000;">}
</span><span style="color: #008080;">37</span> 
<span style="color: #008080;">38</span> <span style="color: #0000ff;">while</span> <span style="color: #0000ff;">true</span>
<span style="color: #008080;">39</span> <span style="color: #0000ff;">do</span>
<span style="color: #008080;">40</span>    <span style="color: #0000ff;">clear</span>
<span style="color: #008080;">41</span>    <span style="color: #0000ff;">echo</span> <span style="color: #800000;">""</span>
<span style="color: #008080;">42</span>    <span style="color: #0000ff;">echo</span> -e  <span style="color: #800000;">"</span><span style="color: #800000;">\033[32m        这个程序会将随机数字排名前三的同学显示出来！\033[0m</span><span style="color: #800000;">"</span>
<span style="color: #008080;">43</span>    <span style="color: #0000ff;">echo</span> -e  <span style="color: #800000;">"</span><span style="color: #800000;">\033[31m                     退出脚本请使用 'exit' \033[0m</span><span style="color: #800000;">"</span> 
<span style="color: #008080;">44</span>    <span style="color: #0000ff;">echo</span> <span style="color: #800000;">""</span>
<span style="color: #008080;">45</span>    <span style="color: #0000ff;">head</span> -<span style="color: #800080;">4</span><span style="color: #000000;"> $name_Out_File2
</span><span style="color: #008080;">46</span>    read -p <span style="color: #800000;">"</span><span style="color: #800000;">请输入名字的拼音：</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">Name</span><span style="color: #800000;">"</span>
<span style="color: #008080;">47</span>       <span style="color: #0000ff;">if</span> [ <span style="color: #800000;">"</span><span style="color: #800000;">$Name</span><span style="color: #800000;">"</span> ==<span style="color: #000000;"> exit ]
</span><span style="color: #008080;">48</span>         <span style="color: #0000ff;">then</span> 
<span style="color: #008080;">49</span> <span style="color: #000000;">          exit
</span><span style="color: #008080;">50</span>       <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">51</span> <span style="color: #000000;">   Randow
</span><span style="color: #008080;">52</span>    <span style="color: #0000ff;">echo</span>  $daxiao $Name >><span style="color: #000000;">$name_Out_File1
</span><span style="color: #008080;">53</span>    <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">随机数最大的三位同学是：</span><span style="color: #800000;">"</span>  ><span style="color: #000000;">$name_Out_File2
</span><span style="color: #008080;">54</span>    <span style="color: #0000ff;">sort</span> -k1 -r $name_Out_File1 |column  -t >><span style="color: #000000;">$name_Out_File2
</span><span style="color: #008080;">55</span>    <span style="color: #0000ff;">clear</span>
<span style="color: #008080;">56</span> <span style="color: #0000ff;">done</span></pre>
                                                        
                                                      </div>
                                                      
                                                      
                                                      <p>
                                                        <span class="cnblogs_code_collapse">View Code 抓阄程序 脚本</span></div>
                                                        </div>
                                                        
                                                        
                                                        <p>
                                                          脚本执行过程
                                                        </p>
                                                        
                                                        
                                                        <p align="center">
                                                          <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212155426379-987435185.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
                                                        </p>
                                                        
                                                        
                                                        
                                                        <h3>
                                                          <span id="192_29x9">1.9.2 【练习题2】输出9x9 乘法表</span>
                                                        </h3>
                                                        
                                                        
                                                        <p>
                                                          脚本内容：
                                                        </p>
                                                        
                                                        
                                                        <div>
                                                          <div class="cnblogs_code" onclick="cnblogs_code_show('636b9275-9dcc-4e5b-accf-0d4e96c72b76')">
                                                            <img id="code_img_closed_636b9275-9dcc-4e5b-accf-0d4e96c72b76" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_636b9275-9dcc-4e5b-accf-0d4e96c72b76" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('636b9275-9dcc-4e5b-accf-0d4e96c72b76',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                                            
                                                            
                                                            
                                                            <div id="cnblogs_code_open_636b9275-9dcc-4e5b-accf-0d4e96c72b76" class="cnblogs_code_hide">
                                                              <pre><span style="color: #008080;"> 1</span> [root@clsn scripts]# <span style="color: #0000ff;">cat</span> cfb.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: cfb.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">15</span>:<span style="color: #800080;">40</span>:<span style="color: #800080;">03</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">for</span> a <span style="color: #0000ff;">in</span> `<span style="color: #0000ff;">seq</span> <span style="color: #800080;">1</span> <span style="color: #800080;">9</span><span style="color: #000000;">`
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">do</span>
<span style="color: #008080;">13</span>         <span style="color: #0000ff;">for</span> b <span style="color: #0000ff;">in</span> `<span style="color: #0000ff;">seq</span> <span style="color: #800080;">1</span> <span style="color: #800080;">9</span><span style="color: #000000;">`
</span><span style="color: #008080;">14</span>         <span style="color: #0000ff;">do</span>
<span style="color: #008080;">15</span>                 <span style="color: #0000ff;">if</span> [ $a -<span style="color: #000000;">ge $b ]
</span><span style="color: #008080;">16</span>                 <span style="color: #0000ff;">then</span>
<span style="color: #008080;">17</span>                         <span style="color: #0000ff;">echo</span> -en <span style="color: #800000;">"</span><span style="color: #800000;">$a x $b = $(expr $a \* $b)  </span><span style="color: #800000;">"</span>
<span style="color: #008080;">18</span>  
<span style="color: #008080;">19</span>                 <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">20</span>         <span style="color: #0000ff;">done</span>
<span style="color: #008080;">21</span> <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span> <span style="color: #800000;">"</span>
<span style="color: #008080;">22</span> <span style="color: #0000ff;">done</span></pre>
                                                              
                                                            </div>
                                                            
                                                            
                                                            <p>
                                                              <span class="cnblogs_code_collapse">View Code 九九乘法表</span></div>
                                                              </div>
                                                              
                                                              
                                                              <p>
                                                                执行结果
                                                              </p>
                                                              
                                                              
                                                              <div>
                                                                <div class="cnblogs_code">
                                                                  <pre>[root@clsn scripts]# <span style="color: #0000ff;">sh</span>  cfb.<span style="color: #0000ff;">sh</span> 
<span style="color: #800080;">1</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">1</span>   
<span style="color: #800080;">2</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">2</span>  <span style="color: #800080;">2</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">4</span>   
<span style="color: #800080;">3</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">3</span>  <span style="color: #800080;">3</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">6</span>  <span style="color: #800080;">3</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">9</span>   
<span style="color: #800080;">4</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">4</span>  <span style="color: #800080;">4</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">8</span>  <span style="color: #800080;">4</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">12</span>  <span style="color: #800080;">4</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">16</span>   
<span style="color: #800080;">5</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">5</span>  <span style="color: #800080;">5</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">10</span>  <span style="color: #800080;">5</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">15</span>  <span style="color: #800080;">5</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">20</span>  <span style="color: #800080;">5</span> x <span style="color: #800080;">5</span> = <span style="color: #800080;">25</span>   
<span style="color: #800080;">6</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">6</span>  <span style="color: #800080;">6</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">12</span>  <span style="color: #800080;">6</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">18</span>  <span style="color: #800080;">6</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">24</span>  <span style="color: #800080;">6</span> x <span style="color: #800080;">5</span> = <span style="color: #800080;">30</span>  <span style="color: #800080;">6</span> x <span style="color: #800080;">6</span> = <span style="color: #800080;">36</span>   
<span style="color: #800080;">7</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">7</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">14</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">21</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">28</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">5</span> = <span style="color: #800080;">35</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">6</span> = <span style="color: #800080;">42</span>  <span style="color: #800080;">7</span> x <span style="color: #800080;">7</span> = <span style="color: #800080;">49</span>   
<span style="color: #800080;">8</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">8</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">16</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">24</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">32</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">5</span> = <span style="color: #800080;">40</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">6</span> = <span style="color: #800080;">48</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">7</span> = <span style="color: #800080;">56</span>  <span style="color: #800080;">8</span> x <span style="color: #800080;">8</span> = <span style="color: #800080;">64</span>   
<span style="color: #800080;">9</span> x <span style="color: #800080;">1</span> = <span style="color: #800080;">9</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">2</span> = <span style="color: #800080;">18</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">3</span> = <span style="color: #800080;">27</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">4</span> = <span style="color: #800080;">36</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">5</span> = <span style="color: #800080;">45</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">6</span> = <span style="color: #800080;">54</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">7</span> = <span style="color: #800080;">63</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">8</span> = <span style="color: #800080;">72</span>  <span style="color: #800080;">9</span> x <span style="color: #800080;">9</span> = <span style="color: #800080;">81</span></pre>
                                                                  
                                                                </div>
                                                                
                                                              </div>
                                                              
                                                              
                                                              <h3>
                                                                <span id="193_3dDOS">1.9.3 【练习题3】解决dDOS攻击生产案例</span>
                                                              </h3>
                                                              
                                                              
                                                              <p>
                                                                　　写一个Shell脚本解决DOS攻击生产案例。
                                                              </p>
                                                              
                                                              
                                                              <p>
                                                                　　请根据web日志或者或者网络连接数，监控当某个IP并发连接数或者短时内PV达到100（读者根据实际情况设定），即调用防火墙命令封掉对应的IP。防火墙命令为：iptables-I INPUT -s IP地址 -j DROP。
                                                              </p>
                                                              
                                                              
                                                              <p>
                                                                练习使用日志下载地址：<em>https://files.cnblogs.com/files/clsn/access-web-log.zip</em>
                                                              </p>
                                                              
                                                              
                                                              <p>
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容:
                                                              </p>
                                                              
                                                              
                                                              <div>
                                                                <div class="cnblogs_code" onclick="cnblogs_code_show('53e446a8-8397-40a4-bf4d-2e9f6f9628fc')">
                                                                  <img id="code_img_closed_53e446a8-8397-40a4-bf4d-2e9f6f9628fc" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_53e446a8-8397-40a4-bf4d-2e9f6f9628fc" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('53e446a8-8397-40a4-bf4d-2e9f6f9628fc',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                                                  
                                                                  
                                                                  
                                                                  <div id="cnblogs_code_open_53e446a8-8397-40a4-bf4d-2e9f6f9628fc" class="cnblogs_code_hide">
                                                                    <pre><span style="color: #008080;"> 1</span> [root@clsn <span style="color: #0000ff;">while</span>]# <span style="color: #0000ff;">cat</span> ddos_check.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: ddos_check.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">10</span> <span style="color: #800080;">12</span>:<span style="color: #800080;">34</span>:<span style="color: #800080;">15</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Info_File=/tmp/<span style="color: #000000;">ddos_check.log
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> <span style="color: #000000;">#从连接数获取
</span><span style="color: #008080;">15</span> #netstat -lant|<span style="color: #0000ff;">awk</span> -F <span style="color: #800000;">"</span><span style="color: #800000;">[ :]+</span><span style="color: #800000;">"</span> <span style="color: #800000;">'</span><span style="color: #800000;">/180:80/{clsn[$6]++}END{for(pol in clsn)print pol,clsn[pol]}</span><span style="color: #800000;">'</span> ><span style="color: #000000;">$Info_File
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> <span style="color: #000000;"># 从日志获取
</span><span style="color: #008080;">18</span> <span style="color: #0000ff;">awk</span> <span style="color: #800000;">'</span><span style="color: #800000;">{hotel[$1]++}END{for(pol in hotel)print pol,hotel[pol]}</span><span style="color: #800000;">'</span> access.log|<span style="color: #0000ff;">sort</span> -nk2  -r  ><span style="color: #000000;">$Info_File
</span><span style="color: #008080;">19</span> 
<span style="color: #008080;">20</span> <span style="color: #0000ff;">while</span><span style="color: #000000;"> read line 
</span><span style="color: #008080;">21</span> <span style="color: #0000ff;">do</span> 
<span style="color: #008080;">22</span>     Ip_Add=`<span style="color: #0000ff;">echo</span> $line |<span style="color: #0000ff;">awk</span> <span style="color: #800000;">'</span><span style="color: #800000;">{print $1}</span><span style="color: #800000;">'</span><span style="color: #000000;">`
</span><span style="color: #008080;">23</span>     Access=`<span style="color: #0000ff;">echo</span> $line |<span style="color: #0000ff;">awk</span> <span style="color: #800000;">'</span><span style="color: #800000;">{print $2}</span><span style="color: #800000;">'</span><span style="color: #000000;">`
</span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">if</span> [ $Access -ge <span style="color: #800080;">10000</span><span style="color: #000000;"> ]
</span><span style="color: #008080;">25</span>     <span style="color: #0000ff;">then</span>
<span style="color: #008080;">26</span>         #<span style="color: #0000ff;">echo</span><span style="color: #000000;"> $Ip_Add
</span><span style="color: #008080;">27</span>         iptables -I INPUT -s $Ip_Add -<span style="color: #000000;">j DROP
</span><span style="color: #008080;">28</span>     <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">29</span> <span style="color: #0000ff;">done</span> &lt;$Info_File</pre>
                                                                    
                                                                  </div>
                                                                  
                                                                  
                                                                  <p>
                                                                    <span class="cnblogs_code_collapse">View Code 解决dDOS攻击脚本</span></div>
                                                                    </div>
                                                                    
                                                                    
                                                                    <p>
                                                                      脚本执行结果：
                                                                    </p>
                                                                    
                                                                    
                                                                    <div>
                                                                      <div class="cnblogs_code">
                                                                        <pre>[root@clsn <span style="color: #0000ff;">while</span>]# iptables -<span style="color: #000000;">L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination  
DROP       all  </span>--  <span style="color: #800080;">112.64</span>.<span style="color: #800080;">171.98</span><span style="color: #000000;">        anywhere     
DROP       all  </span>--  <span style="color: #800080;">58.220</span>.<span style="color: #800080;">223.62</span><span style="color: #000000;">        anywhere     

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination  

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination  </span></pre>
                                                                        
                                                                      </div>
                                                                      
                                                                    </div>
                                                                    
                                                                    
                                                                    <p>
                                                                      其他方法进行日志分析
                                                                    </p>
                                                                    
                                                                    
                                                                    <div>
                                                                      <p class="a4">
                                                                        　　elk日志分析
                                                                      </p>
                                                                      
                                                                      
                                                                      <p class="a4">
                                                                        　　　　http://blog.oldboyedu.com/elk/
                                                                      </p>
                                                                      
                                                                      
                                                                      <p class="a4">
                                                                        　　nginx-WAF
                                                                      </p>
                                                                      
                                                                      
                                                                      <p class="a4">
                                                                        　　　　http://blog.oldboyedu.com/nginx-waf/
                                                                      </p>
                                                                      
                                                                    </div>
                                                                    
                                                                    
                                                                    <h3>
                                                                      <span id="194_4">1.9.4 【练习题4】开发脚本入侵检测与报警案例（入侵检测系统）</span>
                                                                    </h3>
                                                                    
                                                                    
                                                                    <p>
                                                                      　　监控web站点目录（/var/html/www）下所有文件是否被恶意篡改（文件内容被改了），如果有就打印改动的文件名（发邮件），定时任务每3分钟执行一次。
                                                                    </p>
                                                                    
                                                                    
                                                                    <p>
                                                                      　　IDS是英文&ldquo;Intrusion Detection Systems&rdquo;的缩写，中文意思是&ldquo;入侵检测系统&rdquo;。
                                                                    </p>
                                                                    
                                                                    
                                                                    <p>
                                                                      　　脚本内容
                                                                    </p>
                                                                    
                                                                    
                                                                    <p>
                                                                      <strong>第一个里程碑：生成md5</strong><strong>验证文件</strong>
                                                                    </p>
                                                                    
                                                                    
                                                                    <p>
                                                                      <em><span style="text-decoration: underline;">文件的校验文件</span></em>
                                                                    </p>
                                                                    
                                                                    
                                                                    <div>
                                                                      <div class="cnblogs_code">
                                                                        <pre><span style="color: #0000ff;">find</span> /var/html/www<span style="color: #008000;">/*</span><span style="color: #008000;"> -type f |xargs md5sum >/tmp/check/web_file_check.md5sum</span></pre>
                                                                        
                                                                      </div>
                                                                      
                                                                    </div>
                                                                    
                                                                    
                                                                    <p>
                                                                      <span style="text-decoration: underline;">目录的校验文件</span>
                                                                    </p>
                                                                    
                                                                    
                                                                    <div>
                                                                      <div class="cnblogs_code">
                                                                        <pre>tree /var/html/www/ -d  >/tmp/check/<span style="color: #000000;">web_dir_check.txt
md5sum </span>/tmp/check/<span style="color: #000000;">web_dir_check.txt
md5sum </span>/tmp/check/web_dir_check.txt >/tmp/check/web_dir_check.md5sum</pre>
                                                                        
                                                                      </div>
                                                                      
                                                                    </div>
                                                                    
                                                                    
                                                                    <p>
                                                                      脚本内容
                                                                    </p>
                                                                    
                                                                    
                                                                    <div>
                                                                      <div class="cnblogs_code" onclick="cnblogs_code_show('42f158a6-ab3f-44f4-986c-316edba21921')">
                                                                        <img id="code_img_closed_42f158a6-ab3f-44f4-986c-316edba21921" class="code_img_closed" src="https://clsn.io/wp-content/uploads/2018/03/ContractedBlock-9.gif" alt="Shell编程进阶篇(完结)" alt="" /><img id="code_img_opened_42f158a6-ab3f-44f4-986c-316edba21921" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('42f158a6-ab3f-44f4-986c-316edba21921',event)" data-original="https://clsn.io/wp-content/uploads/2018/03/ExpandedBlockStart-9.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" /></p>
                                                                        
                                                                        
                                                                        
                                                                        <div id="cnblogs_code_open_42f158a6-ab3f-44f4-986c-316edba21921" class="cnblogs_code_hide">
                                                                          <pre><span style="color: #008080;"> 1</span> [root@clsn check]# <span style="color: #0000ff;">cat</span> web_file_check.<span style="color: #0000ff;">sh</span> 
<span style="color: #008080;"> 2</span> #!/bin/<span style="color: #000000;">bash
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;"> 4</span> # File Name: web_file_check.<span style="color: #0000ff;">sh</span>
<span style="color: #008080;"> 5</span> # Version: V1.<span style="color: #800080;"></span>
<span style="color: #008080;"> 6</span> <span style="color: #000000;"># Author: clsn
</span><span style="color: #008080;"> 7</span> # Organization: http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
<span style="color: #008080;"> 8</span> # Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">10</span> <span style="color: #800080;">14</span>:<span style="color: #800080;">15</span>:<span style="color: #800080;">34</span>
<span style="color: #008080;"> 9</span> <span style="color: #000000;"># Description:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">#############################################################
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> Url1=http:<span style="color: #008000;">//</span><span style="color: #008000;">10.0.0.1/web_file_check.md5sum</span>
<span style="color: #008080;">13</span> Url2=http:<span style="color: #008000;">//</span><span style="color: #008000;">10.0.0.1/web_dir_check.md5sum</span>
<span style="color: #008080;">14</span> Dir=/tmp/check/
<span style="color: #008080;">15</span> Web_Dir=/var/html/www/
<span style="color: #008080;">16</span> Check_File1=/tmp/check/<span style="color: #000000;">web_file_check.md5sum
</span><span style="color: #008080;">17</span> Check_File2=/tmp/check/<span style="color: #000000;">web_dir_check.md5sum
</span><span style="color: #008080;">18</span> Check_Dir=/tmp/check/<span style="color: #000000;">web_dir_check.txt
</span><span style="color: #008080;">19</span> Check_Out=/tmp/check/<span style="color: #000000;">check_out.md5sum
</span><span style="color: #008080;">20</span> Mail_info=/tmp/check/<span style="color: #000000;">mail.txt
</span><span style="color: #008080;">21</span> Date=`<span style="color: #0000ff;">date</span> +%F_%<span style="color: #000000;">T`
</span><span style="color: #008080;">22</span> Host_Name=`<span style="color: #0000ff;">hostname</span><span style="color: #000000;">`
</span><span style="color: #008080;">23</span> Host_IP=`<span style="color: #0000ff;">hostname</span> -<span style="color: #000000;">I`
</span><span style="color: #008080;">24</span> Email_Addr=<span style="color: #800080;">995701749</span><span style="color: #000000;">@qq.com
</span><span style="color: #008080;">25</span> 
<span style="color: #008080;">26</span> [ -d $Dir ] || <span style="color: #0000ff;">mkdir</span> -<span style="color: #000000;">p $Dir
</span><span style="color: #008080;">27</span> <span style="color: #0000ff;">if</span> [ ! -<span style="color: #000000;">f $Check_File1 ] 
</span><span style="color: #008080;">28</span>   <span style="color: #0000ff;">then</span> 
<span style="color: #008080;">29</span>     cd $Dir &&<span style="color: #000000;">\
</span><span style="color: #008080;">30</span>     <span style="color: #0000ff;">wget</span><span style="color: #000000;"> $Url1
</span><span style="color: #008080;">31</span> <span style="color: #0000ff;">elif</span> [ ! -<span style="color: #000000;">f $Check_File2 ]
</span><span style="color: #008080;">32</span>    <span style="color: #0000ff;">then</span> 
<span style="color: #008080;">33</span>     cd $Dir &&<span style="color: #000000;">\
</span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">wget</span><span style="color: #000000;"> $Url2
</span><span style="color: #008080;">35</span> <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">36</span> 
<span style="color: #008080;">37</span> md5sum -c $Check_File1 >$Check_Out  <span style="color: #800080;">2</span>>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">38</span> Back_num1=$?
<span style="color: #008080;">39</span> tree -d $Web_Dir ><span style="color: #000000;">$Check_Dir
</span><span style="color: #008080;">40</span> md5sum -c $Check_File2 &>/dev/<span style="color: #0000ff;">null</span>
<span style="color: #008080;">41</span> Back_num2=$?
<span style="color: #008080;">42</span> <span style="color: #0000ff;">if</span> [ $Back_num1 -ne <span style="color: #800080;"></span><span style="color: #000000;"> ]
</span><span style="color: #008080;">43</span>   <span style="color: #0000ff;">then</span>
<span style="color: #008080;">44</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">发生主机：$Host_Name  主机IP地址：$Host_IP</span><span style="color: #800000;">"</span>  ><span style="color: #000000;"> $Mail_info
</span><span style="color: #008080;">45</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">在 $Date 的检测中发现以下文件被篡改</span><span style="color: #800000;">"</span> >><span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">46</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">==================================================</span><span style="color: #800000;">"</span> >><span style="color: #000000;">$Mail_info  
</span><span style="color: #008080;">47</span>     <span style="color: #0000ff;">egrep</span>  -i  <span style="color: #800000;">"</span><span style="color: #800000;">失败|failed</span><span style="color: #800000;">"</span>  $Check_Out >><span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">48</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">==================================================</span><span style="color: #800000;">"</span> >><span style="color: #000000;">$Mail_info  
</span><span style="color: #008080;">49</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">请尽快登陆服务器进行处理！！！</span><span style="color: #800000;">"</span>  >><span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">50</span>     mail -s <span style="color: #800000;">"</span><span style="color: #800000;">【警告】web站点文件被篡改</span><span style="color: #800000;">"</span> -a $Check_File1 $Email_Addr &lt;<span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">51</span> <span style="color: #0000ff;">fi</span>
<span style="color: #008080;">52</span> 
<span style="color: #008080;">53</span> <span style="color: #0000ff;">if</span> [ $Back_num2 -ne <span style="color: #800080;"></span><span style="color: #000000;"> ]
</span><span style="color: #008080;">54</span>   <span style="color: #0000ff;">then</span>
<span style="color: #008080;">55</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">目录检测信息</span><span style="color: #800000;">"</span> ><span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">56</span>     <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">在 $Date 的检测中发现目录被篡改</span><span style="color: #800000;">"</span> >><span style="color: #000000;">$Mail_info
</span><span style="color: #008080;">57</span>     mail -s <span style="color: #800000;">"</span><span style="color: #800000;">【警告】web站点目录被篡改</span><span style="color: #800000;">"</span> -a $Check_Dir $Email_Addr&lt;<span style="color: #000000;">$Check_Dir
</span><span style="color: #008080;">58</span> <span style="color: #0000ff;">fi</span></pre>
                                                                          
                                                                        </div>
                                                                        
                                                                        
                                                                        <p>
                                                                          <span class="cnblogs_code_collapse">View Code 入侵检测与报警</span></div>
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            修改文件目录后执行结果
                                                                          </p>
                                                                          
                                                                          
                                                                          <p align="center">
                                                                            <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212155716222-2020673909.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />
                                                                          </p>
                                                                          
                                                                          
                                                                          
                                                                          <p align="center">
                                                                            &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212155737019-225058576.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />
                                                                          </p>
                                                                          
                                                                          
                                                                          
                                                                          <p align="center">
                                                                            <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212155744769-240256875.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
                                                                          </p>
                                                                          
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="195_5">1.9.5 【练习题5】单词及字母去重排序案例</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <p>
                                                                            用shell处理以下内容
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <p class="a4">
                                                                              　　1、按单词出现频率降序排序！
                                                                            </p>
                                                                            
                                                                            
                                                                            <p class="a4">
                                                                              　　2、按字母出现频率降序排序！
                                                                            </p>
                                                                            
                                                                            
                                                                            <div class="cnblogs_code">
                                                                              <pre>the squid project provides a number ofresources to assist users design implement and support squid installations.Please browse the documentation and support sections <span style="color: #0000ff;">for</span> <span style="color: #0000ff;">more</span> infomation byoldboy training</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本内容：
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn play]# <span style="color: #0000ff;">cat</span> abc.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: abc.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">23</span>:<span style="color: #800080;">19</span><span style="color: #000000;">
# Description:
#############################################################

a</span>=<span style="color: #800000;">"</span><span style="color: #800000;">the squid project provides a number ofresources to assist users design implement and support squid installations.Please browse the documentation and support sections for more infomation byoldboy training</span><span style="color: #800000;">"</span>

<span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">按单词出现频率降序排序！</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> $a 
  </span><span style="color: #0000ff;">do</span> 
   <span style="color: #0000ff;">echo</span><span style="color: #000000;"> $i 
</span><span style="color: #0000ff;">done</span>|<span style="color: #000000;">\
  </span><span style="color: #0000ff;">sort</span> |<span style="color: #0000ff;">uniq</span> -c|<span style="color: #0000ff;">sort</span> -nk1  -<span style="color: #000000;">r
</span><span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">按字母出现频率降序排序！</span><span style="color: #800000;">"</span>
<span style="color: #0000ff;">echo</span> $a |<span style="color: #0000ff;">grep</span> -o <span style="color: #800000;">"</span><span style="color: #800000;">[a-z]</span><span style="color: #800000;">"</span> |<span style="color: #0000ff;">sort</span>|<span style="color: #0000ff;">uniq</span>  -c |<span style="color: #0000ff;">sort</span> -nk1 -r</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="196_6">1.9.6 【练习题6】编写正（或长）方形图形案例</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <p>
                                                                            请用shell或Python编写一个正（或长）方形，接收用户输入的数字。
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shell脚本内容
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn play]# <span style="color: #0000ff;">cat</span>  zhengfangxing.<span style="color: #0000ff;">sh</span><span style="color: #000000;">
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: zhengfangxing.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">33</span>:<span style="color: #800080;">33</span><span style="color: #000000;">
# Description:
#############################################################
trap </span><span style="color: #800000;">"</span><span style="color: #800000;">echo 输入exit退出</span><span style="color: #800000;">"</span> <span style="color: #800080;">2</span>
<span style="color: #0000ff;">while</span> <span style="color: #0000ff;">true</span>
  <span style="color: #0000ff;">do</span><span style="color: #000000;">
    read </span>-p <span style="color: #800000;">"</span><span style="color: #800000;">你想看多大的正方形:</span><span style="color: #800000;">"</span><span style="color: #000000;"> a
    [ </span><span style="color: #800000;">"</span><span style="color: #800000;">$a</span><span style="color: #800000;">"</span> == <span style="color: #800000;">"</span><span style="color: #800000;">exit</span><span style="color: #800000;">"</span> ] &&<span style="color: #000000;"> exit 
    </span><span style="color: #0000ff;">expr</span> <span style="color: #800080;">1</span> + $a &>/dev/<span style="color: #0000ff;">null</span><span style="color: #000000;">  
    [ $</span>? -ne <span style="color: #800080;"></span> ] && <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">请输入一个数字！</span><span style="color: #800000;">"</span> && exit <span style="color: #800080;">2</span><span style="color: #000000;">
    b</span>=<span style="color: #800000;">"</span><span style="color: #800000;">■ </span><span style="color: #800000;">"</span><span style="color: #000000;">
    d</span>=$(<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> `eval <span style="color: #0000ff;">echo</span> {<span style="color: #800080;">1</span>..$a}`;<span style="color: #0000ff;">do</span> <span style="color: #0000ff;">echo</span> -n $b; <span style="color: #0000ff;">echo</span> -n <span style="color: #800000;">"</span> <span style="color: #800000;">"</span>;<span style="color: #0000ff;">done</span><span style="color: #000000;">)
    
    </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> `eval <span style="color: #0000ff;">echo</span> {<span style="color: #800080;">1</span><span style="color: #000000;">..$a}`
     </span><span style="color: #0000ff;">do</span>
      <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">$d</span><span style="color: #800000;">"</span>
    <span style="color: #0000ff;">done</span>
<span style="color: #0000ff;">done</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 脚本执行效果
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn play]# <span style="color: #0000ff;">sh</span>  zhengfangxing.<span style="color: #0000ff;">sh</span>  <span style="color: #800080;">4</span><span style="color: #000000;">
■ ■ ■ ■ 
■ ■ ■ ■ 
■ ■ ■ ■ 
■ ■ ■ ■ 
[root@clsn play]# </span><span style="color: #0000ff;">sh</span>  zhengfangxing.<span style="color: #0000ff;">sh</span>  <span style="color: #800080;">3</span><span style="color: #000000;">
■ ■ ■ 
■ ■ ■ 
■ ■ ■</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h2>
                                                                            <span id="110">1.10 各种语句小结</span>
                                                                          </h2>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　?&nbsp; while循环的特长是执行守护进程以及我们希望循环不退出持续执行，用于频率小于1分钟循环处理(crond)，其他的while循环几乎都可以被for循环替代。
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　?&nbsp;&nbsp; case语句可以被if语句替换，一般在系统启动脚本传入少量固定规则字符串用case语句，其他普通判断多用if。
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　?&nbsp;&nbsp;一句话，if，for语句最常用，其次while(守护进程)，case(服务启动脚本)。
                                                                          </p>
                                                                          
                                                                          
                                                                          <h2>
                                                                            <span id="111">1.11 附录</span>
                                                                          </h2>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1111">1.11.1 格式化文本--对齐文本</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn scripts]# column --<span style="color: #000000;">help 

用法：
 column [选项] [文件 ...]

选项：
 </span>-c, --columns &lt;宽度><span style="color: #000000;">     输出宽度(字符数)
 </span>-t, --<span style="color: #000000;">table              创建表格
 </span>-s, --separator &lt;字符串><span style="color: #000000;"> 可用的表格分隔符
 </span>-o, --output-separator &lt;字符串><span style="color: #000000;">
                          表格输出列分隔符，默认为两个空格
 </span>-x, --<span style="color: #000000;">fillrows           先填充行，再填充列

 </span>-h, --<span style="color: #000000;">help     显示此帮助并退出
 </span>-V, --<span style="color: #000000;">version  输出版本信息并退出

更多信息请参阅 column(</span><span style="color: #800080;">1</span>)。</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1112">1.11.2 服务器被挂马怎么办？</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <ol>
                                                                            <li>
                                                                              将被挂马服务器上，原有重要数据备份下来
                                                                            </li>
                                                                            
                                                                            
                                                                            <li>
                                                                              仔细筛查数据，确保其中都是正常文件
                                                                            </li>
                                                                            
                                                                            
                                                                            <li>
                                                                              重新安装服务器操作系统，并针对性的加强安全防护。
                                                                            </li>
                                                                            
                                                                            
                                                                            <li>
                                                                              <strong>切记</strong>，服务器中木马后必须重新安装操作系统。
                                                                            </li>
                                                                            
                                                                          </ol>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1113">1.11.3 怎么通过进程找到程序</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <p>
                                                                            通过进程找到pid号码
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn proc]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span><span style="color: #000000;"> sshd 
root       </span><span style="color: #800080;">1294</span>      <span style="color: #800080;">1</span>  <span style="color: #800080;"></span> <span style="color: #800080;">09</span>:<span style="color: #800080;">18</span> ?        <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> /usr/sbin/sshd -D</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过pid找到在proc目录下的临时文件夹
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn proc]# cd /proc/<span style="color: #800080;">1294</span><span style="color: #000000;">
[root@clsn </span><span style="color: #800080;">1294</span>]# </pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 查看其中的exe文件，即可发现程序文件的路径
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn <span style="color: #800080;">1294</span><span style="color: #000000;">]# ll exe 
lrwxrwxrwx </span><span style="color: #800080;">1</span> root root <span style="color: #800080;"></span> 12月 <span style="color: #800080;">11</span> <span style="color: #800080;">09</span>:<span style="color: #800080;">18</span> exe -> /usr/sbin/sshd</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1114_screen">1.11.4 screen程序 防止脚本执行中断</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　用操作，更多详情参照 <a href="/wp-content/themes/clsn-003/inc/go.php?url=http://www.cnblogs.com/clsn/p/8022625.html"  target="_blank">http://www.cnblogs.com/clsn/p/8022625.html</a>
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>ctrl +a +<span style="color: #000000;">d  退出当前终端，返回加载screen前的shell命令状态
screen </span>-<span style="color: #0000ff;">ls</span><span style="color: #000000;"> 可看screen会话
screen </span>-r <span style="color: #0000ff;">id</span> 指定进入哪个screen会话</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; screen进程原理
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn ~]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span> <span style="color: #0000ff;">ping</span><span style="color: #000000;"> 
root      </span><span style="color: #800080;">30170</span>  <span style="color: #800080;">30153</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">57</span> pts/<span style="color: #800080;">5</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">ping</span> <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.254</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30172</span>  <span style="color: #800080;">30078</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">58</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">grep</span> --color=auto <span style="color: #0000ff;">ping</span><span style="color: #000000;">
[root@clsn </span>~]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span> <span style="color: #800080;">30170</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30170</span>  <span style="color: #800080;">30153</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">57</span> pts/<span style="color: #800080;">5</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">ping</span> <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.254</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30174</span>  <span style="color: #800080;">30078</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">59</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">grep</span> --color=auto <span style="color: #800080;">30170</span><span style="color: #000000;">
[root@clsn </span>~]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span> <span style="color: #800080;">30153</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30153</span>  <span style="color: #800080;">30119</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">57</span> pts/<span style="color: #800080;">5</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> /bin/<span style="color: #000000;">bash
root      </span><span style="color: #800080;">30170</span>  <span style="color: #800080;">30153</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">57</span> pts/<span style="color: #800080;">5</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">ping</span> <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.254</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30176</span>  <span style="color: #800080;">30078</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">59</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">grep</span> --color=auto <span style="color: #800080;">30153</span><span style="color: #000000;">
[root@clsn </span>~]# <span style="color: #0000ff;">ps</span> -ef |<span style="color: #0000ff;">grep</span> <span style="color: #800080;">30119</span><span style="color: #000000;">
root      </span><span style="color: #800080;">30119</span>      <span style="color: #800080;">1</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">56</span> ?        <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;"> SCREEN
root      </span><span style="color: #800080;">30120</span>  <span style="color: #800080;">30119</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">56</span> pts/<span style="color: #800080;">4</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> /bin/<span style="color: #000000;">bash
root      </span><span style="color: #800080;">30153</span>  <span style="color: #800080;">30119</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">57</span> pts/<span style="color: #800080;">5</span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> /bin/<span style="color: #000000;">bash
root      </span><span style="color: #800080;">30178</span>  <span style="color: #800080;">30078</span>  <span style="color: #800080;"></span> <span style="color: #800080;">11</span>:<span style="color: #800080;">59</span> pts/<span style="color: #800080;"></span>    <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span> <span style="color: #0000ff;">grep</span> --color=auto <span style="color: #800080;">30119</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1115_shell">1.11.5 shell中实现倒计时效果</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <p>
                                                                            脚本内容
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>[root@clsn scripts]# <span style="color: #0000ff;">cat</span> daojishi.<span style="color: #0000ff;">sh</span><span style="color: #000000;"> 
#</span>!/bin/<span style="color: #000000;">bash
#############################################################
# File Name: daojishi.</span><span style="color: #0000ff;">sh</span><span style="color: #000000;">
# Version: V1.</span><span style="color: #800080;"></span><span style="color: #000000;">
# Author: clsn
# Organization: http:</span><span style="color: #008000;">//</span><span style="color: #008000;">blog.znix.top</span>
# Created Time : <span style="color: #800080;">2017</span>-<span style="color: #800080;">12</span>-<span style="color: #800080;">12</span> <span style="color: #800080;">08</span>:<span style="color: #800080;">49</span>:<span style="color: #800080;">11</span><span style="color: #000000;">
# Description:
#############################################################

</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> `<span style="color: #0000ff;">seq</span> -<span style="color: #0000ff;">w</span> <span style="color: #800080;">10</span> -<span style="color: #800080;">1</span> <span style="color: #800080;">1</span><span style="color: #000000;">`
  </span><span style="color: #0000ff;">do</span>
    <span style="color: #0000ff;">echo</span> -ne <span style="color: #800000;">"</span><span style="color: #800000;">\b\b$i</span><span style="color: #800000;">"</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">sleep</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #0000ff;">done</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            脚本执行效果
                                                                          </p>
                                                                          
                                                                          
                                                                          <p align="center">
                                                                            <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171212160059894-1879805377.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="Shell编程进阶篇(完结)" alt="" />&nbsp;
                                                                          </p>
                                                                          
                                                                          
                                                                          
                                                                          <h2>
                                                                            <span id="112_linux">1.12 linux中的信号</span>
                                                                          </h2>
                                                                          
                                                                          
                                                                          <h3>
                                                                            <span id="1121_Linux">1.12.1 Linux系统的重要信号及说明</span>
                                                                          </h3>
                                                                          
                                                                          
                                                                          <table class="MsoTable15Grid4Accent1" style="width: 100%; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
                                                                            
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-top-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-top-color: #5b9bd5; border-bottom-color: #5b9bd5; border-left-color: #5b9bd5; border-right: none; background: #5b9bd5; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 5;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">信</span></strong><strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">号</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #5b9bd5; border-right-color: #5b9bd5; border-bottom-color: #5b9bd5; border-left: none; background: #5b9bd5; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 1;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">说</span></strong><strong><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman'; color: white; mso-themecolor: background1;">明</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 68;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">HUP(l)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">挂起，通常因终端掉线或用户退出而引发</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 4;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">INT(2)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">中断，通常因按下</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Ctrl+c</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">组合键而引发</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 68;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">QUIT(3)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">退出，通常因按下</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Ctrl+\</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">组合键而引发</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 4;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">ABRT(6)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">中止，通常因某些严重的执行错误而引发</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 68;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">ALRM(14)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">报警，通常用来处理超时</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 4;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">TERM(15)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">终止，通常在系统关机时发送</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                            <tr>
                                                                              <td style="width: 13.52%; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #9cc2e5; border-bottom-color: #9cc2e5; border-left-color: #9cc2e5; border-top: none; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="13%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; text-align: center; mso-yfti-cnfc: 68;" align="center">
                                                                                  <strong><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">TSTP(20)</span></strong>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                              
                                                                              <td style="width: 86.48%; border-top: none; border-left: none; border-bottom-width: 1pt; border-bottom-color: #9cc2e5; border-right-width: 1pt; border-right-color: #9cc2e5; background: #deeaf6; padding: 0cm 5.4pt;" valign="top" width="86%">
                                                                                <p class="MsoNormal" style="margin-bottom: .0001pt; mso-yfti-cnfc: 64;">
                                                                                  <span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">停止进程的运行，但该信号可以被处理和忽略，通常因按下</span><span style="font-size: 10.0pt; font-family: 'Times New Roman',serif; mso-fareast-font-family: 宋体;" lang="EN-US">Ctrl+z</span><span style="font-size: 10.0pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-family: 'Times New Roman';">组合键而引发</span>
                                                                                </p>
                                                                                
                                                                              </td>
                                                                              
                                                                            </tr>
                                                                            
                                                                            
                                                                          </table>
                                                                          
                                                                          
                                                                          <p>
                                                                            <span style="font-size: 1.17em;">&nbsp;　　使用trap控制信号</span>通常需要忽略的信号包括HUP、INT、QUIT、TSTP、TERM等，对应的信号编号分别为1、2、3、20、15。Shell脚本中既可以用数字来代表信号，也可以使用信号的名字来代表信号
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            <strong><span style="font-size: 1.17em; font-family: 微软雅黑, sans-serif;">1.12.2使用trap控制信号</span></strong>
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　trap命令用于指定在接收到信号后将要采取的行动，信号的相关说明前面已经提到 过。trap命令的一种常见用途是在脚本程序被中断时完成清理工作，或者屏蔽用户非法 使用的某些信号。在使用信号名时需要省略SIG前缀。可以在命令提示符下输人命令 trap -1来查看信号的编号及其关联的名称。
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　trap命令的参数分为两部分，前一部分是接收到指定信号时将要采取的行动，后一部分是要处理的信号名。
                                                                          </p>
                                                                          
                                                                          
                                                                          <p>
                                                                            　　trap命令的使用语法如下：
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>trap command signal</pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp; &nbsp; &nbsp; &nbsp;signal是指接收到的信号，command是指接收到该信号应采取的行动。也就是:
                                                                          </p>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre><span style="color: #000000;">trap &lsquo;命令；命令&rsquo; 信号编号
或
trap &lsquo;命令；命令&rsquo; 信号名</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <div class="cnblogs_code">
                                                                            <pre>[root@clsn ~]# trap <span style="color: #800000;">'</span><span style="color: #800000;">echo clsn</span><span style="color: #800000;">'</span> <span style="color: #800080;">2</span><span style="color: #000000;"> 
[root@clsn </span>~]# ^Cclsn</pre>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <h2>
                                                                            <span id="113">1.13 参考文档</span>
                                                                          </h2>
                                                                          
                                                                          
                                                                          <div>
                                                                            <div class="cnblogs_code">
                                                                              <pre>http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.csdn.net/zhangna20151015/article/details/50293987</span>
https:<span style="color: #008000;">//</span><span style="color: #008000;">zh.wikipedia.org/wiki/For迴圈#傳統的_for_迴圈_for-loops </span>
https:<span style="color: #008000;">//</span><span style="color: #008000;">zh.wikipedia.org/wiki/While迴圈</span>
https:<span style="color: #008000;">//</span><span style="color: #008000;">www.cnblogs.com/kerrycode/p/6537175.html (生产随机数)</span>
http:<span style="color: #008000;">//</span><span style="color: #008000;">blog.51cto.com/lidao/1936495  (不循环，批量创建用户)</span>
http:<span style="color: #008000;">//</span><span style="color: #008000;">www.runoob.com/linux/linux-shell-func.html 函数</span></pre>
                                                                              
                                                                            </div>
                                                                            
                                                                            
                                                                            <p>
                                                                              &nbsp;
                                                                            </p>
                                                                            
                                                                          </div>
                                                                          
                                                                          
                                                                          <p>
                                                                            &nbsp;
                                                                          </p>
                                                                          
                                                                          
                                                                          <div id="toc_container" class="toc_white have_bullets">
                                                                            <ul class="toc_list">
                                                                              <li>
                                                                                <a href="#11_for">1.1 for循环语句</a><ul>
                                                                                  <li>
                                                                                    <a href="#111_shellfor">1.1.1 shell中的for循环</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#112_For">1.1.2 不同语言的For循环</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#12_for">1.2 for循环相关练习题</a><ul>
                                                                                  <li>
                                                                                    <a href="#121_1">1.2.1 【练习题1】批量生成随机字符文件名案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#122_2">1.2.2 【练习题2】批量改名特殊案例</a><ul>
                                                                                      <li>
                                                                                        <a href="#1221nbsp">1.2.2.1&nbsp; 批量改名其他方式</a>
                                                                                      </li>
                                                                                    </ul>
                                                                                  </li>
                                                                                  
                                                                                  <li>
                                                                                    <a href="#123_3">1.2.3 【练习题3】批量创建特殊要求用户案例</a><ul>
                                                                                      <li>
                                                                                        <a href="#1231nbsp_shell">1.2.3.1&nbsp; 批量创建用户并设置随机密码（不使用shell循环）</a>
                                                                                      </li>
                                                                                    </ul>
                                                                                  </li>
                                                                                  
                                                                                  <li>
                                                                                    <a href="#124_4">1.2.4 【练习题4】扫描网络内存活主机案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#125_5">1.2.5 【练习题5】筛选符合长度的单词案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#126_6RANDOM">1.2.6 【练习题6】破解RANDOM随机数案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#127_7">1.2.7 【练习题7】博客园博文爬虫案例</a><ul>
                                                                                      <li>
                                                                                        <a href="#1271nbsp_51CTO">1.2.7.1&nbsp; 51CTO博客爬虫案例</a>
                                                                                      </li>
                                                                                    </ul>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#13_while">1.3 while循环语句</a><ul>
                                                                                  <li>
                                                                                    <a href="#131_shellwhile">1.3.1 shell中while语法</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#132_while">1.3.2 while 使用场景</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#133_while">1.3.3 while 作用</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#14">1.4 获取取文件中的行，单词和字符</a><ul>
                                                                                  <li>
                                                                                    <a href="#141">1.4.1 迭代获取文件中的每一行</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#142">1.4.2 迭代获取每一个单词</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#143">1.4.3 迭代获取每一个字符</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#144">1.4.4 同时获取取文件中的行，单词和字符脚本</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#145_eval">1.4.5 eval 命令用法</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#15_break_continue_exit_return">1.5 break continue exit return</a><ul>
                                                                                  <li>
                                                                                    <a href="#151_break">1.5.1 break命令说明</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#152_continue">1.5.2 continue命令说明</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#153_exit">1.5.3 exit命令说明</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#154_return">1.5.4 return命令说明</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#16_shell">1.6 shell中的数组</a><ul>
                                                                                  <li>
                                                                                    <a href="#161_Shell">1.6.1 为什么会产生Shell数组</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#162_Shell">1.6.2 什么是Shell数组</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#163">1.6.3 数组中的增删改查</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#164">1.6.4 将命令的结果赋值给数组</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#161">1.6.1 数组定义格式</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#162">1.6.2 数组的本质就是一个变量，只是这个变量存了多个值</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#163-2">1.6.3 【练习题】批量检查多个网站地址是否正常</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#17_Shell">1.7 Shell 函数</a><ul>
                                                                                  <li>
                                                                                    <a href="#171">1.7.1 使用函数的优势</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#172">1.7.2 定义函数</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#173">1.7.3 引用函数</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#174">1.7.4 函数传参</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#175_0">1.7.5 $0 永远的脚本名称</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#176_return">1.7.6 函数中return的用法</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#177">1.7.7 自定义常用函数库</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#18_shell">1.8 shell脚本的调试</a><ul>
                                                                                  <li>
                                                                                    <a href="#181">1.8.1 脚本调试技巧</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#182_Shell">1.8.2 Shell调试技巧小结</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#19_shell">1.9 shell编程练习题</a><ul>
                                                                                  <li>
                                                                                    <a href="#191_1shell">1.9.1 【练习题1】shell实现抓阄程序</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#192_29x9">1.9.2 【练习题2】输出9x9 乘法表</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#193_3dDOS">1.9.3 【练习题3】解决dDOS攻击生产案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#194_4">1.9.4 【练习题4】开发脚本入侵检测与报警案例（入侵检测系统）</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#195_5">1.9.5 【练习题5】单词及字母去重排序案例</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#196_6">1.9.6 【练习题6】编写正（或长）方形图形案例</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#110">1.10 各种语句小结</a>
                                                                              </li>
                                                                              <li>
                                                                                <a href="#111">1.11 附录</a><ul>
                                                                                  <li>
                                                                                    <a href="#1111">1.11.1 格式化文本--对齐文本</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#1112">1.11.2 服务器被挂马怎么办？</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#1113">1.11.3 怎么通过进程找到程序</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#1114_screen">1.11.4 screen程序 防止脚本执行中断</a>
                                                                                  </li>
                                                                                  <li>
                                                                                    <a href="#1115_shell">1.11.5 shell中实现倒计时效果</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#112_linux">1.12 linux中的信号</a><ul>
                                                                                  <li>
                                                                                    <a href="#1121_Linux">1.12.1 Linux系统的重要信号及说明</a>
                                                                                  </li>
                                                                                </ul>
                                                                              </li>
                                                                              
                                                                              <li>
                                                                                <a href="#113">1.13 参考文档</a>
                                                                              </li>
                                                                            </ul>
                                                                          </div>