---
title: 网络知识 ACL NAT IPv6
author: 惨绿少年
type: post
date: 2017-10-10T18:36:00+00:00
url: /clsn/lx930.html
Baidusubmit:
  - 1
views:
  - 121
categories:
  - Linux运维
  - 网络技术
  - 运维基本功

---
# <span id="1_ACL">第1章 ACL <span style="font-family: '微软雅黑',sans-serif;">访问控制列表</span></span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">访问控制表（</span><span style="color: red;">Access Control List</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: red;">，</span><span style="color: red;">ACL</span><span style="font-family: '微软雅黑',sans-serif;">），又称存取控制串列，是使用以访问控制矩阵为基础的访问控制方法，每一个对象对应一个串列主体。</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">访问控制表描述每一个对象各自的访问控制，并记录可对此对象进行访问的所有主体对对象的权限。</span>
</p>

## <span id="11_ACL">1.1 <span style="font-family: '微软雅黑',sans-serif;">为什么要用</span>ACL</span>

<p style="margin-left: 63.0pt; text-indent: -21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">流量控制</span>
</p>

<p style="margin-left: 63.0pt; text-indent: -21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">匹配感兴趣的流量</span>
</p>

## <span id="12">1.2 <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: yellow;">标准</span><span style="font-family: '微软雅黑',sans-serif;">访问控制列表</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; background: lime;">只能根据源地址做过滤</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">针对整个协议采取相关动作</span>{<span style="font-family: '微软雅黑',sans-serif;">允许或禁止</span>}
</p>

## <span id="13">1.3 <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: yellow;">扩展</span><span style="font-family: '微软雅黑',sans-serif;">访问控制列表</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">能根据源、目的地地址、端口号等等进行过滤</span>
</p>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">能允许或拒绝特定的协议</span>
</p>

## <span id="14">1.4 <span style="font-family: '微软雅黑',sans-serif;">基本原则</span></span>

&nbsp;&nbsp; &nbsp;1<span style="font-family: '微软雅黑',sans-serif;">、按顺序执行，只要有一条满足，则不会继续查找</span>

&nbsp;&nbsp;&nbsp;&nbsp; 2<span style="font-family: '微软雅黑',sans-serif;">、隐含拒绝，如果都不匹配，那么一定匹配最后的隐含拒绝条目，思科默认的</span>

&nbsp;&nbsp;&nbsp;&nbsp; 3<span style="font-family: '微软雅黑',sans-serif;">、任何条件下只给用户能满足他们需求的最小权限</span>

&nbsp;&nbsp;&nbsp;&nbsp; 4<span style="font-family: '微软雅黑',sans-serif;">、不要忘记把</span>ACL<span style="font-family: '微软雅黑',sans-serif;">应用到端口上</span>

## <span id="15_ACL">1.5 ACL<span style="font-family: '微软雅黑',sans-serif;">的操作</span></span>

### <span id="151">1.5.1 <span style="font-family: '微软雅黑',sans-serif;">入站于出站</span></span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">进方向和出方向是根据数据流相对于接口来确定的</span>
</p>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152031013-933441975.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="152_ACL">1.5.2 <span style="font-family: '微软雅黑',sans-serif;">入方向的</span>ACL<span style="font-family: '微软雅黑',sans-serif;">的操作</span></span>

<p style="text-align: center;" align="center">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152044716-1451911249.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="153_ACL">1.5.3 <span style="font-family: '微软雅黑',sans-serif;">出方向的</span> ACL<span style="font-family: '微软雅黑',sans-serif;">的操作</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152103138-87700862.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />&nbsp;
</p>

### <span id="154_ACL">1.5.4 ACL<span style="font-family: '微软雅黑',sans-serif;">语句</span></span>

<span style="font-family: '微软雅黑',sans-serif;">一、标准</span>ACL

<div class="cnblogs_code">
  <pre>access-list {<span style="color: #800080;">1</span>-<span style="color: #800080;">99</span>} {permit/deny} source-ip source-wildcard [log]</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">二、扩展</span>ACL

<div class="cnblogs_code">
  <pre>access-list {<span style="color: #800080;">100</span>-<span style="color: #800080;">199</span>} {permit/deny} protocol source-ip source-wildcard [<span style="color: #0000ff;">operator</span> port] destination-ip destination-wildcard   [<span style="color: #0000ff;">operator</span> port] [established]  [log]</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">三、命名</span>ACL

<div class="cnblogs_code">
  <pre>ip access-list {standard/<span style="color: #000000;">extended} name
{ permit </span>/deny} source-ip source-<span style="color: #000000;">wildcard 标准ACL
{ permit </span>/deny} protocol source-ip source-wildcard [<span style="color: #0000ff;">operator</span> port] destination-ip destination-wildcard [<span style="color: #0000ff;">operator</span> port] [established][log]  扩展acl</pre>
</div>

### <span id="155_ACL">1.5.5 ACL<span style="font-family: '微软雅黑',sans-serif;">匹配过程</span></span>

<p style="margin-left: 7.1pt; text-indent: 13.9pt;">
  <span style="font-family: '微软雅黑',sans-serif;">顺序匹配，符合不再执行后面的</span>
</p>

<p style="margin-left: 7.1pt; text-indent: 13.9pt;">
  <span style="font-family: '微软雅黑',sans-serif;">所有的都没有匹配到会丢弃（隐含拒绝）</span>
</p>

## <span id="16_ACL">1.6 ACL<span style="font-family: '微软雅黑',sans-serif;">的配置</span></span>

### <span id="161_ACL">1.6.1 ACL<span style="font-family: '微软雅黑',sans-serif;">的标识</span></span>

1-99<span style="font-family: '微软雅黑',sans-serif;">，</span>1300-1999&nbsp;&nbsp; &nbsp;&nbsp;<span style="font-family: '微软雅黑',sans-serif;">标准访问控制列表</span>

100-199<span style="font-family: '微软雅黑',sans-serif;">，</span>2000-2699 <span style="font-family: '微软雅黑',sans-serif;">扩展访问控制列表</span>

name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">命名访问控制列表</span>

### <span id="162">1.6.2 <span style="font-family: '微软雅黑',sans-serif;">标准访问控制列表的配置</span></span>

<div class="cnblogs_code">
  <pre>access-list {<span style="color: #800080;">1</span>-<span style="color: #800080;">99</span>} {permit/deny} source [wildcard mask]</pre>
</div>

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">编号选择</span> 1-99

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: red;">通配符</span><span style="font-family: '微软雅黑',sans-serif;">若无，默认</span>0.0.0.0

&nbsp;&nbsp; 'no access-list _access-list-number_ '<span style="font-family: '微软雅黑',sans-serif;">会删除整个</span>ACL<span style="font-family: '微软雅黑',sans-serif;">列表</span>

<div class="cnblogs_code">
  <pre>ip access-group access-list-number {<span style="color: #0000ff;">in</span>|<span style="color: #0000ff;">out</span> }</pre>
</div>

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">在接口中应用</span>

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">应用时关联入或出站方向</span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; background: yellow;">默认出站</span>
</p>

<p style="text-indent: 21.0pt;">
  'no ip access-group <em>access-list-number</em> '<span style="font-family: '微软雅黑',sans-serif;">会移除接口上应用的访问列表</span>
</p>

### <span id="163">1.6.3 <span style="font-family: 微软雅黑, sans-serif; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">通配符</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">在路由器的配置中，经常出现通配符。和子网掩码一样，都是以&ldquo;</span><span style="font-family: '微软雅黑',sans-serif;">&rdquo;或&ldquo;</span>1<span style="font-family: '微软雅黑',sans-serif;">&rdquo;表示，不过与子网掩码所表示的意思却不一样。</span>
</p>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">子网掩码所表示的是</span>IP<span style="font-family: '微软雅黑',sans-serif;">的网络位和主机位，而通配符则表示与</span>IP<span style="font-family: '微软雅黑',sans-serif;">是否匹配。</span>
</p>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">通配符同样是</span>32<span style="font-family: '微软雅黑',sans-serif;">位，和</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址一一对应，<span style="background: lime;">&ldquo;</span></span><span style="background: lime;"></span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; background: lime;">&rdquo;位代表精确匹配，而&ldquo;</span><span style="background: lime;">1</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: lime;">&ldquo;位代表不许匹配。</span>
</p>

<span style="font-family: '微软雅黑',sans-serif;">例如路由器</span>EIGRP<span style="font-family: '微软雅黑',sans-serif;">的配置中：</span>

<div class="cnblogs_code">
  <pre>RouterA(config)#router eigrp <span style="color: #800080;">100</span><span style="color: #000000;">
RouterA(config</span>-router)#network <span style="color: #800080;">10.0</span>.<span style="color: #800080;">0.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.255</span><span style="color: #000000;">
RouterA(config</span>-router)#network <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.255</span></pre>
</div>

10.0.0.0 0.0.0.255<span style="font-family: '微软雅黑',sans-serif;">说明只要接口的</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址是以&ldquo;</span>10<span style="font-family: '微软雅黑',sans-serif;">&rdquo;开头就参与</span>EIGRP<span style="font-family: '微软雅黑',sans-serif;">进程。</span>

<span style="font-family: '微软雅黑',sans-serif;">同理的，</span>192.168.1.0 0.0.0.255<span style="font-family: '微软雅黑',sans-serif;">说明只要</span>IP<span style="font-family: '微软雅黑',sans-serif;">是以</span>192.168.1<span style="font-family: '微软雅黑',sans-serif;">开头的</span>IP<span style="font-family: '微软雅黑',sans-serif;">就符合。</span>

### <span id="164">1.6.4 <span style="font-family: '微软雅黑',sans-serif;">通配符缩写</span></span>

<div class="cnblogs_code">
  <pre><span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.0</span> == host <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span></pre>
</div>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">精确匹配</span>192.168.1.1<span style="font-family: '微软雅黑',sans-serif;">这个</span>ip

<div class="cnblogs_code">
  <pre><span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.0</span> <span style="color: #800080;">255.255</span>.<span style="color: #800080;">255.255</span> == any</pre>
</div>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">匹配所有</span>IP

## <span id="17_ACL">1.7 <span style="font-family: '微软雅黑',sans-serif;">【实例】标准</span>ACL</span>

<p style="margin-left: 7.1pt; text-indent: 13.9pt;">
  <span style="font-family: '微软雅黑',sans-serif;">禁止主机</span>A <span style="font-family: '微软雅黑',sans-serif;">上外网</span>
</p>

### <span id="171">1.7.1 <span style="font-family: '微软雅黑',sans-serif;">拓扑图</span></span>

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152231028-654451066.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />&nbsp;
</p>

### <span id="172_acl">1.7.2 <span style="font-family: '微软雅黑',sans-serif;">配置路由</span>acl</span>

<div class="cnblogs_code">
  <pre>R-acl-<span style="color: #800080;">1</span>(config)#access-list <span style="color: #800080;">1</span> deny <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.0</span><span style="color: #000000;">
R</span>-acl-<span style="color: #800080;">1</span> (config)#access-list <span style="color: #800080;">1</span> permit any</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">应用到接口上</span>

<div class="cnblogs_code">
  <pre>R-acl-<span style="color: #800080;">1</span> (config)#<span style="color: #0000ff;">interface</span> fastEthernet <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;">
R</span>-acl-<span style="color: #800080;">1</span> (config-<span style="color: #0000ff;">if</span>)#ip access-group <span style="color: #800080;">1</span> <span style="color: #0000ff;">in</span></pre>
</div>

### <span id="173_ACL">1.7.3 <span style="font-family: '微软雅黑',sans-serif;">检查</span>ACL <span style="font-family: '微软雅黑',sans-serif;">表内容</span></span>

<div class="cnblogs_code">
  <pre>R-acl-<span style="color: #800080;">1</span>#show access-lists <span style="color: #800080;">1</span><span style="color: #000000;">
Standard IP access list </span><span style="color: #800080;">1</span><span style="color: #000000;">
    deny host </span><span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span> (<span style="color: #800080;">6</span><span style="color: #000000;"> match(es))
    permit any</span></pre>
</div>

## <span id="18">1.8 <span style="font-family: '微软雅黑',sans-serif;">扩展访问控制列表的配置</span></span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">同一个接口上针对一种协议只能用一个</span>ACL
</p>

### <span id="181">1.8.1 <span style="font-family: '微软雅黑',sans-serif;">配置命令</span></span>

<div class="cnblogs_code">
  <pre>access-list {<span style="color: #800080;">100</span>-<span style="color: #800080;">199</span>} {permit/deny} protocol source-ip source-wildcard [<span style="color: #0000ff;">operator</span> port] destination-ip destination-wildcard  [<span style="color: #0000ff;">operator</span><span style="color: #000000;"> port] [established]  [log]
access</span>-list {<span style="color: #800080;">100</span>-<span style="color: #800080;">199</span>}  permit/deny  协议号 源地址 通配符 目的地址 通配符</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #E36C0A;">应用</span>

<div class="cnblogs_code">
  <pre>ip access-group access-list-number {<span style="color: #0000ff;">in</span>|<span style="color: #0000ff;">out</span> }</pre>
</div>

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">在接口中应用</span>

&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">应用时关联入或出站方向</span>

## <span id="19_ACL">1.9 <span style="font-family: '微软雅黑',sans-serif;">【实例】扩展</span>ACL</span>

<p style="margin-left: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">禁止</span>A<span style="font-family: '微软雅黑',sans-serif;">网段中的</span>192.168.1.1-192.168.1.30 <span style="font-family: '微软雅黑',sans-serif;">访问</span>B<span style="font-family: '微软雅黑',sans-serif;">网段的服务器</span>
</p>

### <span id="191">1.9.1 <span style="font-family: '微软雅黑',sans-serif;">拓扑图</span></span>

<p style="text-align: center;" align="center">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152343638-1323206255.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="192_acl">1.9.2 <span style="font-family: '微软雅黑',sans-serif;">路由器</span>acl<span style="font-family: '微软雅黑',sans-serif;">配置</span></span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>(config)#access-list <span style="color: #800080;">100</span> deny ip <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.31</span> host <span style="color: #800080;">192.168</span>.<span style="color: #800080;">2.200</span><span style="color: #000000;">
R</span>-ACL-<span style="color: #800080;">2</span>(config)#access-list <span style="color: #800080;">100</span> permit ip any any</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">应用到接口</span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>(config)#<span style="color: #0000ff;">interface</span> fastEthernet <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;">
R</span>-ACL-<span style="color: #800080;">2</span>(config-<span style="color: #0000ff;">if</span>)#ip access-group <span style="color: #800080;">100</span> <span style="color: #0000ff;">in</span></pre>
</div>

### <span id="193_acl">1.9.3 <span style="font-family: '微软雅黑',sans-serif;">检查</span>acl<span style="font-family: '微软雅黑',sans-serif;">信息</span></span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>#show  access-lists <span style="color: #800080;">100</span><span style="color: #000000;">
Extended IP access list </span><span style="color: #800080;">100</span><span style="color: #000000;">
    deny ip </span><span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.31</span> host <span style="color: #800080;">192.168</span>.<span style="color: #800080;">2.200</span><span style="color: #000000;">
    permit ip any any<br /></span></pre>
  
  <div class="cnblogs_code">
    <pre><span style="color: #008080;">1</span> C:\>PING <span style="color: #800080;">192.168</span>.<span style="color: #800080;">2.200</span>
<span style="color: #008080;">2</span> 
<span style="color: #008080;">3</span> Pinging <span style="color: #800080;">192.168</span>.<span style="color: #800080;">2.200</span> with <span style="color: #800080;">32</span><span style="color: #000000;"> bytes of data:
</span><span style="color: #008080;">4</span>  
<span style="color: #008080;">5</span> Reply <span style="color: #0000ff;">from</span> <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.254</span><span style="color: #000000;">: Destination host unreachable.
</span><span style="color: #008080;">6</span> Reply <span style="color: #0000ff;">from</span> <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.254</span>: Destination host unreachable.</pre>
  </div>
</div>

### <span id="194">1.9.4 <span style="font-family: '微软雅黑',sans-serif;">禁止访问某一项服务</span></span>

<div class="cnblogs_code">
  <pre>access-list <span style="color: #800080;">100</span> deny tcp any host <span style="color: #800080;">192.168</span>.<span style="color: #800080;">2.200</span> eq <span style="color: #800080;">23</span><span style="color: #000000;">
access</span>-list <span style="color: #800080;">100</span> permint any</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">标准于扩展</span>ACL<span style="font-family: '微软雅黑',sans-serif;">的配置内容</span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>(config)#access-list <span style="color: #800080;">1</span> permit ?<span style="color: #000000;">
  A.B.C.D  Address to match
  any      Any source host
  host     A single host address

R</span>-ACL-<span style="color: #800080;">2</span>(config)#access-list <span style="color: #800080;">100</span> permit  ?<span style="color: #000000;">
  ahp    Authentication Header Protocol
  eigrp  Cisco</span><span style="color: #800000;">'</span><span style="color: #800000;">s EIGRP routing protocol</span>
<span style="color: #000000;">  esp    Encapsulation Security Payload
  gre    Cisco</span><span style="color: #800000;">'</span><span style="color: #800000;">s GRE tunneling</span>
<span style="color: #000000;">  icmp   Internet Control Message Protocol
  ip     Any Internet Protocol
  ospf   OSPF routing protocol
  tcp    Transmission Control Protocol
  udp    User Datagram Protocol</span></pre>
</div>

## <span id="110">1.10 <span style="font-family: '微软雅黑',sans-serif;">命名访问控制列表的配置</span></span>

### <span id="1101">1.10.1 <span style="font-family: '微软雅黑',sans-serif;">配置命令</span></span>

<span style="font-family: '微软雅黑',sans-serif;">格式</span>

<div class="cnblogs_code">
  <pre>ip access-list  { extended|standard } name</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">配置</span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>(config)#ip access-<span style="color: #000000;">list extended test
R</span>-ACL-<span style="color: #800080;">2</span>(config-ext-nacl)#<span style="color: #800080;">10</span> deny TCP <span style="color: #800080;">192.168</span>.<span style="color: #800080;">12.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.255</span> any eq <span style="color: #800080;">23</span><span style="color: #000000;">
R</span>-ACL-<span style="color: #800080;">2</span>(config-ext-nacl)#<span style="color: #800080;">20</span> permit ip any any</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">查看</span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>#show ip access-<span style="color: #000000;">lists test
Extended IP access list test
    deny tcp </span><span style="color: #800080;">192.168</span>.<span style="color: #800080;">12.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.255</span><span style="color: #000000;"> any eq telnet
    permit ip any any</span></pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">应用到接口</span>

<div class="cnblogs_code">
  <pre>R-ACL-<span style="color: #800080;">2</span>(config)#<span style="color: #0000ff;">interface</span> fastEthernet <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;">
R</span>-ACL-<span style="color: #800080;">2</span>(config-<span style="color: #0000ff;">if</span>)#ip access-group test <span style="color: #0000ff;">in</span></pre>
</div>

&nbsp;

## <span id="111">1.11 <span style="font-family: '微软雅黑',sans-serif;">注意</span></span>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">每个接口，每个方向，每种协议，只能设置</span>1<span style="font-family: '微软雅黑',sans-serif;">个</span>ACL
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">组织好你的</span>ACL<span style="font-family: '微软雅黑',sans-serif;">的顺序，比如测试性的最好放在</span>ACL<span style="font-family: '微软雅黑',sans-serif;">的最顶部</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">不可能从</span>ACL<span style="font-family: '微软雅黑',sans-serif;">中除去</span>1<span style="font-family: '微软雅黑',sans-serif;">行，除去一行意味着你将除去整个</span>ACL<span style="font-family: '微软雅黑',sans-serif;">。命名</span>ACL<span style="font-family: '微软雅黑',sans-serif;">除外</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">默认</span>acl<span style="font-family: '微软雅黑',sans-serif;">结尾语句时</span>deny any <span style="font-family: '微软雅黑',sans-serif;">，所以在</span>ACL<span style="font-family: '微软雅黑',sans-serif;">中至少有一句</span>permint<span style="font-family: '微软雅黑',sans-serif;">语句</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">记得创建了</span>ACL<span style="font-family: '微软雅黑',sans-serif;">后应用到接口上</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span>ACL<span style="font-family: '微软雅黑',sans-serif;">是用于过滤经过路由器的数据包，他并不会过滤路由器本身产生的数据包</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">尽可能的把</span>IP<span style="font-family: '微软雅黑',sans-serif;">标准</span>ACL<span style="font-family: '微软雅黑',sans-serif;">放在距离目标近的地方；把扩展</span>ACL<span style="font-family: '微软雅黑',sans-serif;">放在离源地址近的地方</span>
</p>

# <span id="2_NAT">第2章 NAT<span style="font-family: '微软雅黑',sans-serif;">动态地址转换</span></span>

## <span id="21_NAT">2.1 <span style="font-family: '微软雅黑',sans-serif;">为什么需要</span>NAT</span>

<p style="margin-left: 42.0pt;">
  IPv4<span style="font-family: '微软雅黑',sans-serif;">地址紧缺</span>
</p>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: '微软雅黑',sans-serif;">解决方案：</span> DHCP<span style="font-family: '微软雅黑',sans-serif;">、</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">、</span>NAT

### <span id="211">2.1.1 <span style="font-family: '微软雅黑',sans-serif;">私有地址空间</span></span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">私有地址（</span>Private address<span style="font-family: '微软雅黑',sans-serif;">）属于非注册地址，专门为组织机构内部使用。</span>
</p>

&nbsp;&nbsp; NAT<span style="font-family: '微软雅黑',sans-serif;">将私有地址转化为共有</span>IP

## <span id="22_IP">2.2 <span style="font-family: '微软雅黑',sans-serif;">私有</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址空间</span></span>

<div style="border: solid windowtext 2.0pt; padding: 1.0pt 4.0pt 1.0pt 4.0pt; background: #F2F2F2;">
  <p style="text-indent: 21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">
    10.0.0.0 ~ 10.255.255.255
  </p>
  
  <p style="text-indent: 21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">
    172.16.0.0 ~ 172.31.255.255
  </p>
  
  <p style="text-indent: 21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">
    192.168.0.0 ~ 192.168.255.255
  </p>
</div>

## <span id="23_NAT">2.3 NAT<span style="font-family: '微软雅黑',sans-serif;">术语</span></span>

<div align="center">
  <table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
    <tr>
      <td style="width: 91.9pt; border-top: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-right: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="123">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">名称</span></strong>
        </p>
      </td>
      
      <td style="width: 177.2pt; border-top: 1pt solid white; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="236">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">含义</span></strong>
        </p>
      </td>
    </tr>
    
    <tr>
      <td style="width: 91.9pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="123">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">内部本地</span></strong>
        </p>
      </td>
      
      <td style="width: 177.2pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #CCC0D9; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="236">
        <p>
          <span style="font-family: '微软雅黑',sans-serif;">转换之前内部源地址的名字</span>
        </p>
      </td>
    </tr>
    
    <tr>
      <td style="width: 91.9pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="123">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">外部本地</span></strong>
        </p>
      </td>
      
      <td style="width: 177.2pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #E5DFEC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="236">
        <p>
          <span style="font-family: '微软雅黑',sans-serif;">转换之前目标主机的名字</span>
        </p>
      </td>
    </tr>
    
    <tr>
      <td style="width: 91.9pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="123">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">内部全局</span></strong>
        </p>
      </td>
      
      <td style="width: 177.2pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #CCC0D9; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="236">
        <p>
          <span style="font-family: '微软雅黑',sans-serif;">转换之后内部主机的名字</span>
        </p>
      </td>
    </tr>
    
    <tr>
      <td style="width: 91.9pt; border-right: 1pt solid white; border-bottom: 1pt solid white; border-left: 1pt solid white; border-top: none; background: #8064a2; padding: 0cm 5.4pt;" valign="top" width="123">
        <p>
          <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: white;">外部全局</span></strong>
        </p>
      </td>
      
      <td style="width: 177.2pt; border-top: none; border-left: none; border-bottom: solid white 1.0pt; border-right: solid white 1.0pt; background: #E5DFEC; padding: 0cm 5.4pt 0cm 5.4pt;" valign="top" width="236">
        <p>
          <span style="font-family: '微软雅黑',sans-serif;">转换之后外部目标主机的名字</span>
        </p>
      </td>
    </tr>
  </table>
</div>

<p style="text-align: center;" align="center">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152716403-45200653.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

## <span id="24_NAT">2.4 NAT<span style="font-family: '微软雅黑',sans-serif;">三种类型</span></span>

### <span id="241_NAT">2.4.1 <span style="font-family: '微软雅黑',sans-serif;">静态</span>NAT</span>

<span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: lime;">一对一映射</span>

<span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: #984806;">基本网络地址转换（</span><span style="color: #984806;">Basic NAT</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #984806;">）</span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">这一种也可称作</span>NAT<span style="font-family: '微软雅黑',sans-serif;">或&ldquo;<span style="background: lime;">静态</span></span><span style="background: lime;">NAT</span><span style="font-family: '微软雅黑',sans-serif;">&rdquo;。它在技术上比较简单一点，<span style="background: lime;">仅支持地址转换</span>，不支持端口映射。</span>Basic NAT<span style="font-family: '微软雅黑',sans-serif;">要求对每一个当前连接都要对应一个公网</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址，因此要维护一个公网的地址池。宽带（</span>broadband<span style="font-family: '微软雅黑',sans-serif;">）路由器通常使用这种方式来允许一台指定的设备去管理所有的外部链接，甚至当路由器本身只有一个可用外部</span>IP<span style="font-family: '微软雅黑',sans-serif;">时也如此，这台路由器有时也被标记为</span><span style="background: lime;">DMZ</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: lime;">主机</span><span style="font-family: '微软雅黑',sans-serif;">。</span>
</p>

<span style="font-family: '微软雅黑',sans-serif;">基本</span>NAT<span style="font-family: '微软雅黑',sans-serif;">要维护一个<span style="background: lime;">无端口号</span></span><span style="background: lime;">NAT</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; background: lime;">表</span><span style="font-family: '微软雅黑',sans-serif;">，结构如下。</span>

<p style="text-indent: 21.0pt;">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152757263-1121045731.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="242_NAT">2.4.2 <span style="font-family: '微软雅黑',sans-serif;">动态</span>NAT</span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">动态</span>NAT<span style="font-family: '微软雅黑',sans-serif;">是指将内部网络的私有</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址转换为公用</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址时，</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址对是不确定的，是随机的，所有被授权访问</span>Internet<span style="font-family: '微软雅黑',sans-serif;">的私有</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址可随机转换为任何指定的合法</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址。也就是说，只要指定哪些内部地址可以进行转换，以及用哪些合法地址作为外部地址时，就可以进行动态转换。</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">动态转换可以使用多个合法外部地址集。当</span>ISP<span style="font-family: '微软雅黑',sans-serif;">提供的合法</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址略少于网络内部的计算机数量时。可以采用动态转换的方式。</span>
</p>

### <span id="243">2.4.3 <span style="font-family: '微软雅黑',sans-serif;">端口复用</span></span>

<span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: #984806;">网络地址端口转换（</span><span style="color: #984806;">NAPT</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new"; color: #984806;">）</span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">这种方式支持端口的映射，并允许<span style="background: yellow;">多台主机共享一个公网</span></span><span style="background: yellow;">IP</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: yellow;">地址</span><span style="font-family: '微软雅黑',sans-serif;">。</span>
</p>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">支持端口转换的</span>NAT<span style="font-family: '微软雅黑',sans-serif;">又可以分为两类：源地址转换和目的地址转换。前一种情形下发起连接的计算机的</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址将会被重写，使得内网主机发出的数据包能够到达外网主机。后一种情况下被连接计算机的</span>IP<span style="font-family: '微软雅黑',sans-serif;">地址将被重写，使得外网主机发出的数据包能够到达内网主机。实际上，以上两种方式通常会一起被使用以支持双向通信。</span>
</p>

NAPT<span style="font-family: '微软雅黑',sans-serif;">维护一个<span style="background: lime;">带有</span></span><span style="background: lime;">IP</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: lime;">以及端口号的</span><span style="background: lime;">NAT</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";background: lime;">表</span><span style="font-family: '微软雅黑',sans-serif;">，结构如下。</span>

<p style="text-indent: 21.0pt;">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110152815356-1857441210.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

## <span id="25_NAT">2.5 NAT<span style="font-family: '微软雅黑',sans-serif;">配置</span></span>

### <span id="251_NAT">2.5.1 <span style="font-family: '微软雅黑',sans-serif;">静态</span>NAT<span style="font-family: '微软雅黑',sans-serif;">配置</span></span>

<div class="cnblogs_code">
  <pre>ip nat inside source <span style="color: #0000ff;">static</span> local-ip <span style="color: #0000ff;">global</span>-<span style="color: #000000;">ip
进入连接内网端口

ip nat inside
进入连接外网端口

ip nat outside</span></pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">查看</span>

<div class="cnblogs_code">
  <pre>show ip nat trnslations</pre>
</div>

### <span id="252_NAT">2.5.2 <span style="font-family: '微软雅黑',sans-serif;">动态</span>NAT<span style="font-family: '微软雅黑',sans-serif;">转换</span></span>

<div class="cnblogs_code">
  <pre>ip nat pool name start-ip end-<span style="color: #000000;">ip
access</span>-list access-list-number  permint source [source-<span style="color: #000000;">wlldcard]
ip nat inside source list access</span>-list-number pool name</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">查看</span>

<div class="cnblogs_code">
  <pre>show ip nat trnslations</pre>
</div>

&nbsp;

<p style="text-align: center;" align="center">
  <img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110153040841-2119867954.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="253_PAT">2.5.3 PAT<span style="font-family: '微软雅黑',sans-serif;">配置</span></span>

<div class="cnblogs_code">
  <pre>access-list access-list-number permit  source source-<span style="color: #000000;">wlldcard
ip nat inside source list access</span>-list-number <span style="color: #0000ff;">interface</span> <span style="color: #0000ff;">interface</span> overload</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">查看</span>

<div class="cnblogs_code">
  <pre>    show ip nat translations&nbsp;</pre>
</div>

### <span id="254_NAT">2.5.4 <span style="font-family: '微软雅黑',sans-serif;">清除</span>NAT<span style="font-family: '微软雅黑',sans-serif;">转换表项</span></span>

<span style="font-family: '微软雅黑',sans-serif;">清除所有</span>

<div class="cnblogs_code">
  <pre>clear ip nat translation *</pre>
</div>

## <span id="26_NAT">2.6 <span style="font-family: '微软雅黑',sans-serif;">【实验】</span>NAT<span style="font-family: '微软雅黑',sans-serif;">转换</span></span>

<span style="font-family: '微软雅黑',sans-serif;">内网手游</span>PC<span style="font-family: '微软雅黑',sans-serif;">能够访问外网</span>

<span style="font-family: '微软雅黑',sans-serif;">外网用户能够通过公网地址访问内网服务器的</span>telnet<span style="font-family: '微软雅黑',sans-serif;">服务。</span>

### <span id="261">2.6.1 <span style="font-family: '微软雅黑',sans-serif;">拓扑图</span></span>

<p style="text-align: center;" align="center">
  &nbsp;<img data-original="https://clsn.io/wp-content/uploads/2018/03/1190037-20171110153642731-100296952.png" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="" />
</p>

### <span id="262_nat">2.6.2 <span style="font-family: '微软雅黑',sans-serif;">配置</span>nat</span>

<div class="cnblogs_code">
  <pre>R-NAT-<span style="color: #800080;">1</span>(config)#access-list <span style="color: #800080;">1</span> permit <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.0</span> <span style="color: #800080;">0.0</span>.<span style="color: #800080;">0.255</span><span style="color: #000000;">
R</span>-NAT-<span style="color: #800080;">1</span>(config)#ip nat inside source list <span style="color: #800080;">1</span> <span style="color: #0000ff;">interface</span> serial <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;"> overload

注意：
R</span>-NAT-<span style="color: #800080;">1</span>(config)#<span style="color: #0000ff;">interface</span> fastEthernet <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;">
R</span>-NAT-<span style="color: #800080;">1</span>(config-<span style="color: #0000ff;">if</span><span style="color: #000000;">)#ip nat   inside
R</span>-NAT-<span style="color: #800080;">1</span>(config-<span style="color: #0000ff;">if</span>)#<span style="color: #0000ff;">interface</span> s <span style="color: #800080;"></span>/<span style="color: #800080;"></span><span style="color: #000000;">
R</span>-NAT-<span style="color: #800080;">1</span>(config-<span style="color: #0000ff;">if</span>)#ip nat   outside</pre>
</div>

### <span id="263_nat">2.6.3 <span style="font-family: '微软雅黑',sans-serif;">查看</span>nat<span style="font-family: '微软雅黑',sans-serif;">表</span></span>

<div class="cnblogs_code">
  <pre>R-NAT-<span style="color: #800080;">1</span><span style="color: #000000;">#show ip nat translations
Pro  Inside </span><span style="color: #0000ff;">global</span>     Inside local       Outside local      Outside <span style="color: #0000ff;">global</span><span style="color: #000000;">
icmp </span><span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.1</span>:<span style="color: #800080;">1</span>   <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span>:<span style="color: #800080;">1</span>      <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">1</span>   <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">1</span><span style="color: #000000;">
icmp </span><span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.1</span>:<span style="color: #800080;">2</span>   <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span>:<span style="color: #800080;">2</span>      <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">2</span>   <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">2</span><span style="color: #000000;">
icmp </span><span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.1</span>:<span style="color: #800080;">3</span>   <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span>:<span style="color: #800080;">3</span>      <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">3</span>   <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">3</span><span style="color: #000000;">
icmp </span><span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.1</span>:<span style="color: #800080;">4</span>   <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.1</span>:<span style="color: #800080;">4</span>      <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">4</span>   <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.30</span>:<span style="color: #800080;">4</span></pre>
</div>

### <span id="264">2.6.4 <span style="font-family: '微软雅黑',sans-serif;">映射内网服务器</span></span>

<span style="font-family: '微软雅黑',sans-serif;">完整映射</span>

<div class="cnblogs_code">
  <pre>R-NAT-<span style="color: #800080;">1</span>(config)#ip nat inside source <span style="color: #0000ff;">static</span> <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.100</span> <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.3</span></pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">端口映射</span>

<div class="cnblogs_code">
  <pre>R-NAT-<span style="color: #800080;">1</span>(config)#ip nat inside source <span style="color: #0000ff;">static</span> tcp <span style="color: #800080;">192.168</span>.<span style="color: #800080;">1.100</span> <span style="color: #800080;">80</span> <span style="color: #800080;">202.101</span>.<span style="color: #800080;">100.1</span> <span style="color: #800080;">8080</span></pre>
</div>

# <span id="3_IPv6">第3章 IPv6</span>

IPv6<span style="font-family: '微软雅黑',sans-serif;">的</span>128<span style="font-family: '微软雅黑',sans-serif;">位地址通常写成</span>8<span style="font-family: '微软雅黑',sans-serif;">组，每组为四个十六进制数的形式。</span>

## <span id="31_IPv6">3.1 IPv6<span style="font-family: '微软雅黑',sans-serif;">地址</span></span>

<div class="cnblogs_code">
  <pre><span style="color: #800080;">2001</span>:0db8:3c4d:<span style="color: #800080;">0012</span>:<span style="color: #800080;">0000</span>:<span style="color: #800080;">0000</span>:<span style="color: #800080;">1234</span><span style="color: #000000;">:56ab
全球前缀       子网       接口ID
http:</span><span style="color: #008000;">//</span><span style="color: #008000;">[2001:0db8:3c4d:0012:0000:0000:1234:56ab]/default.html</span></pre>
</div>

Web<span style="font-family: '微软雅黑',sans-serif;">浏览器发起</span>HTTP<span style="font-family: '微软雅黑',sans-serif;">连接的例子：</span>

### <span id="311_IPv6">3.1.1 <span style="font-family: '微软雅黑',sans-serif;">【示例】</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">地址表达式</span></span>

<div class="cnblogs_code">
  <pre>AD80:<span style="color: #800080;">0000</span>:<span style="color: #800080;">0000</span>:<span style="color: #800080;">0000</span>:ABAA:<span style="color: #800080;">0000</span>:00C2:<span style="color: #800080;">0002</span></pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">是一个合法的</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">地址。这个地址比较长，看起来不方便也不易于书写。</span>

<span style="font-family: '微软雅黑',sans-serif;">零压缩法可以用来缩减其长度。</span>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">如果几个连续段位的值都是</span><span style="font-family: '微软雅黑',sans-serif;">，那么这些</span><span style="font-family: '微软雅黑',sans-serif;">就可以简单的以</span><span style="background: lime;">::</span><span style="font-family: '微软雅黑',sans-serif;">来表示，上述地址就可写成</span>
</p>

<div class="cnblogs_code">
  <pre>AD80::ABAA:<span style="color: #800080;">0000</span>:00C2:<span style="color: #800080;">0002</span></pre>
</div>

<p style="text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">这里要注意的是只能简化连续的段位的</span><span style="font-family: '微软雅黑',sans-serif;">，其前后的</span><span style="font-family: '微软雅黑',sans-serif;">都要保留，比如</span>AD80<span style="font-family: '微软雅黑',sans-serif;">的最后的这个</span><span style="font-family: '微软雅黑',sans-serif;">，不能被简化。还有这个<span style="background: lime;">只能用一次</span>，在上例中的</span>ABAA<span style="font-family: '微软雅黑',sans-serif;">后面的</span>0000<span style="font-family: '微软雅黑',sans-serif;">就不能再次简化。当然也可以在</span>AAAA<span style="font-family: '微软雅黑',sans-serif;">后面使用</span>::<span style="font-family: '微软雅黑',sans-serif;">，这样的话前面的</span>12<span style="font-family: '微软雅黑',sans-serif;">个</span><span style="font-family: '微软雅黑',sans-serif;">就不能压缩了。<span style="color: #984806;">这个限制的目的是为了能准确还原被压缩的</span></span><span style="color: #984806;"></span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #984806;">，不然就无法确定每个</span><span style="color: #984806;">::</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #984806;">代表了多少个</span><span style="color: #984806;"></span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #984806;">。</span>
</p>

## <span id="32_IPv6">3.2 IPv6<span style="font-family: '微软雅黑',sans-serif;">地址类型</span></span>

<p style="margin-left: 25.1pt;">
  <span style="font-family: '微软雅黑',sans-serif;">单播地址</span>
</p>

<p style="margin-left: 42.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">&ndash;全球单播地址：典型的、可路由的通用地址</span>
</p>

<p style="margin-left: 42.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">&ndash;链路本地地址：私有地址、不能被路由</span>
</p>

<p style="margin-left: 42.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">&ndash;本地唯一地址：用于非路由目的，但是全球唯一</span>
</p>

<p style="margin-left: 25.1pt;">
  <span style="font-family: '微软雅黑',sans-serif;">组播地址</span>
</p>

<p style="margin-left: 25.1pt;">
  <span style="font-family: '微软雅黑',sans-serif;">任播地址</span>
</p>

### <span id="321_unicast">3.2.1 <span style="font-family: '微软雅黑',sans-serif;">单播地址（</span>unicast<span style="font-family: '微软雅黑',sans-serif;">）</span></span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">单播地址又叫单目地址，就是传统的点对点通信，单播表示一个单接口的标识符。</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">单播地址的类型又分：全球单播地址、链路本地地址和站点本地地址。</span>
</p>

<p style="margin-left: 42.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: red;">全球单播地址</span><span style="font-family: '微软雅黑',sans-serif;">相当于</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">的公网地址，这类地址由供应商提供，或由交换局提供，可聚集全球单点传送地址结构。</span>
</p>

<p style="margin-left: 42.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: red;">链路本地单播地址</span><span style="font-family: '微软雅黑',sans-serif;">是处于可聚集全球单播地址外的，只限于直连链路，是单网络链路上给的主机编号，作用是进行链路上主机的通信</span>
</p>

<p style="margin-left: 42.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;"><img data-original="file:///C:/Users/DEFAUL~1.DES/AppData/Local/Temp/msohtmlclip1/01/clip_image001.gif" src="/wp-content/themes/clsn-003/img/blank.gif" alt="网络知识 ACL NAT IPv6" alt="*" width="17" height="17" />&nbsp;</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: red;">本地唯一地址</span><span style="font-family: '微软雅黑',sans-serif;">用于对特定范围的通信也可说成是规定站点内的通信，不能与站点外地址通信，也不能直接连接到全球</span>Internet<span style="font-family: '微软雅黑',sans-serif;">。</span>
</p>

### <span id="322_multicast">3.2.2 <span style="font-family: '微软雅黑',sans-serif;">组播地址（</span>multicast<span style="font-family: '微软雅黑',sans-serif;">）</span></span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">又称为多点传送地址或者多播，即一组接口的标识符，只要存在合适的多点传输的路由拓扑就可将设有多播地址的包传输到这个地址识别的那组接口。</span>
</p>

### <span id="323_anycast">3.2.3 <span style="font-family: '微软雅黑',sans-serif;">任播地址（</span>anycast<span style="font-family: '微软雅黑',sans-serif;">）</span></span>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">又称之为任意点传送地址，它也是一个标识符可以识别多重接口的情况，只要有合适的路由拓扑，即可以将设有任意传播地址的数据包传给位址识别的最近的单一接口。</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #0070C0;">最近的接口是指最短的路由距离</span><span style="font-family: '微软雅黑',sans-serif;">。任意点传送地址空间可以认为是从单点传送地址空间中划分出来的，它可以是表示单点传送地址的任何形式。它与单点传送地址间结构上是没有差别的。目前，任意点传送地址仅分配给路由器。</span>
</p>

<p style="margin-left: 21.0pt; text-indent: 21.0pt;">
  <span style="font-family: '微软雅黑',sans-serif;">子网</span>-<span style="font-family: '微软雅黑',sans-serif;">路由任意点传送地址是必须预先定义的，根据给定接口的子网前缀产生，要构建一个子网路由任意点地址必须固定子网前缀的位数，余下位数必须设定为</span><span style="font-family: '微软雅黑',sans-serif;">。</span>
</p>

## <span id="33_IPv6">3.3 IPv6<span style="font-family: '微软雅黑',sans-serif;">特殊的地址</span></span>

<table style="border-collapse: collapse; border-width: initial; border-style: none; border-color: initial;" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td style="width: 212.4pt; border-top: 1pt solid #f79646; border-bottom: 1pt solid #f79646; border-left: 1pt solid #f79646; border-right: none; background: #f79646; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: center;" align="center">
        <strong><span style="color: white;">IPv6</span></strong><strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: white;">地址</span></strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: 1pt solid #f79646; border-right: 1pt solid #f79646; border-bottom: 1pt solid #f79646; border-left: none; background: #f79646; padding: 0cm 5.4pt;" width="414">
      <p style="text-align: center;" align="center">
        <strong><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: white;">功能</span></strong>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; background: #fde9d9; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>0:0:0:0:0:0:0:0 </strong><strong><span style="font-family: '微软雅黑',sans-serif;">等于</span>::</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; background: #FDE9D9; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">等价于</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">的</span>0.0.0.0
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>0:0:0:0:0:0:0:1 </strong><strong><span style="font-family: '微软雅黑',sans-serif;">等于</span>::1</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">等价于</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">的</span>127.0.0.1
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; background: #fde9d9; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>0:0:0:0:0:0:0:192.168.100.1</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; background: #FDE9D9; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">这是在</span>IPv6/v4<span style="font-family: '微软雅黑',sans-serif;">混合网络中</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">地址表示</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>2000::/3</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">全球单播地址范围</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; background: #fde9d9; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>FC00::/7</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; background: #FDE9D9; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">本地唯一单播地址范围</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>FE80::/10</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">链路本地单播地址范围</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; background: #fde9d9; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>FF00::/8</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; background: #FDE9D9; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">组播地址范围</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>3FFF:FFFF::/32</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">为示例和文档保留的地址</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; background: #fde9d9; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>2001:0DB8::/32</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; background: #FDE9D9; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">也是为示例和文档保留的地址</span>
      </p>
    </td>
  </tr>
  
  <tr>
    <td style="width: 212.4pt; border-right: 1pt solid #fabf8f; border-bottom: 1pt solid #fabf8f; border-left: 1pt solid #fabf8f; border-top: none; padding: 0cm 5.4pt;" width="283">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <strong>2002::/16</strong>
      </p>
    </td>
    
    <td style="width: 310.4pt; border-top: none; border-left: none; border-bottom: solid #FABF8F 1.0pt; border-right: solid #FABF8F 1.0pt; padding: 0cm 5.4pt 0cm 5.4pt;" width="414">
      <p style="text-align: justify; text-justify: inter-ideograph;">
        <span style="font-family: '微软雅黑',sans-serif;">拥有</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">到</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">的转换系统，</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">包直接通过</span>IPv4<span style="font-family: '微软雅黑',sans-serif;">网络传输</span>
      </p>
    </td>
  </tr>
</table>

## <span id="34">3.4 <span style="font-family: '微软雅黑',sans-serif;">自动配置</span></span>

<span style="font-family: '微软雅黑',sans-serif;">某台设备的</span>MAC<span style="font-family: '微软雅黑',sans-serif;">地址：</span>

<div class="cnblogs_code">
  <pre><span style="color: #800080;">0060</span>.D673.<span style="color: #800080;">1987</span>
<span style="color: #800080;">0260</span>.D6FF.FE73.<span style="color: #800080;">1987</span></pre>
</div>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;">u&nbsp;</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">地址的接口</span>ID<span style="font-family: '微软雅黑',sans-serif;">是</span>64<span style="font-family: '微软雅黑',sans-serif;">位，</span>MAC<span style="font-family: '微软雅黑',sans-serif;">地址只有</span>48<span style="font-family: '微软雅黑',sans-serif;">位，因此需要再加上</span>16<span style="font-family: '微软雅黑',sans-serif;">位，及在中间填充</span>FFFE
</p>

<div class="cnblogs_code">
  <pre><span style="color: #800080;">02</span> &rarr; <span style="color: #800080;">00000010</span></pre>
</div>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;">u&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">在填充过程中，第</span>7<span style="font-family: '微软雅黑',sans-serif;">位如果改成值为</span>1<span style="font-family: '微软雅黑',sans-serif;">，及为全球唯一的，这一位改成值为</span><span style="font-family: '微软雅黑',sans-serif;">，及为本的唯一的</span>
</p>

<p style="margin-left: 21.0pt; text-indent: -21.0pt;">
  <span style="font-family: Wingdings;">u&nbsp;</span><span style="font-family: '微软雅黑',sans-serif;">这种类型的自动配置称为&ldquo;<span style="color: red;">无状态自动配置</span>&rdquo;</span>
</p>

## <span id="35_IPv6Cisco">3.5 <span style="font-family: '微软雅黑',sans-serif;">用</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">配置</span>Cisco<span style="font-family: '微软雅黑',sans-serif;">路由器</span></span>

<span style="font-family: '微软雅黑',sans-serif;">在路由器上启用</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">，<span style="color: #984806;">默认时，</span></span><span style="color: #984806;">IPv6</span><span style="font-family: '微软雅黑',sans-serif; courier new"4courier new";color: #984806;">流量转发被禁用</span>

<div class="cnblogs_code">
  <pre>ipv6 unicast-routing</pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">在接口上配置</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">地址</span>

<div class="cnblogs_code">
  <pre>ipv6 address <span style="color: #800080;">2001</span>:db8:3c4d:<span style="color: #800080;">1</span>:<span style="color: #800080;">0260</span>.d6FF.FE73.<span style="color: #800080;">1987</span>/<span style="color: #800080;">64</span></pre>
</div>

<span style="font-family: '微软雅黑',sans-serif;">启用接口，通过</span>DHCP<span style="font-family: '微软雅黑',sans-serif;">获得</span>IPv6<span style="font-family: '微软雅黑',sans-serif;">地址</span>

<div class="cnblogs_code">
  <pre>ipv6 enable</pre>
</div>

&nbsp;

<div id="toc_container" class="toc_white have_bullets">
  <ul class="toc_list">
    <li>
      <a href="#1_ACL">第1章 ACL 访问控制列表</a><ul>
        <li>
          <a href="#11_ACL">1.1 为什么要用ACL</a>
        </li>
        <li>
          <a href="#12">1.2 标准访问控制列表</a>
        </li>
        <li>
          <a href="#13">1.3 扩展访问控制列表</a>
        </li>
        <li>
          <a href="#14">1.4 基本原则</a>
        </li>
        <li>
          <a href="#15_ACL">1.5 ACL的操作</a><ul>
            <li>
              <a href="#151">1.5.1 入站于出站</a>
            </li>
            <li>
              <a href="#152_ACL">1.5.2 入方向的ACL的操作</a>
            </li>
            <li>
              <a href="#153_ACL">1.5.3 出方向的 ACL的操作</a>
            </li>
            <li>
              <a href="#154_ACL">1.5.4 ACL语句</a>
            </li>
            <li>
              <a href="#155_ACL">1.5.5 ACL匹配过程</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#16_ACL">1.6 ACL的配置</a><ul>
            <li>
              <a href="#161_ACL">1.6.1 ACL的标识</a>
            </li>
            <li>
              <a href="#162">1.6.2 标准访问控制列表的配置</a>
            </li>
            <li>
              <a href="#163">1.6.3 通配符</a>
            </li>
            <li>
              <a href="#164">1.6.4 通配符缩写</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#17_ACL">1.7 【实例】标准ACL</a><ul>
            <li>
              <a href="#171">1.7.1 拓扑图</a>
            </li>
            <li>
              <a href="#172_acl">1.7.2 配置路由acl</a>
            </li>
            <li>
              <a href="#173_ACL">1.7.3 检查ACL 表内容</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#18">1.8 扩展访问控制列表的配置</a><ul>
            <li>
              <a href="#181">1.8.1 配置命令</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#19_ACL">1.9 【实例】扩展ACL</a><ul>
            <li>
              <a href="#191">1.9.1 拓扑图</a>
            </li>
            <li>
              <a href="#192_acl">1.9.2 路由器acl配置</a>
            </li>
            <li>
              <a href="#193_acl">1.9.3 检查acl信息</a>
            </li>
            <li>
              <a href="#194">1.9.4 禁止访问某一项服务</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#110">1.10 命名访问控制列表的配置</a><ul>
            <li>
              <a href="#1101">1.10.1 配置命令</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#111">1.11 注意</a>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#2_NAT">第2章 NAT动态地址转换</a><ul>
        <li>
          <a href="#21_NAT">2.1 为什么需要NAT</a><ul>
            <li>
              <a href="#211">2.1.1 私有地址空间</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#22_IP">2.2 私有IP地址空间</a>
        </li>
        <li>
          <a href="#23_NAT">2.3 NAT术语</a>
        </li>
        <li>
          <a href="#24_NAT">2.4 NAT三种类型</a><ul>
            <li>
              <a href="#241_NAT">2.4.1 静态NAT</a>
            </li>
            <li>
              <a href="#242_NAT">2.4.2 动态NAT</a>
            </li>
            <li>
              <a href="#243">2.4.3 端口复用</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#25_NAT">2.5 NAT配置</a><ul>
            <li>
              <a href="#251_NAT">2.5.1 静态NAT配置</a>
            </li>
            <li>
              <a href="#252_NAT">2.5.2 动态NAT转换</a>
            </li>
            <li>
              <a href="#253_PAT">2.5.3 PAT配置</a>
            </li>
            <li>
              <a href="#254_NAT">2.5.4 清除NAT转换表项</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#26_NAT">2.6 【实验】NAT转换</a><ul>
            <li>
              <a href="#261">2.6.1 拓扑图</a>
            </li>
            <li>
              <a href="#262_nat">2.6.2 配置nat</a>
            </li>
            <li>
              <a href="#263_nat">2.6.3 查看nat表</a>
            </li>
            <li>
              <a href="#264">2.6.4 映射内网服务器</a>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    
    <li>
      <a href="#3_IPv6">第3章 IPv6</a><ul>
        <li>
          <a href="#31_IPv6">3.1 IPv6地址</a><ul>
            <li>
              <a href="#311_IPv6">3.1.1 【示例】IPv6地址表达式</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#32_IPv6">3.2 IPv6地址类型</a><ul>
            <li>
              <a href="#321_unicast">3.2.1 单播地址（unicast）</a>
            </li>
            <li>
              <a href="#322_multicast">3.2.2 组播地址（multicast）</a>
            </li>
            <li>
              <a href="#323_anycast">3.2.3 任播地址（anycast）</a>
            </li>
          </ul>
        </li>
        
        <li>
          <a href="#33_IPv6">3.3 IPv6特殊的地址</a>
        </li>
        <li>
          <a href="#34">3.4 自动配置</a>
        </li>
        <li>
          <a href="#35_IPv6Cisco">3.5 用IPv6配置Cisco路由器</a>
        </li>
      </ul>
    </li>
  </ul>
</div>